<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Command Line Guide &mdash; Sarracenia 3.00.53rc2 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  
        <script src="../_static/documentation_options.js?v=d2516663"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Sarracenia Programming Guide" href="SarraPluginDev.html" />
    <link rel="prev" title="General Sarracenia Concepts" href="Concepts.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Sarracenia
          </a>
              <div class="version">
                3.00.53rc2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../How2Guides/index.html">HOWTOS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Explanation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="Concepts.html">General Sarracenia Concepts</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Command Line Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sr3-everything">SR3 - Everything</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#actions">ACTIONS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#message-gathering">Message Gathering</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setting-the-broker">Setting the Broker</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-the-queue">Creating the Queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="#amqp-queue-bindings">AMQP QUEUE BINDINGS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#client-side-filtering">Client-side Filtering</a></li>
<li class="toctree-l4"><a class="reference internal" href="#naming-queues">NAMING QUEUES</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#posting">POSTING</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#naming-exchanges">NAMING EXCHANGES</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#polling">POLLING</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#advanced-polling">Advanced Polling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#components">COMPONENTS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cpump">CPUMP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#flow">FLOW</a></li>
<li class="toctree-l4"><a class="reference internal" href="#poll">POLL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#post-or-watch">POST or WATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarra">SARRA</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sender">SENDER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shovel">SHOVEL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#subscribe">SUBSCRIBE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#watch">WATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="#winnow">WINNOW</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configurations">Configurations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flowcallbacks">flowCallbacks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#callback-options">callback options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#importing-extensions">Importing Extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deprecated-v2-plugins">Deprecated v2 plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="#environment-variables">Environment Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#logs-and-monitoring">LOGS and MONITORING</a></li>
<li class="toctree-l4"><a class="reference internal" href="#credentials">CREDENTIALS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#periodic-processing">PERIODIC PROCESSING</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sanity-log-dead-interval-default-1-5-housekeeping">sanity_log_dead &lt;interval&gt; (default: 1.5*housekeeping)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nodup-ttl-off-on-999-default-off">nodup_ttl &lt;off|on|999&gt; (default: off)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#error-recovery">ERROR RECOVERY</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">EXAMPLES</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#queues-and-multiple-streams">QUEUES and MULTIPLE STREAMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#report-and-report-exchange">report and report_exchange</a></li>
<li class="toctree-l4"><a class="reference internal" href="#instances">INSTANCES</a></li>
<li class="toctree-l4"><a class="reference internal" href="#remote-configurations">Remote Configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#extensions">Extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#identity">Identity</a></li>
<li class="toctree-l4"><a class="reference internal" href="#transfer">Transfer</a></li>
<li class="toctree-l4"><a class="reference internal" href="#roles-feeder-admin-declare">ROLES - feeder/admin/declare</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration-files">CONFIGURATION FILES</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sundew-compatibility-options">SUNDEW COMPATIBILITY OPTIONS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SarraPluginDev.html">Sarracenia Programming Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="DeploymentConsiderations.html">Deployment Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="DetectFileReady.html">File Detection Strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="DuplicateSuppression.html">Duplicate Suppression</a></li>
<li class="toctree-l2"><a class="reference internal" href="FileCompletion.html">Delivery Completion (inflight)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="History/index.html">History</a></li>
<li class="toctree-l2"><a class="reference internal" href="sftps.html">Why SFTP is More Often Chosen than FTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="Sundew_Migration/index.html">Sundew Migration Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Reference/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Contribution/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api-documentation.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fr/index.html">En français</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Sarracenia</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Explanation</a> &raquo;</li>
      <li>Command Line Guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Explanation/CommandLineGuide.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="command-line-guide">
<h1>Command Line Guide<a class="headerlink" href="#command-line-guide" title="Link to this heading"></a></h1>
<section id="sr3-everything">
<h2>SR3 - Everything<a class="headerlink" href="#sr3-everything" title="Link to this heading"></a></h2>
<p><strong>sr3</strong> is a command line tool to manage <a class="reference external" href="https://github.com/MetPX/sarracenia">Sarracenia</a>
configurations, individually or in groups. For the current user, it reads on all
of the configuration files, state files, and consults the process table to determine
the state of all components. It then makes the change requested.</p>
<blockquote>
<div><p><strong>sr3</strong> <em>options</em> <em>action</em> [ <em>component/configuration</em> … ]</p>
</div></blockquote>
<p>sr3 components are used to publish to and download files from websites or file servers
that provide <a class="reference external" href="../Reference/sr_post.7.html">sr_post(7)</a> protocol notifications. Such sites
publish notification messages for each file as soon as it is available. Clients connect to a
<em>broker</em> (often the same as the server itself) and subscribe to the notifications.
The <em>sr_post</em> notifications provide true push notices for web-accessible folders (WAF),
and are far more efficient than either periodic polling of directories, or ATOM/RSS style
notifications. Sr_subscribe can be configured to post notification messages after they are downloaded,
to make them available to consumers for further processing or transfers.</p>
<p><strong>sr3</strong> can also be used for purposes other than downloading, (such as for
supplying to an external program) specifying the -n (equal to: <em>download off</em>) will
suppress the download behaviour and only post the URL on standard output. The standard
output can be piped to other processes in classic UNIX text filter style.</p>
<p>The components of sarracenia are groups of defaults on the main algorithm,
to reduce the size of individual components.  The components are:</p>
<blockquote>
<div><ul class="simple">
<li><p>cpump - copy notification messages from one pump another second one (a C implementation of shovel.)</p></li>
<li><p>flow - generic flow with no default behaviours. Good basis for building user defined components.</p></li>
<li><p>poll  - poll a non-sarracenia web or file server to create notification messages for processing.</p></li>
<li><p>post &amp; watch - create notification messages for files for processing.</p></li>
<li><p>sarra _ - download file from a remote server to the local one, and re-post them for others.</p></li>
<li><p>sender - send files from a local server to a remote one.</p></li>
<li><p>shovel - copy notification messages, only, not files.</p></li>
<li><p>watch - create notification messages for each new file that arrives in a directory, or at a set path.</p></li>
<li><p>winnow - copy notification messages, suppressing duplicates.</p></li>
</ul>
</div></blockquote>
<p>All of these components accept the same options, with the same effects.
There is also <a class="reference external" href="../Reference/sr3_cpump.1.html">sr3_cpump(1)</a> which is a C version that implements a
subset of the options here, but where they are implemented, they have the same effect.</p>
<p>The <strong>sr3</strong> command usually takes two arguments: an action followed by a list
of configuration files. When any component is invoked, an operation and a
configuration file are specified. If the configuration is omitted, it means to
apply the action to all configurations. The action is one of:</p>
<blockquote>
<div><ul class="simple">
<li><p>foreground: run a single instance in the foreground logging to stderr</p></li>
<li><p>restart: stop and then start the configuration.</p></li>
<li><p>sanity: looks for instances which have crashed or gotten stuck and restarts them.</p></li>
<li><p>start:  start the configuration running</p></li>
<li><p>status: check if the configuration is running.</p></li>
<li><p>stop: stop the configuration from running</p></li>
</ul>
</div></blockquote>
<p>The remaining actions manage the resources (exchanges, queues) used by the component on
the broker, or manage the configurations.</p>
<blockquote>
<div><ul class="simple">
<li><p>cleanup:       deletes the component’s resources on the server.</p></li>
<li><p>declare:       creates the component’s resources on the server.</p></li>
<li><p>add:           copy to the list of available configurations.</p></li>
<li><p>list:          list all the configurations available.</p></li>
<li><p>list plugins:  list all the plugins available.</p></li>
<li><p>list examples:  list all the examples available.</p></li>
<li><p>show           view an interpreted version of a configuration file.</p></li>
<li><p>edit:          modify an existing configuration.</p></li>
<li><p>remove:        remove a configuration.</p></li>
<li><p>disable:       mark a configuration as ineligible to run.</p></li>
<li><p>enable:        mark a configuration as eligible to run.</p></li>
<li><p>convert:       converts a v2 config to a v3 config.</p></li>
</ul>
</div></blockquote>
<p>For example:  <em>sr3 foreground subscribe/dd</em> runs the subscribe component with
the dd configuration as a single foreground instance.</p>
<p>The <strong>foreground</strong> action is used when building a configuration or for debugging.
The <strong>foreground</strong> instance will run regardless of other instances which are currently
running.  Should instances be running, it shares the same notification message queue with them.
A user stop the <strong>foreground</strong> instance by simply using &lt;ctrl-c&gt; on linux
or use other means to kill the process.</p>
<p>After a configuration has been refined, <em>start</em> to launch the component as a background
service (daemon or fleet of daemons whose number is controlled by the <em>instances</em> option.)
If multiple configurations and components need to be run together, the entire fleet
can be similarly controlled using the <a class="reference external" href="../Reference/sr3.1.html">sr3(1)</a> command.</p>
<p>To have components run all the time, on Linux one can use <a class="reference external" href="https://www.freedesktop.org/wiki/Software/systemd/">systemd</a> integration,
as described in the <a class="reference internal" href="../How2Guides/Admin.html"><span class="doc">Admin Guide</span></a> On Windows, one can configure a service,
as described in the <a class="reference external" href="../Tutorials/Windows.html">Windows user manual</a></p>
<p>The actions <strong>cleanup</strong>, <strong>declare</strong>, can be used to manage resources on
the rabbitmq server. The resources are either queues or exchanges. <strong>declare</strong> creates
the resources.</p>
<p>The <strong>add, remove, list, edit, enable &amp; disable</strong> actions are used to manage the list
of configurations.  One can see all of the configurations available using the <strong>list</strong>
action.   to view available plugins use <strong>list plugins</strong>.  Using the <strong>edit</strong> option,
one can work on a particular configuration.  A <em>disabled</em> configuration will not be
started or restarted by the <strong>start</strong>,
<strong>foreground</strong>, or <strong>restart</strong> actions. It can be used to set aside a configuration
temporarily.</p>
<p>The <strong>convert</strong> action is used to translate a configuration file written with Sarracenia version 2
options into Sarracenia version 3 options. The v2 configuration file must be placed in the
<em>~/.config/sarra/component/v2_config.conf</em> directory and the translated version will be placed in
the <em>~/.config/sr3/component/v3_config.conf</em> directory. For example, one would invoke this action
with <em>sr3 convert component/config</em>.</p>
<section id="actions">
<h3>ACTIONS<a class="headerlink" href="#actions" title="Link to this heading"></a></h3>
<section id="declare">
<h4>declare<a class="headerlink" href="#declare" title="Link to this heading"></a></h4>
<p>Call the corresponding function for each configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 declare
  declare: 2020-09-06 23:22:18,043 [INFO] root declare looking at cpost/pelle_dd1_f04
  2020-09-06 23:22:18,048 [INFO] sarra.moth.amqp __putSetup exchange declared: xcvan00 (as: amqp://tfeed@localhost/)
  2020-09-06 23:22:18,049 [INFO] sarra.moth.amqp __putSetup exchange declared: xcvan01 (as: amqp://tfeed@localhost/)
  2020-09-06 23:22:18,049 [INFO] root declare looking at cpost/veille_f34
  2020-09-06 23:22:18,053 [INFO] sarra.moth.amqp __putSetup exchange declared: xcpublic (as: amqp://tfeed@localhost/)
  2020-09-06 23:22:18,053 [INFO] root declare looking at cpost/pelle_dd2_f05
  ...
  2020-09-06 23:22:18,106 [INFO] root declare looking at cpost/pelle_dd2_f05
  2020-09-06 23:22:18,106 [INFO] root declare looking at cpump/xvan_f14
  2020-09-06 23:22:18,110 [INFO] sarra.moth.amqp __getSetup queue declared q_tfeed.sr_cpump.xvan_f14.23011811.49631644 (as: amqp://tfeed@localhost/)
  2020-09-06 23:22:18,110 [INFO] sarra.moth.amqp __getSetup um..: pfx: v03, exchange: xcvan00, values: #
  2020-09-06 23:22:18,110 [INFO] sarra.moth.amqp __getSetup binding q_tfeed.sr_cpump.xvan_f14.23011811.49631644 with v03.# to xcvan00 (as: amqp://tfeed@localhost/)
  2020-09-06 23:22:18,111 [INFO] root declare looking at cpump/xvan_f15
  2020-09-06 23:22:18,115 [INFO] sarra.moth.amqp __getSetup queue declared q_tfeed.sr_cpump.xvan_f15.50074940.98161482 (as: amqp://tfeed@localhost/)
</pre></div>
</div>
<p>Declares the queues and exchanges related to each configuration.
One can also invoke it with <em>--users</em>, so that it will declare users as well as exchanges and queues:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 --users declare
  ...
  2020-09-06 23:28:56,211 [INFO] sarra.rabbitmq_admin add_user permission user &#39;ender&#39; role source  configure=&#39;^q_ender.*|^xs_ender.*&#39; write=&#39;^q_ender.*|^xs_ender.*&#39; read=&#39;^q_ender.*|^x[lrs]_ender.*|^x.*public$&#39;
  ...
</pre></div>
</div>
<p>Providing a flow/flows will declare only the users that are specified in the flow(s):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 --users declare subscribe/dd_amis
  ...
  declare: 2024-05-17 20:02:18,548 434920 [INFO] sarracenia.rabbitmq_admin add_user permission user &#39;tfeed@localhost&#39; role feeder  configure=.* write=.* read=.*
  ...
</pre></div>
</div>
</section>
<section id="dump">
<h4>dump<a class="headerlink" href="#dump" title="Link to this heading"></a></h4>
<p>print the three data structure used by sr.  There are three lists:</p>
<ul class="simple">
<li><p>processes thought to be related to sr.</p></li>
<li><p>configurations present</p></li>
<li><p>contents of the state files.</p></li>
</ul>
<p><strong>dump</strong> is used for debugging or to get more detail than provided by status:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Running</span> <span class="n">Processes</span>
     <span class="mi">4238</span><span class="p">:</span> <span class="n">name</span><span class="p">:</span><span class="n">sr_poll</span><span class="o">.</span><span class="n">py</span> <span class="n">cmdline</span><span class="p">:[</span><span class="s1">&#39;/usr/bin/python3&#39;</span><span class="p">,</span> <span class="s1">&#39;/home/peter/src/sarracenia/sarra/sr_poll.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--no&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="s1">&#39;pulse&#39;</span><span class="p">]</span>
     <span class="o">.</span>
     <span class="o">.</span>
     <span class="o">.</span>
<span class="n">Configs</span>
   <span class="n">cpost</span>
       <span class="n">veille_f34</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;running&#39;</span><span class="p">,</span> <span class="s1">&#39;instances&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>

<span class="n">States</span>
   <span class="n">cpost</span>
       <span class="n">veille_f34</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;instance_pids&#39;</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">4251</span><span class="p">},</span> <span class="s1">&#39;queue_name&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;instances_expected&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;has_state&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;missing_instances&#39;</span><span class="p">:</span> <span class="p">[]}</span>

<span class="n">Missing</span>
</pre></div>
</div>
<p>It is quite long, and so a bit too much information to look at in a raw state.
Usually used in conjunction with linux filters, such as grep.
for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 dump  | grep stopped
  WMO_mesh_post : {&#39;status&#39;: &#39;stopped&#39;, &#39;instances&#39;: 0}
  shim_f63 : {&#39;status&#39;: &#39;stopped&#39;, &#39;instances&#39;: 0}
  test2_f61 : {&#39;status&#39;: &#39;stopped&#39;, &#39;instances&#39;: 0}

$ sr3 dump  | grep disabled
  amqp_f30.conf : {&#39;status&#39;: &#39;disabled&#39;, &#39;instances&#39;: 5}
</pre></div>
</div>
<p>provides easy method to determine which configurations are in a particular state.
Another example, if <em>sr3 status</em> reports sender/tsource2send_f50 as being partial, then
one can use dump to get more detail:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 dump | grep sender/tsource2send_f50
  49308: name:sr3_sender.py cmdline:[&#39;/usr/bin/python3&#39;, &#39;/usr/lib/python3/dist-packages/sarracenia/instance.py&#39;, &#39;--no&#39;, &#39;1&#39;, &#39;start&#39;, &#39;sender/tsource2send_f50&#39;]
  q_tsource.sr_sender.tsource2send_f50.58710892.12372870: [&#39;sender/tsource2send_f50&#39;]
</pre></div>
</div>
</section>
<section id="foreground">
<h4>foreground<a class="headerlink" href="#foreground" title="Link to this heading"></a></h4>
<p>run a single instance of a single configuration as an interactive process logging to the current stderr/terminal output.
for debugging.</p>
<p><strong>list</strong></p>
<p>shows the user the configuration files present:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 list
  User Configurations: (from: /home/peter/.config/sarra )
  cpost/pelle_dd1_f04.conf         cpost/pelle_dd2_f05.conf         cpost/veille_f34.conf
  cpump/xvan_f14.conf              cpump/xvan_f15.conf              poll/f62.conf
  post/shim_f63.conf               post/t_dd1_f00.conf              post/t_dd2_f00.conf
  post/test2_f61.conf              sarra/download_f20.conf          sender/tsource2send_f50.conf
  shovel/rabbitmqtt_f22.conf       subscribe/amqp_f30.conf          subscribe/cclean_f91.conf
  subscribe/cdnld_f21.conf         subscribe/cfile_f44.conf         subscribe/cp_f61.conf
  subscribe/ftp_f70.conf           subscribe/q_f71.conf             subscribe/rabbitmqtt_f31.conf
  subscribe/u_sftp_f60.conf        watch/f40.conf                   admin.conf
  credentials.conf                 default.conf
  logs are in: /home/peter/.cache/sarra/log
</pre></div>
</div>
<p>The last line says which directory the log files are in.</p>
<p>Also <em>list examples</em> shows included configuration templates available as starting points with the <em>add</em> action:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 list examples
  Sample Configurations: (from: /home/peter/Sarracenia/development/sarra/examples )
  cpump/cno_trouble_f00.inc        poll/aws-nexrad.conf             poll/pollingest.conf
  poll/pollnoaa.conf               poll/pollsoapshc.conf            poll/pollusgs.conf
  poll/pulse.conf                  post/WMO_mesh_post.conf          sarra/wmo_mesh.conf
  sender/ec2collab.conf            sender/pitcher_push.conf         shovel/no_trouble_f00.inc
  subscribe/WMO_Sketch_2mqtt.conf  subscribe/WMO_Sketch_2v3.conf    subscribe/WMO_mesh_CMC.conf
  subscribe/WMO_mesh_Peer.conf     subscribe/aws-nexrad.conf        subscribe/dd_2mqtt.conf
  subscribe/dd_all.conf            subscribe/dd_amis.conf           subscribe/dd_aqhi.conf
  subscribe/dd_cacn_bulletins.conf subscribe/dd_citypage.conf       subscribe/dd_cmml.conf
  subscribe/dd_gdps.conf           subscribe/dd_ping.conf           subscribe/dd_radar.conf
  subscribe/dd_rdps.conf           subscribe/dd_swob.conf           subscribe/ddc_cap-xml.conf
  subscribe/ddc_normal.conf        subscribe/downloademail.conf     subscribe/ec_ninjo-a.conf
  subscribe/hpfx_amis.conf         subscribe/local_sub.conf         subscribe/pitcher_pull.conf
  subscribe/sci2ec.conf            subscribe/subnoaa.conf           subscribe/subsoapshc.conf
  subscribe/subusgs.conf           watch/master.conf                watch/pitcher_client.conf
  watch/pitcher_server.conf        watch/sci2ec.conf


$ sr3 add dd_all.conf
  add: 2021-01-24 18:04:57,018 [INFO] sarracenia.sr add copying: /usr/lib/python3/dist-packages/sarracenia/examples/subscribe/dd_all.conf to /home/peter/.config/sr3/subscribe/dd_all.conf
$ sr3 edit dd_all.conf
</pre></div>
</div>
<p>The <strong>add, remove, list, edit, enable &amp; disable</strong> actions are used to manage the list
of configurations.  One can see all of the configurations available using the <strong>list</strong>
action.   to view available plugins use <strong>list plugins</strong>.  Using the <strong>edit</strong> option,
one can work on a particular configuration.  A <em>disabled</em> sets a configuration aside
(by adding <em>.off</em> to the name) so that it will not be started or restarted by
the <strong>start</strong>, <strong>foreground</strong>, or <strong>restart</strong> actions.</p>
</section>
<section id="show">
<h4>show<a class="headerlink" href="#show" title="Link to this heading"></a></h4>
<p>View all configuration settings (the result of all parsing… what the flow components actually see):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">sr3</span> <span class="n">show</span> <span class="n">subscribe</span><span class="o">/</span><span class="n">q_f71</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">20</span> <span class="mi">15</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">32</span><span class="p">,</span><span class="mi">507</span> <span class="mi">1084652</span> <span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">config</span> <span class="n">parse_file</span> <span class="n">download_f20</span><span class="o">.</span><span class="n">conf</span><span class="p">:</span><span class="mi">35</span> <span class="n">obsolete</span> <span class="n">v2</span><span class="p">:</span><span class="s2">&quot;on_message msg_log&quot;</span> <span class="n">converted</span> <span class="n">to</span> <span class="n">sr3</span><span class="p">:</span><span class="s2">&quot;logEvents after_accept&quot;</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">20</span> <span class="mi">15</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">32</span><span class="p">,</span><span class="mi">508</span> <span class="mi">1084652</span> <span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">config</span> <span class="n">parse_file</span> <span class="n">tsource2send_f50</span><span class="o">.</span><span class="n">conf</span><span class="p">:</span><span class="mi">26</span> <span class="n">obsolete</span> <span class="n">v2</span><span class="p">:</span><span class="s2">&quot;on_message msg_rawlog&quot;</span> <span class="n">converted</span> <span class="n">to</span> <span class="n">sr3</span><span class="p">:</span><span class="s2">&quot;logEvents after_accept&quot;</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">20</span> <span class="mi">15</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">32</span><span class="p">,</span><span class="mi">508</span> <span class="mi">1084652</span> <span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">config</span> <span class="n">parse_file</span> <span class="n">rabbitmqtt_f22</span><span class="o">.</span><span class="n">conf</span><span class="p">:</span><span class="mi">6</span> <span class="n">obsolete</span> <span class="n">v2</span><span class="p">:</span><span class="s2">&quot;on_message msg_log&quot;</span> <span class="n">converted</span> <span class="n">to</span> <span class="n">sr3</span><span class="p">:</span><span class="s2">&quot;logEvents after_accept&quot;</span>

<span class="n">Config</span> <span class="n">of</span> <span class="n">subscribe</span><span class="o">/</span><span class="n">q_f71</span><span class="p">:</span>
<span class="p">{</span><span class="s1">&#39;_Config__admin&#39;</span><span class="p">:</span> <span class="s1">&#39;amqp://bunnymaster@localhost/ None True True False False None None&#39;</span><span class="p">,</span>
 <span class="s1">&#39;_Config__broker&#39;</span><span class="p">:</span> <span class="s1">&#39;amqp://tsource@localhost/ None True True False False None None&#39;</span><span class="p">,</span>
 <span class="s1">&#39;_Config__post_broker&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;accelThreshold&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;acceptSizeWrong&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;acceptUnmatched&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;admin&#39;</span><span class="p">:</span> <span class="s1">&#39;amqp://bunnymaster@localhost/ None True True False False None None&#39;</span><span class="p">,</span>
 <span class="s1">&#39;attempts&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
 <span class="s1">&#39;auto_delete&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;baseDir&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;baseUrl_relPath&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;batch&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
 <span class="s1">&#39;bindings&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;xs_tsource_poll&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;v03&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;#&#39;</span><span class="p">])],</span>
 <span class="s1">&#39;broker&#39;</span><span class="p">:</span> <span class="s1">&#39;amqp://tsource@localhost/ None True True False False None None&#39;</span><span class="p">,</span>
 <span class="s1">&#39;bufsize&#39;</span><span class="p">:</span> <span class="mi">1048576</span><span class="p">,</span>
 <span class="s1">&#39;byteRateMax&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;cfg_run_dir&#39;</span><span class="p">:</span> <span class="s1">&#39;/home/peter/.cache/sr3/subscribe/q_f71&#39;</span><span class="p">,</span>
 <span class="s1">&#39;component&#39;</span><span class="p">:</span> <span class="s1">&#39;subscribe&#39;</span><span class="p">,</span>
 <span class="s1">&#39;config&#39;</span><span class="p">:</span> <span class="s1">&#39;q_f71&#39;</span><span class="p">,</span>
 <span class="s1">&#39;currentDir&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;debug&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;declared_exchanges&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;declared_users&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;anonymous&#39;</span><span class="p">:</span> <span class="s1">&#39;subscriber&#39;</span><span class="p">,</span> <span class="s1">&#39;eggmeister&#39;</span><span class="p">:</span> <span class="s1">&#39;subscriber&#39;</span><span class="p">,</span> <span class="s1">&#39;ender&#39;</span><span class="p">:</span> <span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="s1">&#39;tfeed&#39;</span><span class="p">:</span> <span class="s1">&#39;feeder&#39;</span><span class="p">,</span> <span class="s1">&#39;tsource&#39;</span><span class="p">:</span> <span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="s1">&#39;tsub&#39;</span><span class="p">:</span> <span class="s1">&#39;subscriber&#39;</span><span class="p">},</span>
 <span class="s1">&#39;delete&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;destfn_script&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;directory&#39;</span><span class="p">:</span> <span class="s1">&#39;//home/peter/sarra_devdocroot/recd_by_srpoll_test1&#39;</span><span class="p">,</span>
 <span class="s1">&#39;discard&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;documentRoot&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;download&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;durable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;env_declared&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;FLOWBROKER&#39;</span><span class="p">,</span> <span class="s1">&#39;MQP&#39;</span><span class="p">,</span> <span class="s1">&#39;SFTPUSER&#39;</span><span class="p">,</span> <span class="s1">&#39;TESTDOCROOT&#39;</span><span class="p">],</span>
 <span class="s1">&#39;exchange&#39;</span><span class="p">:</span> <span class="s1">&#39;xs_tsource_poll&#39;</span><span class="p">,</span>
 <span class="s1">&#39;exchangeDeclare&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;exchangeSuffix&#39;</span><span class="p">:</span> <span class="s1">&#39;poll&#39;</span><span class="p">,</span>
 <span class="s1">&#39;expire&#39;</span><span class="p">:</span> <span class="mf">1800.0</span><span class="p">,</span>
 <span class="s1">&#39;feeder&#39;</span><span class="p">:</span> <span class="n">ParseResult</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;amqp&#39;</span><span class="p">,</span> <span class="n">netloc</span><span class="o">=</span><span class="s1">&#39;tfeed@localhost&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">fragment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
 <span class="s1">&#39;fileEvents&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;link&#39;</span><span class="p">,</span> <span class="s1">&#39;modify&#39;</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">,</span> <span class="s1">&#39;mkdir&#39;</span><span class="p">,</span> <span class="s1">&#39;rmdir&#39;</span> <span class="p">},</span>
 <span class="s1">&#39;file_total_interval&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;filename&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;fixed_headers&#39;</span><span class="p">:</span> <span class="p">{},</span>
 <span class="s1">&#39;flatten&#39;</span><span class="p">:</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
 <span class="s1">&#39;hostdir&#39;</span><span class="p">:</span> <span class="s1">&#39;fractal&#39;</span><span class="p">,</span>
 <span class="s1">&#39;hostname&#39;</span><span class="p">:</span> <span class="s1">&#39;fractal&#39;</span><span class="p">,</span>
 <span class="s1">&#39;housekeeping&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
 <span class="s1">&#39;imports&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;inflight&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;inline&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;inlineByteMax&#39;</span><span class="p">:</span> <span class="mi">4096</span><span class="p">,</span>
 <span class="s1">&#39;inlineEncoding&#39;</span><span class="p">:</span> <span class="s1">&#39;guess&#39;</span><span class="p">,</span>
 <span class="s1">&#39;inlineOnly&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;instances&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
 <span class="s1">&#39;identity_arbitrary_value&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;identity_method&#39;</span><span class="p">:</span> <span class="s1">&#39;sha512&#39;</span><span class="p">,</span>
 <span class="s1">&#39;logEvents&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;after_work&#39;</span><span class="p">,</span> <span class="s1">&#39;after_accept&#39;</span><span class="p">,</span> <span class="s1">&#39;on_housekeeping&#39;</span><span class="p">},</span>
 <span class="s1">&#39;logFormat&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> [</span><span class="si">%(levelname)s</span><span class="s1">] </span><span class="si">%(name)s</span><span class="s1"> </span><span class="si">%(funcName)s</span><span class="s1"> </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,</span>
 <span class="s1">&#39;logLevel&#39;</span><span class="p">:</span> <span class="s1">&#39;info&#39;</span><span class="p">,</span>
 <span class="s1">&#39;logReject&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;logRotateCount&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
 <span class="s1">&#39;logRotateInterval&#39;</span><span class="p">:</span> <span class="mf">86400.0</span><span class="p">,</span>
 <span class="s1">&#39;logStdout&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;log_flowcb_needed&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;masks&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;accept .* into //home/peter/sarra_devdocroot/recd_by_srpoll_test1 with mirror:True strip:.*sent_by_tsource2send/&#39;</span><span class="p">],</span>
 <span class="s1">&#39;messageAgeMax&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;messageCountMax&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;messageDebugDump&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;messageRateMax&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;messageRateMin&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;message_strategy&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;failure_duration&#39;</span><span class="p">:</span> <span class="s1">&#39;5m&#39;</span><span class="p">,</span> <span class="s1">&#39;reset&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;stubborn&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
 <span class="s1">&#39;message_ttl&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;mirror&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;msg_total_interval&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;fileAgeMax&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;nodupe_ttl&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;permCopy&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;permDefault&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;permDirDefault&#39;</span><span class="p">:</span> <span class="mi">509</span><span class="p">,</span>
 <span class="s1">&#39;permLog&#39;</span><span class="p">:</span> <span class="mi">384</span><span class="p">,</span>
 <span class="s1">&#39;plugins_early&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;plugins_late&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;sarracenia.flowcb.log.Log&#39;</span><span class="p">],</span>
 <span class="s1">&#39;post_baseDir&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;post_baseUrl&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;post_broker&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;post_documentRoot&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;post_exchanges&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;post_topicPrefix&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;v03&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">],</span>
 <span class="s1">&#39;prefetch&#39;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
 <span class="s1">&#39;pstrip&#39;</span><span class="p">:</span> <span class="s1">&#39;.*sent_by_tsource2send/&#39;</span><span class="p">,</span>
 <span class="s1">&#39;queueBind&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;queueDeclare&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;queueName&#39;</span><span class="p">:</span> <span class="s1">&#39;q_tsource_subscribe.q_f71.76359618.62916076&#39;</span><span class="p">,</span>
 <span class="s1">&#39;queue_filename&#39;</span><span class="p">:</span> <span class="s1">&#39;/home/peter/.cache/sr3/subscribe/q_f71/subscribe.q_f71.tsource.qname&#39;</span><span class="p">,</span>
 <span class="s1">&#39;randid&#39;</span><span class="p">:</span> <span class="s1">&#39;cedf&#39;</span><span class="p">,</span>
 <span class="s1">&#39;randomize&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;realpathPost&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;rename&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;report&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;reset&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;resolved_qname&#39;</span><span class="p">:</span> <span class="s1">&#39;q_tsource_subscribe.q_f71.76359618.62916076&#39;</span><span class="p">,</span>
 <span class="s1">&#39;retry_ttl&#39;</span><span class="p">:</span> <span class="mf">1800.0</span><span class="p">,</span>
 <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{},</span>
 <span class="s1">&#39;sleep&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
 <span class="s1">&#39;statehost&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;strip&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;subtopic&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;timeCopy&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
 <span class="s1">&#39;timezone&#39;</span><span class="p">:</span> <span class="s1">&#39;UTC&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tls_rigour&#39;</span><span class="p">:</span> <span class="s1">&#39;normal&#39;</span><span class="p">,</span>
 <span class="s1">&#39;topicPrefix&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;v03&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">],</span>
 <span class="s1">&#39;undeclared&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;msg_total_interval&#39;</span><span class="p">,</span> <span class="s1">&#39;file_total_interval&#39;</span><span class="p">],</span>
 <span class="s1">&#39;users&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;v2plugin_options&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;v2plugins&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;plugin&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;msg_total_save&#39;</span><span class="p">,</span> <span class="s1">&#39;file_total_save&#39;</span><span class="p">]},</span>
 <span class="s1">&#39;vhost&#39;</span><span class="p">:</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
 <span class="s1">&#39;vip&#39;</span><span class="p">:</span> <span class="p">[]}</span>

<span class="o">%</span>
</pre></div>
</div>
</section>
<section id="convert">
<h4>convert<a class="headerlink" href="#convert" title="Link to this heading"></a></h4>
<p>Converting a config: both formats are accepted, as well as include files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 convert poll/sftp_f62
  2022-06-14 15:00:00,762 1093345 [INFO] root convert converting poll/sftp_f62 from v2 to v3

$ sr3 convert poll/sftp_f62.conf
  2022-06-14 15:01:11,766 1093467 [INFO] root convert converting poll/sftp_f62.conf from v2 to v3

$ sr3 convert shovel/no_trouble_f00.inc
  2022-06-14 15:03:29,918 1093655 [INFO] root convert converting shovel/no_trouble_f00.inc from v2 to v3
</pre></div>
</div>
</section>
<section id="start">
<h4>start<a class="headerlink" href="#start" title="Link to this heading"></a></h4>
<p>launch all configured components:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 start
  gathering global state: procs, configs, state files, logs, analysis - Done.
  starting...Done
</pre></div>
</div>
</section>
<section id="stop">
<h4>stop<a class="headerlink" href="#stop" title="Link to this heading"></a></h4>
<p>stop all processes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 stop
  gathering global state: procs, configs, state files, logs, analysis - Done.
  stopping........Done
  Waiting 1 sec. to check if 93 processes stopped (try: 0)
  All stopped after try 0
</pre></div>
</div>
</section>
<section id="status">
<h4>status<a class="headerlink" href="#status" title="Link to this heading"></a></h4>
<p>Sample OK status (sr is running):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fractal</span><span class="o">%</span> <span class="n">sr3</span> <span class="n">status</span>
<span class="n">status</span><span class="p">:</span>
<span class="n">Component</span><span class="o">/</span><span class="n">Config</span>                         <span class="n">Processes</span>   <span class="n">Connection</span>        <span class="n">Lag</span>                              <span class="n">Rates</span>
                                         <span class="n">State</span>   <span class="n">Run</span> <span class="n">Retry</span>  <span class="n">msg</span> <span class="n">data</span>   <span class="n">Queued</span>  <span class="n">LagMax</span> <span class="n">LagAvg</span>  <span class="n">Last</span>  <span class="o">%</span><span class="n">rej</span>     <span class="n">pubsub</span> <span class="n">messages</span>   <span class="n">RxData</span>     <span class="n">TxData</span>
                                         <span class="o">-----</span>   <span class="o">---</span> <span class="o">-----</span>  <span class="o">---</span> <span class="o">----</span>   <span class="o">------</span>  <span class="o">------</span> <span class="o">------</span>  <span class="o">----</span>  <span class="o">----</span>     <span class="o">------</span> <span class="o">--------</span>   <span class="o">------</span>     <span class="o">------</span>
<span class="n">cpost</span><span class="o">/</span><span class="n">veille_f34</span>                         <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mf">0.0</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">cpump</span><span class="o">/</span><span class="n">pelle_dd1_f04</span>                      <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>   <span class="mf">31.3</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mi">4</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">cpump</span><span class="o">/</span><span class="n">pelle_dd2_f05</span>                      <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>   <span class="mf">31.3</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mi">4</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">cpump</span><span class="o">/</span><span class="n">xvan_f14</span>                           <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mf">0.0</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">cpump</span><span class="o">/</span><span class="n">xvan_f15</span>                           <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mf">0.0</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">poll</span><span class="o">/</span><span class="n">f62</span>                                 <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.08</span><span class="n">s</span>    <span class="mf">0.04</span><span class="n">s</span>  <span class="mf">1.4</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">2.0</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">post</span><span class="o">/</span><span class="n">shim_f63</span>                            <span class="n">stop</span>    <span class="mi">0</span><span class="o">/</span><span class="mi">0</span>          <span class="o">-</span>          <span class="o">-</span>         <span class="o">-</span>     <span class="o">-</span>     <span class="o">-</span>          <span class="o">-</span>        <span class="o">-</span>
<span class="n">post</span><span class="o">/</span><span class="n">test2_f61</span>                           <span class="n">stop</span>    <span class="mi">0</span><span class="o">/</span><span class="mi">0</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.02</span><span class="n">s</span>    <span class="mf">0.01</span><span class="n">s</span>  <span class="mf">0.4</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">8.1</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">sarra</span><span class="o">/</span><span class="n">download_f20</span>                       <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">10</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">13.17</span><span class="n">s</span>    <span class="mf">5.63</span><span class="n">s</span>  <span class="mf">1.8</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">5.4</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">4</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.7</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">sender</span><span class="o">/</span><span class="n">tsource2send_f50</span>                  <span class="n">run</span>   <span class="mi">10</span><span class="o">/</span><span class="mi">10</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">9</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">1.37</span><span class="n">s</span>    <span class="mf">1.08</span><span class="n">s</span>  <span class="mf">1.9</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">8.1</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">5</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.7</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">pclean_f90</span>                        <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>   <span class="mi">136</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span>  <span class="mf">0.6</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">4.0</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">5</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">pclean_f92</span>                        <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mf">0.0</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">rabbitmqtt_f22</span>                    <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.89</span><span class="n">s</span>    <span class="mf">0.67</span><span class="n">s</span>  <span class="mf">1.5</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">8.1</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">5</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">t_dd1_f00</span>                         <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mi">124</span>   <span class="mf">23.15</span><span class="n">s</span>    <span class="mf">4.50</span><span class="n">s</span>  <span class="mf">0.1</span><span class="n">s</span> <span class="mf">55.0</span><span class="o">%</span>  <span class="mf">3.9</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">9</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">t_dd2_f00</span>                         <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>     <span class="mi">83</span>   <span class="mf">11.82</span><span class="n">s</span>    <span class="mf">3.50</span><span class="n">s</span>  <span class="mf">0.1</span><span class="n">s</span> <span class="mf">49.2</span><span class="o">%</span>  <span class="mf">3.6</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">8</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">amqp_f30</span>                       <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">12</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">18.79</span><span class="n">s</span>    <span class="mf">9.22</span><span class="n">s</span>  <span class="mf">0.1</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">3.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">4</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.9</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">cclean_f91</span>                     <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>   <span class="mi">145</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">1</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span>  <span class="mf">0.4</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">2.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">6</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">cdnld_f21</span>                      <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">17</span><span class="o">%</span>     <span class="mi">12</span>    <span class="mf">7.20</span><span class="n">s</span>    <span class="mf">2.81</span><span class="n">s</span>  <span class="mf">0.7</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">2.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.7</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">cfile_f44</span>                      <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">6</span><span class="o">%</span>      <span class="mi">1</span>    <span class="mf">3.32</span><span class="n">s</span>    <span class="mf">0.32</span><span class="n">s</span>  <span class="mf">0.4</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">2.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">6</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.7</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">cp_f61</span>                         <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">3</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">6.42</span><span class="n">s</span>    <span class="mf">3.49</span><span class="n">s</span>  <span class="mf">1.6</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">4.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">6</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="mi">635</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">ftp_f70</span>                        <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">8</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">1.18</span><span class="n">s</span>    <span class="mf">0.83</span><span class="n">s</span>  <span class="mf">0.2</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.8</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.8</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">q_f71</span>                          <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">1.62</span><span class="n">s</span>    <span class="mf">0.57</span><span class="n">s</span>  <span class="mf">0.0</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">rabbitmqtt_f31</span>                 <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">11</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">4.27</span><span class="n">s</span>    <span class="mf">1.95</span><span class="n">s</span>  <span class="mf">1.2</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">4.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">6</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="mi">637</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">u_sftp_f60</span>                     <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">1</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">2.69</span><span class="n">s</span>    <span class="mf">2.23</span><span class="n">s</span>  <span class="mf">1.3</span><span class="n">s</span>  <span class="mf">0.7</span><span class="o">%</span>  <span class="mf">4.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">6</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="mi">644</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">watch</span><span class="o">/</span><span class="n">f40</span>                                <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.10</span><span class="n">s</span>    <span class="mf">0.05</span><span class="n">s</span>  <span class="mf">1.9</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">4.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">winnow</span><span class="o">/</span><span class="n">t00_f10</span>                           <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">12.31</span><span class="n">s</span>    <span class="mf">4.33</span><span class="n">s</span>  <span class="mf">3.5</span><span class="n">s</span> <span class="mf">50.0</span><span class="o">%</span>  <span class="mf">3.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">winnow</span><span class="o">/</span><span class="n">t01_f10</span>                           <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">11.59</span><span class="n">s</span>    <span class="mf">3.76</span><span class="n">s</span>  <span class="mf">0.1</span><span class="n">s</span> <span class="mf">50.5</span><span class="o">%</span>  <span class="mf">4.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">4</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
      <span class="n">Total</span> <span class="n">Running</span> <span class="n">Configs</span><span class="p">:</span>  <span class="mi">25</span> <span class="p">(</span> <span class="n">Processes</span><span class="p">:</span> <span class="mi">64</span> <span class="n">missing</span><span class="p">:</span> <span class="mi">0</span> <span class="n">stray</span><span class="p">:</span> <span class="mi">0</span> <span class="p">)</span>
                     <span class="n">Memory</span><span class="p">:</span> <span class="n">uss</span><span class="p">:</span><span class="mf">2.4</span> <span class="n">GiB</span> <span class="n">rss</span><span class="p">:</span><span class="mf">3.3</span> <span class="n">GiB</span> <span class="n">vms</span><span class="p">:</span><span class="mf">6.2</span> <span class="n">GiB</span>
                   <span class="n">CPU</span> <span class="n">Time</span><span class="p">:</span> <span class="n">User</span><span class="p">:</span><span class="mf">39.62</span><span class="n">s</span> <span class="n">System</span><span class="p">:</span><span class="mf">4.42</span><span class="n">s</span>
       <span class="n">Pub</span><span class="o">/</span><span class="n">Sub</span> <span class="n">Received</span><span class="p">:</span> <span class="mi">103</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="p">(</span><span class="mf">80.6</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="p">),</span> <span class="n">Sent</span><span class="p">:</span>  <span class="mi">63</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="p">(</span><span class="mf">32.8</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="p">)</span> <span class="n">Queued</span><span class="p">:</span> <span class="mi">221</span> <span class="n">Retry</span><span class="p">:</span> <span class="mi">281</span><span class="p">,</span> <span class="n">Mean</span> <span class="n">lag</span><span class="p">:</span> <span class="mf">2.32</span><span class="n">s</span>
          <span class="n">Data</span> <span class="n">Received</span><span class="p">:</span> <span class="mi">32</span> <span class="n">Files</span><span class="o">/</span><span class="n">s</span> <span class="p">(</span><span class="mf">11.9</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="p">),</span> <span class="n">Sent</span><span class="p">:</span> <span class="mi">5</span> <span class="n">Files</span><span class="o">/</span><span class="n">s</span> <span class="p">(</span><span class="mf">1.7</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p>Full sample:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fractal</span><span class="o">%</span> <span class="n">sr3</span> <span class="o">--</span><span class="n">full</span> <span class="n">status</span>
<span class="n">status</span><span class="p">:</span>
<span class="n">Component</span><span class="o">/</span><span class="n">Config</span>                         <span class="n">Processes</span>   <span class="n">Connection</span>        <span class="n">Lag</span>                              <span class="n">Rates</span>                                        <span class="n">Counters</span> <span class="p">(</span><span class="n">per</span> <span class="n">housekeeping</span><span class="p">)</span>                                                    <span class="n">Data</span> <span class="n">Counters</span>                                           <span class="n">Memory</span>                             <span class="n">CPU</span> <span class="n">Time</span>
                                         <span class="n">State</span>   <span class="n">Run</span> <span class="n">Retry</span>  <span class="n">msg</span> <span class="n">data</span>   <span class="n">Queued</span>  <span class="n">LagMax</span> <span class="n">LagAvg</span>  <span class="n">Last</span>  <span class="o">%</span><span class="n">rej</span>     <span class="n">pubsub</span> <span class="n">messages</span>   <span class="n">RxData</span>     <span class="n">TxData</span>       <span class="n">subBytes</span>   <span class="n">Accepted</span>   <span class="n">Rejected</span>  <span class="n">Malformed</span>   <span class="n">pubBytes</span>    <span class="n">pubMsgs</span>     <span class="n">pubMal</span>     <span class="n">rxData</span>    <span class="n">rxFiles</span>     <span class="n">txData</span>    <span class="n">txFiles</span>    <span class="n">Since</span>       <span class="n">uss</span>        <span class="n">rss</span>        <span class="n">vms</span>       <span class="n">user</span>     <span class="n">system</span>
                                         <span class="o">-----</span>   <span class="o">---</span> <span class="o">-----</span>  <span class="o">---</span> <span class="o">----</span>   <span class="o">------</span>  <span class="o">------</span> <span class="o">------</span>  <span class="o">----</span>  <span class="o">----</span>     <span class="o">------</span> <span class="o">--------</span>   <span class="o">------</span>     <span class="o">------</span>        <span class="o">-------</span>   <span class="o">--------</span>   <span class="o">--------</span>  <span class="o">---------</span>    <span class="o">-------</span>     <span class="o">------</span>      <span class="o">-----</span>      <span class="o">-----</span>    <span class="o">-------</span>     <span class="o">------</span>  <span class="o">-------</span>      <span class="o">-----</span>        <span class="o">---</span>        <span class="o">---</span>        <span class="o">---</span>       <span class="o">----</span>     <span class="o">------</span>
<span class="n">cpost</span><span class="o">/</span><span class="n">veille_f34</span>                         <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mf">0.0</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">121.40</span><span class="n">s</span>    <span class="mf">2.4</span> <span class="n">MiB</span>    <span class="mf">5.9</span> <span class="n">MiB</span>   <span class="mf">15.2</span> <span class="n">MiB</span>        <span class="mf">0.03</span>       <span class="mf">0.08</span>
<span class="n">cpump</span><span class="o">/</span><span class="n">pelle_dd1_f04</span>                      <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>   <span class="mf">83.5</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">11</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mf">1.4</span> <span class="n">Kim</span>    <span class="mf">1.1</span> <span class="n">Kim</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>   <span class="mi">230</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">121.40</span><span class="n">s</span>    <span class="mf">3.9</span> <span class="n">MiB</span>    <span class="mf">6.8</span> <span class="n">MiB</span>   <span class="mf">17.2</span> <span class="n">MiB</span>        <span class="mf">0.12</span>       <span class="mf">0.11</span>
<span class="n">cpump</span><span class="o">/</span><span class="n">pelle_dd2_f05</span>                      <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>   <span class="mf">83.5</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">11</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mf">1.4</span> <span class="n">Kim</span>    <span class="mf">1.1</span> <span class="n">Kim</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>   <span class="mi">230</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">121.40</span><span class="n">s</span>    <span class="mf">3.9</span> <span class="n">MiB</span>    <span class="mf">7.0</span> <span class="n">MiB</span>   <span class="mf">17.2</span> <span class="n">MiB</span>        <span class="mf">0.17</span>       <span class="mf">0.06</span>
<span class="n">cpump</span><span class="o">/</span><span class="n">xvan_f14</span>                           <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mf">0.0</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>   <span class="mf">12.90</span><span class="n">s</span>    <span class="mf">3.0</span> <span class="n">MiB</span>    <span class="mf">4.7</span> <span class="n">MiB</span>   <span class="mf">16.1</span> <span class="n">MiB</span>        <span class="mf">0.01</span>       <span class="mf">0.01</span>
<span class="n">cpump</span><span class="o">/</span><span class="n">xvan_f15</span>                           <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mf">0.0</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>    <span class="mi">0</span> <span class="n">Bytes</span>      <span class="mi">1</span> <span class="n">msg</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mf">8.63</span><span class="n">s</span>    <span class="mf">3.0</span> <span class="n">MiB</span>    <span class="mf">4.6</span> <span class="n">MiB</span>   <span class="mf">16.1</span> <span class="n">MiB</span>        <span class="mf">0.01</span>       <span class="mf">0.02</span>
<span class="n">poll</span><span class="o">/</span><span class="n">f62</span>                                 <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.16</span><span class="n">s</span>    <span class="mf">0.05</span><span class="n">s</span>  <span class="mf">0.8</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mf">4.4</span> <span class="n">Kim</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">151.1</span> <span class="n">KiB</span>   <span class="mi">420</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.56</span><span class="n">s</span>   <span class="mf">45.1</span> <span class="n">MiB</span>   <span class="mf">59.0</span> <span class="n">MiB</span>  <span class="mf">229.3</span> <span class="n">MiB</span>        <span class="mf">2.62</span>       <span class="mf">0.32</span>
<span class="n">post</span><span class="o">/</span><span class="n">shim_f63</span>                            <span class="n">stop</span>    <span class="mi">0</span><span class="o">/</span><span class="mi">0</span>          <span class="o">-</span>          <span class="o">-</span>         <span class="o">-</span>     <span class="o">-</span>     <span class="o">-</span>          <span class="o">-</span>        <span class="o">-</span>        <span class="o">-</span>       <span class="o">-</span>          <span class="o">-</span>          <span class="o">-</span>          <span class="o">-</span>          <span class="o">-</span>          <span class="o">-</span>          <span class="o">-</span>          <span class="o">-</span>          <span class="o">-</span>          <span class="o">-</span>          <span class="o">-</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Bytes</span>        <span class="mf">0.00</span>       <span class="mf">0.00</span>
<span class="n">post</span><span class="o">/</span><span class="n">test2_f61</span>                           <span class="n">stop</span>    <span class="mi">0</span><span class="o">/</span><span class="mi">0</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.03</span><span class="n">s</span>    <span class="mf">0.02</span><span class="n">s</span>  <span class="mf">0.5</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span> <span class="mf">11.5</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mf">6.7</span> <span class="n">KiB</span>    <span class="mi">14</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mf">0.58</span><span class="n">s</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Bytes</span>        <span class="mf">0.00</span>       <span class="mf">0.00</span>
<span class="n">sarra</span><span class="o">/</span><span class="n">download_f20</span>                       <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">10.17</span><span class="n">s</span>    <span class="mf">2.87</span><span class="n">s</span>  <span class="mf">1.1</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.1</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.1</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mf">27.1</span> <span class="n">KiB</span>    <span class="mi">47</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>   <span class="mf">36.0</span> <span class="n">KiB</span>    <span class="mi">47</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>   <span class="mf">65.6</span> <span class="n">KiB</span>   <span class="mi">47</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>   <span class="mf">57.57</span><span class="n">s</span>  <span class="mf">132.5</span> <span class="n">MiB</span>  <span class="mf">192.4</span> <span class="n">MiB</span>  <span class="mf">280.1</span> <span class="n">MiB</span>        <span class="mf">2.72</span>       <span class="mf">0.40</span>
<span class="n">sender</span><span class="o">/</span><span class="n">tsource2send_f50</span>                  <span class="n">run</span>   <span class="mi">10</span><span class="o">/</span><span class="mi">10</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">9</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">1.37</span><span class="n">s</span>    <span class="mf">0.52</span><span class="n">s</span>  <span class="mf">1.3</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">5.5</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mf">326.0</span> <span class="n">KiB</span>   <span class="mi">421</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">326.6</span> <span class="n">KiB</span>   <span class="mi">421</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">152.7</span> <span class="n">KiB</span>  <span class="mi">421</span> <span class="n">Files</span>  <span class="mf">118.97</span><span class="n">s</span>  <span class="mf">425.6</span> <span class="n">MiB</span>  <span class="mf">562.8</span> <span class="n">MiB</span>    <span class="mf">2.2</span> <span class="n">GiB</span>        <span class="mf">7.80</span>       <span class="mf">0.93</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">pclean_f90</span>                        <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>   <span class="mi">310</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">82.03</span><span class="n">s</span>   <span class="mf">75.72</span><span class="n">s</span>  <span class="mf">0.7</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">5.6</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">111.4</span> <span class="n">KiB</span>   <span class="mi">120</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>   <span class="mf">99.9</span> <span class="n">KiB</span>   <span class="mi">111</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>   <span class="mf">38.02</span><span class="n">s</span>  <span class="mf">127.4</span> <span class="n">MiB</span>  <span class="mf">169.0</span> <span class="n">MiB</span>  <span class="mf">249.6</span> <span class="n">MiB</span>        <span class="mf">2.37</span>       <span class="mf">0.27</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">pclean_f92</span>                        <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">82.49</span><span class="n">s</span>   <span class="mf">76.06</span><span class="n">s</span> <span class="mf">19.1</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.7</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mf">99.9</span> <span class="n">KiB</span>   <span class="mi">111</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">103.0</span> <span class="n">KiB</span>   <span class="mi">111</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.28</span><span class="n">s</span>  <span class="mf">126.4</span> <span class="n">MiB</span>  <span class="mf">168.5</span> <span class="n">MiB</span>  <span class="mf">249.2</span> <span class="n">MiB</span>        <span class="mf">2.04</span>       <span class="mf">0.21</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">rabbitmqtt_f22</span>                    <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">1.25</span><span class="n">s</span>    <span class="mf">0.54</span><span class="n">s</span>  <span class="mf">1.3</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">5.5</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">326.0</span> <span class="n">KiB</span>   <span class="mi">421</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">326.0</span> <span class="n">KiB</span>   <span class="mi">421</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.77</span><span class="n">s</span>  <span class="mf">126.0</span> <span class="n">MiB</span>  <span class="mf">167.6</span> <span class="n">MiB</span>  <span class="mf">248.7</span> <span class="n">MiB</span>        <span class="mf">2.12</span>       <span class="mf">0.20</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">t_dd1_f00</span>                         <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">3</span>   <span class="mf">23.15</span><span class="n">s</span>    <span class="mf">3.06</span><span class="n">s</span>  <span class="mf">0.1</span><span class="n">s</span> <span class="mf">82.3</span><span class="o">%</span>  <span class="mf">3.4</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">14</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">231.6</span> <span class="n">KiB</span>    <span class="mf">1.6</span> <span class="n">Kim</span>    <span class="mf">1.3</span> <span class="n">Kim</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">168.4</span> <span class="n">KiB</span>   <span class="mi">293</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.19</span><span class="n">s</span>  <span class="mf">127.3</span> <span class="n">MiB</span>  <span class="mf">171.0</span> <span class="n">MiB</span>  <span class="mf">250.1</span> <span class="n">MiB</span>        <span class="mf">2.77</span>       <span class="mf">0.32</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">t_dd2_f00</span>                         <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">11.82</span><span class="n">s</span>    <span class="mf">2.61</span><span class="n">s</span>  <span class="mf">0.2</span><span class="n">s</span> <span class="mf">82.2</span><span class="o">%</span>  <span class="mf">3.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">13</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">225.7</span> <span class="n">KiB</span>    <span class="mf">1.6</span> <span class="n">Kim</span>    <span class="mf">1.3</span> <span class="n">Kim</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">166.6</span> <span class="n">KiB</span>   <span class="mi">290</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.33</span><span class="n">s</span>  <span class="mf">127.3</span> <span class="n">MiB</span>  <span class="mf">170.6</span> <span class="n">MiB</span>  <span class="mf">250.1</span> <span class="n">MiB</span>        <span class="mf">2.74</span>       <span class="mf">0.39</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">amqp_f30</span>                       <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">39</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">18.79</span><span class="n">s</span>    <span class="mf">6.44</span><span class="n">s</span>  <span class="mf">0.7</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.5</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">2</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">181.0</span> <span class="n">KiB</span>   <span class="mi">237</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">146.8</span> <span class="n">KiB</span>  <span class="mi">237</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">117.95</span><span class="n">s</span>  <span class="mf">126.2</span> <span class="n">MiB</span>  <span class="mf">168.0</span> <span class="n">MiB</span>  <span class="mf">248.9</span> <span class="n">MiB</span>        <span class="mf">2.20</span>       <span class="mf">0.27</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">cclean_f91</span>                     <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>   <span class="mi">213</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span>  <span class="mf">0.5</span><span class="n">s</span> <span class="mf">17.4</span><span class="o">%</span>  <span class="mf">2.7</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">6</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mf">35.5</span> <span class="n">KiB</span>    <span class="mi">92</span> <span class="n">msgs</span>    <span class="mi">16</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>   <span class="mf">13.37</span><span class="n">s</span>  <span class="mf">126.1</span> <span class="n">MiB</span>  <span class="mf">167.9</span> <span class="n">MiB</span>  <span class="mf">248.8</span> <span class="n">MiB</span>        <span class="mf">2.53</span>       <span class="mf">0.36</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">cdnld_f21</span>                      <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">41</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">10.43</span><span class="n">s</span>    <span class="mf">3.13</span><span class="n">s</span>  <span class="mf">0.1</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.4</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">2</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.4</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">167.1</span> <span class="n">KiB</span>   <span class="mi">262</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">162.7</span> <span class="n">KiB</span>  <span class="mi">262</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">117.90</span><span class="n">s</span>  <span class="mf">131.6</span> <span class="n">MiB</span>  <span class="mf">190.7</span> <span class="n">MiB</span>  <span class="mf">277.6</span> <span class="n">MiB</span>        <span class="mf">3.39</span>       <span class="mf">0.42</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">cfile_f44</span>                      <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">40</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">3.32</span><span class="n">s</span>    <span class="mf">0.30</span><span class="n">s</span>  <span class="mf">0.0</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.5</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">4</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.4</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">178.3</span> <span class="n">KiB</span>   <span class="mi">509</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">161.8</span> <span class="n">KiB</span>  <span class="mi">509</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.09</span><span class="n">s</span>  <span class="mf">130.9</span> <span class="n">MiB</span>  <span class="mf">188.5</span> <span class="n">MiB</span>  <span class="mf">278.0</span> <span class="n">MiB</span>        <span class="mf">2.62</span>       <span class="mf">0.30</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">cp_f61</span>                         <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">12</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">6.42</span><span class="n">s</span>    <span class="mf">2.09</span><span class="n">s</span>  <span class="mf">0.1</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">2.8</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="mi">597</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">326.6</span> <span class="n">KiB</span>   <span class="mi">421</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>   <span class="mf">69.0</span> <span class="n">KiB</span>  <span class="mi">123</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.23</span><span class="n">s</span>  <span class="mf">125.9</span> <span class="n">MiB</span>  <span class="mf">166.8</span> <span class="n">MiB</span>  <span class="mf">248.9</span> <span class="n">MiB</span>        <span class="mf">2.48</span>       <span class="mf">0.31</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">ftp_f70</span>                        <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">39</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">1.75</span><span class="n">s</span>    <span class="mf">0.77</span><span class="n">s</span>  <span class="mf">0.1</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">2</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.4</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">158.4</span> <span class="n">KiB</span>   <span class="mi">340</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">159.8</span> <span class="n">KiB</span>  <span class="mi">340</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.04</span><span class="n">s</span>  <span class="mf">126.1</span> <span class="n">MiB</span>  <span class="mf">167.4</span> <span class="n">MiB</span>  <span class="mf">248.8</span> <span class="n">MiB</span>        <span class="mf">2.22</span>       <span class="mf">0.36</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">q_f71</span>                          <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">31</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">3.12</span><span class="n">s</span>    <span class="mf">1.18</span><span class="n">s</span>  <span class="mf">5.7</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.1</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">142.7</span> <span class="n">KiB</span>   <span class="mi">396</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">124.6</span> <span class="n">KiB</span>  <span class="mi">396</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.49</span><span class="n">s</span>  <span class="mf">135.0</span> <span class="n">MiB</span>  <span class="mf">191.9</span> <span class="n">MiB</span>  <span class="mf">928.8</span> <span class="n">MiB</span>        <span class="mf">4.30</span>       <span class="mf">0.68</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">rabbitmqtt_f31</span>                 <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">8</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">4.27</span><span class="n">s</span>    <span class="mf">1.10</span><span class="n">s</span>  <span class="mf">1.1</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">2.8</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="mi">598</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">326.0</span> <span class="n">KiB</span>   <span class="mi">421</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>   <span class="mf">69.0</span> <span class="n">KiB</span>  <span class="mi">123</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.15</span><span class="n">s</span>  <span class="mf">126.2</span> <span class="n">MiB</span>  <span class="mf">167.9</span> <span class="n">MiB</span>  <span class="mf">248.9</span> <span class="n">MiB</span>        <span class="mf">2.22</span>       <span class="mf">0.27</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">u_sftp_f60</span>                     <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">9</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">2.69</span><span class="n">s</span>    <span class="mf">1.71</span><span class="n">s</span>  <span class="mf">1.2</span><span class="n">s</span>  <span class="mf">0.2</span><span class="o">%</span>  <span class="mf">2.8</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="mi">599</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">326.6</span> <span class="n">KiB</span>   <span class="mi">421</span> <span class="n">msgs</span>      <span class="mi">1</span> <span class="n">msg</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>   <span class="mf">69.0</span> <span class="n">KiB</span>  <span class="mi">122</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">117.93</span><span class="n">s</span>  <span class="mf">126.4</span> <span class="n">MiB</span>  <span class="mf">167.8</span> <span class="n">MiB</span>  <span class="mf">249.2</span> <span class="n">MiB</span>        <span class="mf">2.05</span>       <span class="mf">0.33</span>
<span class="n">watch</span><span class="o">/</span><span class="n">f40</span>                                <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.06</span><span class="n">s</span>    <span class="mf">0.02</span><span class="n">s</span>  <span class="mf">1.6</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">3.0</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">74</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">169.5</span> <span class="n">KiB</span>   <span class="mi">203</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>   <span class="mf">57.21</span><span class="n">s</span>   <span class="mf">46.3</span> <span class="n">MiB</span>   <span class="mf">65.3</span> <span class="n">MiB</span>  <span class="mf">311.8</span> <span class="n">MiB</span>        <span class="mf">1.95</span>       <span class="mf">0.14</span>
<span class="n">winnow</span><span class="o">/</span><span class="n">t00_f10</span>                           <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">6.38</span><span class="n">s</span>    <span class="mf">3.47</span><span class="n">s</span>  <span class="mf">0.2</span><span class="n">s</span> <span class="mf">51.7</span><span class="o">%</span>  <span class="mf">1.7</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">2</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mf">66.8</span> <span class="n">KiB</span>   <span class="mi">116</span> <span class="n">msgs</span>    <span class="mi">60</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>   <span class="mf">32.3</span> <span class="n">KiB</span>    <span class="mi">56</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>   <span class="mf">57.79</span><span class="n">s</span>   <span class="mf">42.5</span> <span class="n">MiB</span>   <span class="mf">56.2</span> <span class="n">MiB</span>   <span class="mf">83.3</span> <span class="n">MiB</span>        <span class="mf">0.77</span>       <span class="mf">0.12</span>
<span class="n">winnow</span><span class="o">/</span><span class="n">t01_f10</span>                           <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">9.75</span><span class="n">s</span>    <span class="mf">2.53</span><span class="n">s</span>  <span class="mf">0.1</span><span class="n">s</span> <span class="mf">51.3</span><span class="o">%</span>  <span class="mf">1.8</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">2</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mf">67.2</span> <span class="n">KiB</span>   <span class="mi">117</span> <span class="n">msgs</span>    <span class="mi">60</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>   <span class="mf">32.8</span> <span class="n">KiB</span>    <span class="mi">57</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>   <span class="mf">56.37</span><span class="n">s</span>   <span class="mf">42.3</span> <span class="n">MiB</span>   <span class="mf">55.7</span> <span class="n">MiB</span>   <span class="mf">83.2</span> <span class="n">MiB</span>        <span class="mf">0.81</span>       <span class="mf">0.12</span>
      <span class="n">Total</span> <span class="n">Running</span> <span class="n">Configs</span><span class="p">:</span>  <span class="mi">25</span> <span class="p">(</span> <span class="n">Processes</span><span class="p">:</span> <span class="mi">64</span> <span class="n">missing</span><span class="p">:</span> <span class="mi">0</span> <span class="n">stray</span><span class="p">:</span> <span class="mi">0</span> <span class="p">)</span>
                     <span class="n">Memory</span><span class="p">:</span> <span class="n">uss</span><span class="p">:</span><span class="mf">2.5</span> <span class="n">GiB</span> <span class="n">rss</span><span class="p">:</span><span class="mf">3.4</span> <span class="n">GiB</span> <span class="n">vms</span><span class="p">:</span><span class="mf">7.4</span> <span class="n">GiB</span>
                   <span class="n">CPU</span> <span class="n">Time</span><span class="p">:</span> <span class="n">User</span><span class="p">:</span><span class="mf">53.06</span><span class="n">s</span> <span class="n">System</span><span class="p">:</span><span class="mf">7.00</span><span class="n">s</span>
       <span class="n">Pub</span><span class="o">/</span><span class="n">Sub</span> <span class="n">Received</span><span class="p">:</span> <span class="mi">99</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="p">(</span><span class="mf">63.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="p">),</span> <span class="n">Sent</span><span class="p">:</span>  <span class="mi">53</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="p">(</span><span class="mf">29.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="p">)</span> <span class="n">Queued</span><span class="p">:</span> <span class="mi">3</span> <span class="n">Retry</span><span class="p">:</span> <span class="mi">523</span><span class="p">,</span> <span class="n">Mean</span> <span class="n">lag</span><span class="p">:</span> <span class="mf">4.54</span><span class="n">s</span>
          <span class="n">Data</span> <span class="n">Received</span><span class="p">:</span> <span class="mi">18</span> <span class="n">Files</span><span class="o">/</span><span class="n">s</span> <span class="p">(</span><span class="mf">9.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="p">),</span> <span class="n">Sent</span><span class="p">:</span> <span class="mi">3</span> <span class="n">Files</span><span class="o">/</span><span class="n">s</span> <span class="p">(</span><span class="mf">1.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p>The first row of output gives categories for the following line:</p>
<ul class="simple">
<li><p>Processes: report on the number of instances and, and whether any are missing.</p></li>
<li><p>Connection: indicators of health of connectivity with remote.</p></li>
<li><p>Lag: the degree of delay being experienced, or how old data is by the time downloads are complete.</p></li>
<li><p>Last: indicates last successful transfer (for components that move files) or last message received/posted.</p></li>
<li><p>Rates: the speed of transfers, various measures.</p></li>
<li><p>Counters: the basis for rate calculations, reset each housekeeping interval.</p></li>
<li><p>Memory: the memory usage of the processes in the configuration.</p></li>
<li><p>Cpu Time: the cpu time usage of the processes in the configuration.</p></li>
</ul>
<p>The last three categories will only be listed when the –full option is provided.</p>
<p>The second row of output gives detailed headings within each category:</p>
<p>The configurations are listed on the left. For each configuraion, the state
will be:</p>
<ul class="simple">
<li><p>stop:  no processes are running.</p></li>
<li><p>run:  all processes are running.</p></li>
<li><p>part:  some processes are running.</p></li>
<li><p>disa:  disabled, configured not to run.</p></li>
</ul>
<p>The next columns to the right give more information, detailing how many processes are Running, out of the number expected.
For example, 3/3 means 3 processes or instances found of the 3 expected to be found.
The Expected entry lists how many processes should be running based on the configuration, and whether it is stopped
or not.</p>
<p>The Retry column is the number of notification messages stored in the local retry queue, indicating what channels are having
processing difficulties.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Heading</p></td>
<td><p>Purpose</p></td>
</tr>
<tr class="row-even"><td><p>State</p></td>
<td><p>General health/status of a given configuration: stop|run|disa|part|wVip|fore</p></td>
</tr>
<tr class="row-odd"><td><p>Run</p></td>
<td><p>Number of processes or instances running compared to expected. 3/10 3 processes running of 10 expected.</p></td>
</tr>
<tr class="row-even"><td><p>Retry</p></td>
<td><p>The number of messages in retry queues, indicating problems with transfers.</p></td>
</tr>
<tr class="row-odd"><td><p>msg</p></td>
<td><p>The percentage of time connected to a message broker, to subscribe to or publish messages.</p></td>
</tr>
<tr class="row-even"><td><p>data</p></td>
<td><p>The percentrage of time connected to data sources or sinks to transfer data.</p></td>
</tr>
<tr class="row-odd"><td><p>LagQueued</p></td>
<td><p>The number of messages queued on the (remote) broker, not yet picked up.</p></td>
</tr>
<tr class="row-even"><td><p>LagMax</p></td>
<td><p>The maximum age of messages on receipt (prior to download), so delay upstream.</p></td>
</tr>
<tr class="row-odd"><td><p>LagAvg</p></td>
<td><p>The average age of messages on receipt (prior to download), so delay upstream.</p></td>
</tr>
<tr class="row-even"><td><p>Last</p></td>
<td><p>Elapsed time since the last successful file (or message) transfer.</p></td>
</tr>
<tr class="row-odd"><td><p>pubsub</p></td>
<td><p>The rate of the pub/sub messages being downloaded in bytes/second</p></td>
</tr>
<tr class="row-even"><td><p>messages</p></td>
<td><p>The rate of the pub/sub messages being downloaded in messages/second</p></td>
</tr>
<tr class="row-odd"><td><p>%rej</p></td>
<td><p>The percent of downloaded messages rejected (indicator of health of subscription tuning.)</p></td>
</tr>
<tr class="row-even"><td><p>RxData</p></td>
<td><p>The amount of data being downloaded (not messages, but file data.)</p></td>
</tr>
<tr class="row-odd"><td><p>TxData</p></td>
<td><p>The amount of data being sent (not messages, but file data.)</p></td>
</tr>
<tr class="row-even"><td><p>subBytes</p></td>
<td><p>Counter of the bytes of pub/sub messages being received.</p></td>
</tr>
<tr class="row-odd"><td><p>Accepted</p></td>
<td><p>Counter of number of messages accepted</p></td>
</tr>
<tr class="row-even"><td><p>Rejected</p></td>
<td><p>Counter of number of messages rejected</p></td>
</tr>
<tr class="row-odd"><td><p>Malformed</p></td>
<td><p>Counter of messages which were discarded because they could not be understood.</p></td>
</tr>
<tr class="row-even"><td><p>pubBytes</p></td>
<td><p>Counter of bytes of messages being published</p></td>
</tr>
<tr class="row-odd"><td><p>pubMsgs</p></td>
<td><p>Counter of messages being published</p></td>
</tr>
<tr class="row-even"><td><p>pubMal</p></td>
<td><p>Counter of message which failed to publish.</p></td>
</tr>
<tr class="row-odd"><td><p>rxData</p></td>
<td><p>Counter of bytes of files being downloaded.</p></td>
</tr>
<tr class="row-even"><td><p>rxFiles</p></td>
<td><p>Counter of files being downloaded.</p></td>
</tr>
<tr class="row-odd"><td><p>txData</p></td>
<td><p>Counter of bytes of files being sent.</p></td>
</tr>
<tr class="row-even"><td><p>txFiles</p></td>
<td><p>Counter of files being sent.</p></td>
</tr>
<tr class="row-odd"><td><p>Since</p></td>
<td><p>How many seconds since the last counter reset (basis for rate calculations.)</p></td>
</tr>
<tr class="row-even"><td><p>uss</p></td>
<td><p>unique set size (memory usage of instances.) Actual physical unique memory used by processes.</p></td>
</tr>
<tr class="row-odd"><td><p>rss</p></td>
<td><p>resident set size (memory usage of instances) Actual physical memory used, including shared.</p></td>
</tr>
<tr class="row-even"><td><p>vms</p></td>
<td><p>virtual memory size of all shared and physical and swap allocated together.</p></td>
</tr>
<tr class="row-odd"><td><p>user</p></td>
<td><p>user cpu time used</p></td>
</tr>
<tr class="row-even"><td><p>system</p></td>
<td><p>system cpu time used.</p></td>
</tr>
</tbody>
</table>
<p>At the bottom of the listing is a cumulation of these values.</p>
</section>
</section>
</section>
<section id="message-gathering">
<h2>Message Gathering<a class="headerlink" href="#message-gathering" title="Link to this heading"></a></h2>
<p>Most Metpx Sarracenia components loop on gathering and/or reception of sarracenia
notification messages. Usually, the notification messages are <a class="reference external" href="../Reference/sr_post.7.html">sr_post(7)</a>
notification messages, announcing the availability of a file by publishing its URL,
but there are also report messages which can be processed using the
same tools. AMQP messages are published to an exchange
on a broker (AMQP server). The exchange delivers notification messages to queues. To receive
notification messages, one must provide the credentials to connect to the broker. Once
connected, a consumer needs to create a queue to hold pending notification messages.
The consumer must then bind the queue to one or more exchanges so that they put
notification messages in its queue.</p>
<p>Once the bindings are set, the program can receive notification messages. When a notification message is received,
further filtering is possible using regular expressions onto the AMQP messages.
After a notification message passes this selection process, and other internal validation, the
component can run an <strong>after_accept</strong> plugin script to perform additional notification message
processing. If this plugin returns False, the notification message is discarded. If True,
processing continues.</p>
<p>The following sections explains all the options to set this “consuming” part of
sarracenia programs.</p>
<section id="setting-the-broker">
<h3>Setting the Broker<a class="headerlink" href="#setting-the-broker" title="Link to this heading"></a></h3>
<p><strong>broker [amqp|mqtt]{s}://&lt;user&gt;:&lt;password&gt;&#64;&lt;brokerhost&gt;[:port]/&lt;vhost&gt;</strong></p>
<p>A URI is used to configure a connection to a notification message pump, either
an MQTT or an AMQP broker. Some Sarracenia components set a reasonable default for
that option.  provide the normal user,host,port of connections. In most configuration files,
the password is missing. The password is normally only included in the credentials.conf file.</p>
<p>Sarracenia work has not used vhosts, so <strong>vhost</strong> should almost always be <strong>/</strong>.</p>
<p>for more info on the AMQP URI format: ( <a class="reference external" href="https://www.rabbitmq.com/uri-spec.html">https://www.rabbitmq.com/uri-spec.html</a> )</p>
<p>either in the default.conf or each specific configuration file.
The broker option tell each component which broker to contact.</p>
<p><strong>broker [amqp|mqtt]{s}://&lt;user&gt;:&lt;pw&gt;&#64;&lt;brokerhost&gt;[:port]/&lt;vhost&gt;</strong></p>
<dl class="simple">
<dt>::</dt><dd><p>(default: None and it is mandatory to set it )</p>
</dd>
</dl>
<p>Once connected to an AMQP broker, the user needs to bind a queue
to exchanges and topics to determine the notification messages of interest.</p>
</section>
<section id="creating-the-queue">
<h3>Creating the Queue<a class="headerlink" href="#creating-the-queue" title="Link to this heading"></a></h3>
<p>Once connected to an AMQP broker, the user needs to create a queue.
Common settings for the queue on broker :</p>
<ul class="simple">
<li><p><strong>queue         &lt;name&gt;         (default: q_&lt;brokerUser&gt;.&lt;programName&gt;.&lt;configName&gt;)</strong></p></li>
<li><p><strong>expire        &lt;duration&gt;      (default: 5m  == five minutes. RECOMMEND OVERRIDING)</strong></p></li>
<li><p><strong>message_ttl   &lt;duration&gt;      (default: None)</strong></p></li>
<li><p><strong>prefetch      &lt;N&gt;            (default: 1)</strong></p></li>
</ul>
<p>Usually components guess reasonable defaults for all these values
and users do not need to set them.  For less usual cases, the user
may need to override the defaults.  The queue is where the notifications
are held on the server for each subscriber.</p>
<section id="queue-queue-name-qn-name">
<h4>[ queue|queue_name|qn &lt;name&gt;]<a class="headerlink" href="#queue-queue-name-qn-name" title="Link to this heading"></a></h4>
<p>By default, components create a queue name that should be unique. The
default queue_name components create follows the following convention:</p>
<blockquote>
<div><p><strong>q_&lt;brokerUser&gt;.&lt;programName&gt;.&lt;configName&gt;.&lt;random&gt;.&lt;random&gt;</strong></p>
</div></blockquote>
<p>Where:</p>
<ul class="simple">
<li><p><em>brokerUser</em> is the username used to connect to the broker (often: <em>anonymous</em> )</p></li>
<li><p><em>programName</em> is the component using the queue (e.g. <em>sr_subscribe</em> ),</p></li>
<li><p><em>configName</em> is the configuration file used to tune component behaviour.</p></li>
<li><p><em>random</em> is just a series of characters chosen to avoid clashes from multiple
people using the same configurations</p></li>
</ul>
<p>Users can override the default provided that it starts with <strong>q_&lt;brokerUser&gt;</strong>.</p>
<p>When multiple instances are used, they will all use the same queue, for trivial
multi-tasking. If multiple computers have a shared home file system, then the
queue_name is written to:</p>
<blockquote>
<div><p>~/.cache/sarra/&lt;programName&gt;/&lt;configName&gt;/&lt;programName&gt;_&lt;configName&gt;_&lt;brokerUser&gt;.qname</p>
</div></blockquote>
<p>Instances started on any node with access to the same shared file will use the
same queue. Some may want use the <em>queue_name</em> option as a more explicit method
of sharing work across multiple nodes.</p>
</section>
</section>
<section id="amqp-queue-bindings">
<h3>AMQP QUEUE BINDINGS<a class="headerlink" href="#amqp-queue-bindings" title="Link to this heading"></a></h3>
<p>Once one has a queue, it must be bound to an exchange.
Users almost always need to set these options. Once a queue exists
on the broker, it must be bound to an exchange. Bindings define which
notification messages (URL notifications) the program receives. The root of the topic
tree is fixed to indicate the protocol version and type of the
notification message (but developers can override it with the <strong>topicPrefix</strong>
option.)</p>
<p>These options define which notification messages (URL notifications) the program receives:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>exchange      &lt;name&gt;         (default: xpublic)</strong></p></li>
<li><p><strong>exchangeSuffix      &lt;name&gt;  (default: None)</strong></p></li>
<li><p><strong>topicPrefix  &lt;amqp pattern&gt; (default: v03 – developer option)</strong></p></li>
<li><p><strong>subtopic      &lt;amqp pattern&gt; (no default, must appear after exchange)</strong></p></li>
</ul>
</div></blockquote>
<section id="subtopic-amqp-pattern-default">
<h4>subtopic &lt;amqp pattern&gt; (default: #)<a class="headerlink" href="#subtopic-amqp-pattern-default" title="Link to this heading"></a></h4>
<p>Within an exchange’s postings, the subtopic setting narrows the product selection.
To give a correct value to the subtopic,
one has the choice of filtering using <strong>subtopic</strong> with only AMQP’s limited wildcarding and
length limited to 255 encoded bytes, or the more powerful regular expression
based  <strong>accept/reject</strong>  mechanisms described below. The difference being that the
AMQP filtering is applied by the broker itself, saving the notices from being delivered
to the client at all. The  <strong>accept/reject</strong>  patterns apply to notification messages sent by the
broker to the subscriber. In other words,  <strong>accept/reject</strong>  are client side filters,
whereas <strong>subtopic</strong> is server side filtering.</p>
<p>It is best practice to use server side filtering to reduce the number of notification messages sent
to the client to a small superset of what is relevant, and perform only a fine-tuning with the
client side mechanisms, saving bandwidth and processing for all.</p>
<p>topicPrefix is primarily of interest during protocol version transitions,
where one wishes to specify a non-default protocol version of notification messages to
subscribe to.</p>
<p>Usually, the user specifies one exchange, and several subtopic options.
<strong>Subtopic</strong> is what is normally used to indicate notification messages of interest.
To use the subtopic to filter the products, match the subtopic string with
the relative path of the product.</p>
<p>For example, consuming from DD, to give a correct value to subtopic, one can
browse the our website  <strong>http://dd.weather.gc.ca</strong> and write down all directories
of interest.  For each directory tree of interest, write a  <strong>subtopic</strong>
option as follow:</p>
<blockquote>
<div><p><strong>subtopic  directory1.*.subdirectory3.*.subdirectory5.#</strong></p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">where</span><span class="p">:</span>
      <span class="o">*</span>                <span class="n">matches</span> <span class="n">a</span> <span class="n">single</span> <span class="n">directory</span> <span class="n">name</span>
      <span class="c1">#                matches any remaining tree of directories.</span>
</pre></div>
</div>
<dl>
<dt>note:</dt><dd><p>When directories have these wild-cards, or spaces in their names, they
will be URL-encoded ( ‘#’ becomes %23 )
When directories have periods in their name, this will change
the topic hierarchy.</p>
<dl class="simple">
<dt>FIXME:</dt><dd><p>hash marks are URL substituted, but did not see code for other values.
Review whether asterisks in directory names in topics should be URL-encoded.
Review whether periods in directory names in topics should be URL-encoded.</p>
</dd>
</dl>
</dd>
</dl>
<p>One can use multiple bindings to multiple exchanges as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">exchange</span> <span class="n">A</span>
<span class="n">subtopic</span> <span class="n">directory1</span><span class="o">.*.</span><span class="n">directory2</span><span class="o">.</span><span class="c1">#</span>

<span class="n">exchange</span> <span class="n">B</span>
<span class="n">subtopic</span> <span class="o">*.</span><span class="n">directory4</span><span class="o">.</span><span class="c1">#</span>
</pre></div>
</div>
<p>Will declare two separate bindings to two different exchanges, and two different file trees.
While default binding is to bind to everything, some brokers might not permit
clients to set bindings, or one might want to use existing bindings.
One can turn off queue binding as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subtopic</span> <span class="kc">None</span>
</pre></div>
</div>
<p>(False, or off will also work.)</p>
</section>
</section>
<section id="client-side-filtering">
<h3>Client-side Filtering<a class="headerlink" href="#client-side-filtering" title="Link to this heading"></a></h3>
<p>We have selected our notification messages through <strong>exchange</strong>, <strong>subtopic</strong> and
perhaps patterned  <strong>subtopic</strong> with AMQP’s limited wildcarding which
is all done by the broker (server-side). The broker puts the
corresponding notification messages in our queue. The subscribed component
downloads these notification messages.  Once the notification message is downloaded, Sarracenia
clients apply more flexible client side filtering using regular expressions.</p>
<section id="brief-introduction-to-regular-expressions">
<h4>Brief Introduction to Regular Expressions<a class="headerlink" href="#brief-introduction-to-regular-expressions" title="Link to this heading"></a></h4>
<p>Regular expressions are a very powerful way of expressing pattern matches.
They provide extreme flexibility, but in these examples we will only use a
very trivial subset: The . is a wildcard matching any single character. If it
is followed by an occurrence count, it indicates how many letters will match
the pattern. The * (asterisk) character, means any number of occurrences.
So:</p>
<blockquote>
<div><ul class="simple">
<li><p>.* means any sequence of characters of any length. In other words, match anything.</p></li>
<li><p>cap.* means any sequence of characters that starts with cap.</p></li>
<li><p>.*CAP.* means any sequence of characters with CAP somewhere in it.</p></li>
<li><p>.*cap means any sequence of characters that ends with CAP.  In the case
where multiple portions of the string could match, the longest one is selected.</p></li>
<li><p>.*?cap same as above, but <em>non-greedy</em>, meaning the shortest match is chosen.</p></li>
</ul>
</div></blockquote>
<p>Please consult various internet resources for more information on the full
variety of matching possible with regular expressions:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/re.html">https://docs.python.org/3/library/re.html</a></p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Regular_expression">https://en.wikipedia.org/wiki/Regular_expression</a></p></li>
<li><p><a class="reference external" href="http://www.regular-expressions.info/">http://www.regular-expressions.info/</a></p></li>
</ul>
</div></blockquote>
</section>
<section id="accept-reject-and-accept-unmatch">
<h4>accept, reject and accept_unmatch<a class="headerlink" href="#accept-reject-and-accept-unmatch" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>accept    &lt;regexp pattern&gt; (optional)</strong></p></li>
<li><p><strong>reject    &lt;regexp pattern&gt; (optional)</strong></p></li>
<li><p><strong>acceptUnmatched   &lt;boolean&gt; (default: True)</strong></p></li>
<li><p><strong>baseUrl_relPath   &lt;boolean&gt; (default: False)</strong></p></li>
</ul>
<p>The  <strong>accept</strong>  and  <strong>reject</strong>  options process regular expressions (regexp).
The regexp is applied to the the notification message’s URL for a match.</p>
<p>If the notification message’s URL of a file matches a <strong>reject</strong>  pattern, the notification message
is acknowledged as consumed to the broker and skipped.</p>
<p>One that matches an <strong>accept</strong> pattern is processed by the component.</p>
<p>In many configurations, <strong>accept</strong> and <strong>reject</strong> options are mixed
with the <strong>directory</strong> option.  They then relate accepted notification messages
to the <strong>directory</strong> value they are specified under.</p>
<p>After all <strong>accept</strong> / <strong>reject</strong>  options are processed, normally
the notification message is acknowledged as consumed and skipped. To override that
default, set <strong>accept_unmatch</strong> to True. The <strong>accept/reject</strong>
settings are interpreted in order. Each option is processed orderly
from top to bottom. For example:</p>
<p>sequence #1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">reject</span> <span class="o">.*</span>\<span class="o">.</span><span class="n">gif</span>
<span class="n">accept</span> <span class="o">.*</span>
</pre></div>
</div>
<p>sequence #2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">accept</span> <span class="o">.*</span>
<span class="n">reject</span> <span class="o">.*</span>\<span class="o">.</span><span class="n">gif</span>
</pre></div>
</div>
<p>In sequence #1, all files ending in ‘gif’ are rejected.  In sequence #2, the accept .* (which
accepts everything) is encountered before the reject statement, so the reject has no effect.</p>
<p>It is best practice to use server side filtering to reduce the number of notification messages sent
to the component to a small superset of what is relevant, and perform only a fine-tuning with the
client side mechanisms, saving bandwidth and processing for all. More details on how
to apply the directives follow:</p>
<p>Normally the relative path (appended to the base directory) for files which are downloaded
will be set according to the relPath header included in the notification message.  if <em>baseUrl_relPath</em>
is set, however, the notification message’s relPath will be prepended with the sub-directories from
the notification message’s baseUrl field.</p>
</section>
</section>
<section id="naming-queues">
<h3>NAMING QUEUES<a class="headerlink" href="#naming-queues" title="Link to this heading"></a></h3>
<p>While in most common cases, a good value is generated by the application, in some cases
there may be a need to override those choices with an explicit user specification.
To do that, one needs to be aware of the rules for naming queues:</p>
<ol class="arabic simple">
<li><p>queue names start with q_</p></li>
<li><p>this is followed by &lt;amqpUserName&gt; (the owner/user of the queue’s broker username)</p></li>
<li><p>followed by a second underscore ( _ )</p></li>
<li><p>followed by a string of the user’s choice.</p></li>
</ol>
<p>The total length of the queue name is limited to 255 bytes of UTF-8 characters.</p>
</section>
</section>
<section id="posting">
<h2>POSTING<a class="headerlink" href="#posting" title="Link to this heading"></a></h2>
<p>Just as many components consumer a stream of notification messages, many components
(often the same ones) also product an output stream of notification messages.  To make files
available to subscribers, a poster publishes the notification messages to an AMQP or
MQTT server, also called a broker. The post_broker option sets all the
credential information to connect to the output <strong>AMQP</strong> broker.</p>
<p><strong>post_broker [amqp|mqtt]{s}://&lt;user&gt;:&lt;pw&gt;&#64;&lt;brokerhost&gt;[:port]/&lt;vhost&gt;</strong></p>
<p>Once connected to the source AMQP broker, the program builds notifications after
the download of a file has occurred. To build the notification and send it to
the next hop broker, the user sets these options :</p>
<ul class="simple">
<li><p><strong>post_baseDir     &lt;path&gt;    (optional)</strong></p></li>
<li><p><strong>post_topicPrefix &lt;pfx&gt; (default: ‘v03’)</strong></p></li>
<li><p><strong>post_exchange    &lt;name&gt;         (default: xpublic)</strong></p></li>
<li><p><strong>post_baseUrl     &lt;url&gt;     (MANDATORY)</strong></p></li>
</ul>
<p>FIXME: Examples of what these are for, what they do…</p>
<section id="naming-exchanges">
<h3>NAMING EXCHANGES<a class="headerlink" href="#naming-exchanges" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Exchange names start with x</p></li>
<li><p>Exchanges that end in <em>public</em> are accessible (for reading) by any authenticated user.</p></li>
<li><p>Users are permitted to create exchanges with the pattern:  xs_&lt;amqpUserName&gt;_&lt;whatever&gt; such exchanges can be written to only by that user.</p></li>
<li><p>The system (sr_audit or administrators) create the xr_&lt;amqpUserName&gt; exchange as a place to send reports for a given user. It is only readable by that user.</p></li>
<li><p>Administrative users (admin or feeder roles) can post or subscribe anywhere.</p></li>
</ol>
<p>For example, xpublic does not have xs_ and a username pattern, so it can only be posted to by admin or feeder users.
Since it ends in public, any user can bind to it to subscribe to notification messages posted.
Users can create exchanges such as xs_&lt;amqpUserName&gt;_public which can be written to by that user (by rule 3),
and read by others (by rule 2.) A description of the conventional flow of notification messages through exchanges on a pump.
Subscribers usually bind to the xpublic exchange to get the main data feed. This is the default in sr_subscribe.</p>
<p>Another example, a user named Alice will have at least two exchanges:</p>
<blockquote>
<div><ul class="simple">
<li><p>xs_Alice the exhange where Alice posts her file notifications and report messages (via many tools).</p></li>
<li><p>xr_Alice the exchange where Alice reads her report messages from (via sr_shovel).</p></li>
<li><p>Alice can create a new exchange by just posting to it (with sr3_post or sr_cpost) if it meets the naming rules.</p></li>
</ul>
</div></blockquote>
<p>Usually an sr_sarra run by a pump administrator will read from an exchange such as xs_Alice_mydata,
retrieve the data corresponding to Alice´s <em>post</em> notification message, and make it available on the pump,
by re-announcing it on the xpublic exchange.</p>
</section>
</section>
<section id="polling">
<h2>POLLING<a class="headerlink" href="#polling" title="Link to this heading"></a></h2>
<p>Polling is doing the same job as a post, except for files on a remote server.
In the case of a poll, the post will have its url built from the <em>pollUrl</em>
option, with the product’s path (<em>path</em>/”matched file”).  There is one
post per file. The file’s size is taken from the directory “ls”… but its
checksum cannot be determined, so the default identity method is “cod”, asking
clients to calculate the identity Checksum On Download.</p>
<p>To set when to poll, use the <em>scheduled_interval</em> or <em>scheduled_hour</em> and <em>scheduled_minute</em>
settings. for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scheduled_interval</span> <span class="mi">30</span><span class="n">m</span>
</pre></div>
</div>
<p>to poll the remote resources every thirty minutes. Alternatively:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scheduled_hour</span> <span class="mi">1</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">19</span>
<span class="n">scheduled_minute</span> <span class="mi">27</span>
</pre></div>
</div>
<p>specifies that poll be run at 1:27, 13:27, and 19:27 each day.</p>
<p>By default, sr_poll sends its post notification message to the broker with default exchange
(the prefix <em>xs_</em> followed by the broker username). The <em>post_broker</em> is mandatory.
It can be given incomplete if it is well defined in the credentials.conf file.</p>
<p>Refer to <a class="reference external" href="../Reference/sr3_post.1.html">sr3_post(1)</a> - to understand the complete notification process.
Refer to <a class="reference external" href="../Reference/sr_post.7.html">sr_post(7)</a> - to understand the complete notification format.</p>
<dl class="simple">
<dt>These options set what files the user wants to be notified for and where</dt><dd><p>it will be placed, and under which name.</p>
</dd>
</dl>
<ul class="simple">
<li><p><strong>path &lt;path&gt;           (default: .)</strong></p></li>
<li><p><strong>accept    &lt;regexp pattern&gt; [rename=] (must be set)</strong></p></li>
<li><p><strong>reject    &lt;regexp pattern&gt; (optional)</strong></p></li>
<li><p><strong>permDefault     &lt;integer&gt;        (default: 0o400)</strong></p></li>
<li><p><strong>fileAgeMax &lt;duration&gt;   (default 30d)</strong></p></li>
</ul>
<p>nodupe_fileAgeMax should be less than nodupe_ttl when using duplicate suppression,
to avoid re-ingesting of files that have aged out of the nodupe cache.</p>
<p>The option <em>path</em>  defines where to get the files on the server.
Combined with  <strong>accept</strong> / <strong>reject</strong>  options, the user can select the
files of interest and their directories of residence.</p>
<p>The  <strong>accept</strong>  and  <strong>reject</strong>  options use regular expressions (regexp) to match URL.
These options are processed sequentially.
The URL of a file that matches a  <strong>reject</strong>  pattern is not published.
Files matching an  <strong>accept</strong>  pattern are published.</p>
<p>The path can have some patterns. These supported patterns concern date/time .
They are fixed…</p>
<p><strong>${YYYY}         current year</strong>
<strong>${MM}           current month</strong>
<strong>${JJJ}          current julian</strong>
<strong>${YYYYMMDD}     current date</strong></p>
<p><strong>${YYYY-1D}      current year   - 1 day</strong>
<strong>${MM-1D}        current month  - 1 day</strong>
<strong>${JJJ-1D}       current julian - 1 day</strong>
<strong>${YYYYMMDD-1D}  current date   - 1 day</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ex.   path /mylocaldirectory/myradars
      path /mylocaldirectory/mygribs
      path /mylocaldirectory/${YYYYMMDD}/mydailies

      accept    .*RADAR.*
      reject    .*Reg.*
      accept    .*GRIB.*
      accept    .*observations.*
</pre></div>
</div>
<p>The <strong>permDefault</strong> option allows users to specify a linux-style numeric octal
permission mask:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">permDefault</span> <span class="mi">040</span>
</pre></div>
</div>
<p>means that a file will not be posted unless the group has read permission
(on an ls output that looks like: —r—–, like a chmod 040 &lt;file&gt; command).
The <strong>permDefault</strong> options specifies a mask, that is the permissions must be
at least what is specified.</p>
<p>As with all other components, the <strong>vip</strong> option can be used to indicate
that a poll should be active on only a single node in a cluster. Note that
other nodes participating in the poll, when they don’t have the vip,
will subscribe to the output of the poll to keep their duplicate suppression
caches current.</p>
<p>files that are more than fileAgeMax are ignored. However, this
can be modified to any specified time limit in the configurations by using
the option <em>fileAgeMax &lt;duration&gt;</em>. By default in components
other than poll, it is disabled by being set to zero (0). As it is a
duration option, units are in seconds by default, but minutes, hours,
days, and weeks, are available. In the poll component, fileAgeMax
defaults to 30 days.</p>
<section id="advanced-polling">
<h3>Advanced Polling<a class="headerlink" href="#advanced-polling" title="Link to this heading"></a></h3>
<p>The built-in Poll lists remote directories and parses the lines returned building
paramiko.SFTPAttributes structures (similar to os.stat) for each file listed.
There is a wide variety of customization available because resources to poll
are so disparate:</p>
<ul class="simple">
<li><p>one can implement a <em>sarracenia.flowcb</em> callback with a <em>poll</em> routine
to support such services, replacing the default poller.</p></li>
<li><p>Some servers have non-standard results when listing files, so one can
subclass a sarracenia.flowcb.poll callback with the <strong>on_line</strong>
entry point to normalize their responses and still be able to use the
builtin polling flow.</p></li>
<li><p>There are many http servers that provide disparately formatted
listings of files, so that sometimes rather than reformatting individual
lines, a means of overriding the parsing of an entire page is needed.
The <strong>on_html_page</strong> entry point in sarracenia.flowcb.poll can be
modified by subclassing as well.</p></li>
<li><p>There are other servers that provide different services, not covered
by the default poll. One can implement additional <em>sarracenia.transfer</em>
classes to add understanding of them to poll.</p></li>
</ul>
<p>The output of a poll is a list of notification messages built from the file names
and SFTPAttributes records, which can then be filtered by elements
after <em>gather</em> in the algorithm.</p>
</section>
</section>
<section id="components">
<h2>COMPONENTS<a class="headerlink" href="#components" title="Link to this heading"></a></h2>
<p>All the components do some combination of polling, consuming, and posting.
with variations that accomplish either forwarding of notification messages or
data transfers. The components all apply the same single algorithm,
just starting from different default settings to match common use
cases.</p>
<section id="cpump">
<h3>CPUMP<a class="headerlink" href="#cpump" title="Link to this heading"></a></h3>
<p><em>cpump*</em> is an implementation of the <a class="reference internal" href="#shovel">shovel</a> component in C.
On an individual basis, it should be faster than a single python downloader,
with some limitations.</p>
<blockquote>
<div><ul class="simple">
<li><p>doesn’t download data, only circulates posts. (shovel, not subscribe)</p></li>
<li><p>runs as only a single instance (no multiple instances).</p></li>
<li><p>does not support any plugins.</p></li>
<li><p>does not support vip for high availability.</p></li>
<li><p>different regular expression library: POSIX vs. python.</p></li>
<li><p>does not support regex for the strip command (no non-greedy regex).</p></li>
</ul>
</div></blockquote>
<p>It can therefore usually, but not always, act as a drop-in replacement for <a class="reference internal" href="#shovel">shovel</a> and <a class="reference internal" href="#winnow">winnow</a></p>
<p>The C implementation may be easier to make available in specialized environments,
such as High Performance Computing, as it has far fewer dependencies than the python version.
It also uses far less memory for a given role.  Normally the python version
is recommended, but there are some cases where use of the C implementation is sensible.</p>
<p><strong>sr_cpump</strong> connects to a <em>broker</em> (often the same as the posting broker)
and subscribes to the notifications of interest. If _suppress_duplicates_ is active,
on reception of a post, it looks up the notification message’s <strong>integity</strong> field in its cache.  If it is
found, the file has already come through, so the notification is ignored. If not, then
the file is new, and the <strong>sum</strong> is added to the cache and the notification is posted.</p>
</section>
<section id="flow">
<h3>FLOW<a class="headerlink" href="#flow" title="Link to this heading"></a></h3>
<p>Flow is the parent class from which all of the other components except cpost and cpump are built.
Flow has no built-in behaviour. Settings can make it act like any other python component,
or it can be used to build user defined components. Typically used with the <em>flowMain</em> option
to run a user defined flow subclass.</p>
</section>
<section id="poll">
<h3>POLL<a class="headerlink" href="#poll" title="Link to this heading"></a></h3>
<p><strong>poll</strong> is a component that connects to a remote server to
check in various directories for some files. When a file is
present, modified or created in the remote directory, the program will
notify about the new product.</p>
<p>The notification protocol is defined here <a class="reference external" href="../Reference/sr_post.7.html">sr_post(7)</a></p>
<p><strong>poll</strong> connects to a <em>broker</em>.  Every <em>scheduled_interval</em> seconds (or can used
combination of <em>scheduled_hour</em> and <em>scheduled_minute</em>) , it connects to
a <em>pollUrl</em> (sftp, ftp, ftps). For each of the <em>directory</em> defined, it lists
the contents.  Polling is only intended to be used for recently modified
files. The <em>fileAgeMax</em> option eliminates files that are too old
from consideration. When a file is found that matches a pattern given
by <em>accept</em>, <strong>poll</strong> builds a notification message for that product.</p>
<p>The notification message is then checked in the duplicate cache (time limited by
nodupe_ttl option.) to prevent posting of files which have already
been seen.</p>
<p><strong>poll</strong> can be used to acquire remote files in conjunction with an <a class="reference internal" href="#sarra">sarra</a>
subscribed to the posted notifications, to download and repost them from a data pump.</p>
<p>The pollUrl option specify what is needed to connect to the remote server</p>
<p><strong>pollUrl protocol://&lt;user&gt;&#64;&lt;server&gt;[:port]</strong></p>
<dl class="simple">
<dt>::</dt><dd><p>(default: None and it is mandatory to set it )</p>
</dd>
</dl>
<p>The <em>pollUrl</em> should be set with the minimum required information…
<strong>sr_poll</strong>  uses <em>pollUrl</em> setting not only when polling, but also
in the sr3_post notification messages produced.</p>
<p>For example, the user can set :</p>
<p><strong>pollUrl ftp://myself&#64;myserver</strong></p>
<p>And complete the needed information in the credentials file with the line  :</p>
<p><strong>ftp://myself:mypassword&#64;myserver:2121  passive,binary</strong></p>
<p>Poll gathers information about remote files, to build notification messages about them.
The gather method that is built-in uses sarracenia.transfer protocols,
currently implemented are sftp, ftp, and http.</p>
<section id="repeated-scans-and-vip">
<h4>Repeated Scans and VIP<a class="headerlink" href="#repeated-scans-and-vip" title="Link to this heading"></a></h4>
<p>When multiple servers are being co-operating to poll a remote server,
the <em>vip</em> setting is used to decide which server will actually poll.
All servers participating subscribe to where <strong>poll</strong> is posting,
and use the results to fill in the duplicate suppression cache, so
that if the VIP moves, the alternate servers have current indications
of what was posted.</p>
</section>
</section>
<section id="post-or-watch">
<h3>POST or WATCH<a class="headerlink" href="#post-or-watch" title="Link to this heading"></a></h3>
<p><strong>sr3_post</strong> posts the availability of a file by creating an notification message.
In contrast to most other sarracenia components that act as daemons,
sr3_post is a one shot invocation which posts and exits.
To make files available to subscribers, <strong>sr3_post</strong> sends the notification messages
to an AMQP or MQTT server, also called a broker.</p>
<p>There are many options for detection changes in directories, for
a detailed discussion of options in Sarracenia, see <a class="reference internal" href="DetectFileReady.html"><span class="doc">DetectFileReady.rst</span></a></p>
<p>This manual page is primarily concerned with the python implementation,
but there is also an implementation in C, which works nearly identically.
Differences:</p>
<blockquote>
<div><ul class="simple">
<li><p>plugins are not supported in the C implementation.</p></li>
<li><p>C implementation uses POSIX regular expressions, python3 grammar is slightly different.</p></li>
<li><p>when the <em>sleep</em> option ( used only in the C implementation) is set to &gt; 0,
it transforms sr_cpost into a daemon that works like <a class="reference internal" href="#watch">watch</a>.</p></li>
</ul>
</div></blockquote>
<p>The <em>watch</em> component is used to monitor directories for new files.
It is equivalent to post (or cpost) with the <em>sleep</em> option set to &gt;0.</p>
<p>The [<em>-pbu|–post_baseUrl url,url,…</em>] option specifies the location
subscribers will download the file from.  There is usually one post per file.
Format of argument to the <em>post_baseUrl</em> option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ftp</span><span class="o">|</span><span class="n">http</span><span class="o">|</span><span class="n">sftp</span><span class="p">]:</span><span class="o">//</span><span class="p">[</span><span class="n">user</span><span class="p">[:</span><span class="n">password</span><span class="p">]</span><span class="o">@</span><span class="p">]</span><span class="n">host</span><span class="p">[:</span><span class="n">port</span><span class="p">]</span><span class="o">/</span>
<span class="ow">or</span>
<span class="n">file</span><span class="p">:</span>
</pre></div>
</div>
<p>When several urls are given as a comma separated list to <em>post_baseUrl</em>, the
url´s provided are used round-robin style, to provide a coarse form of load balancing.</p>
<p>The [<em>-p|–path path1 path2 .. pathN</em>] option specifies the path of the files
to be announced. There is usually one post per file.
Format of argument to the <em>path</em> option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">absolute_path_to_the</span><span class="o">/</span><span class="n">filename</span>
<span class="ow">or</span>
<span class="n">relative_path_to_the</span><span class="o">/</span><span class="n">filename</span>
</pre></div>
</div>
<p>The <em>-pipe</em> option can be specified to have sr3_post read path names from standard
input as well.</p>
<p>An example invocation of <em>sr3_post</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sr3_post</span> <span class="o">-</span><span class="n">pb</span> <span class="n">amqp</span><span class="p">:</span><span class="o">//</span><span class="n">broker</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">pbu</span> <span class="n">sftp</span><span class="p">:</span><span class="o">//</span><span class="n">stanley</span><span class="nd">@mysftpserver</span><span class="o">.</span><span class="n">com</span><span class="o">/</span> <span class="o">-</span><span class="n">p</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">shared</span><span class="o">/</span><span class="n">products</span><span class="o">/</span><span class="n">foo</span>
</pre></div>
</div>
<p>By default, sr3_post reads the file /data/shared/products/foo and calculates its checksum.
It then builds a notification message, logs into broker.com as user ‘guest’ (default credentials)
and sends the post  to defaults vhost ‘/’ and default exchange. The default exchange
is the prefix <em>xs_</em> followed by the broker username, hence defaulting to ‘xs_guest’.
A subscriber can download the file /data/shared/products/foo by authenticating as user stanley
on mysftpserver.com using the sftp protocol to broker.com assuming he has proper credentials.
The output of the command is as follows</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">Published</span> <span class="n">xs_guest</span> <span class="n">v03</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">products</span><span class="o">.</span><span class="n">foo</span> <span class="s1">&#39;20150813161959.854 sftp://stanley@mysftpserver.com/ /data/shared/products/foo&#39;</span> <span class="nb">sum</span><span class="o">=</span><span class="n">d</span><span class="p">,</span><span class="mi">82</span><span class="n">edc8eb735fd99598a1fe04541f558d</span> <span class="n">parts</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">4574</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
</pre></div>
</div>
<p>In MetPX-Sarracenia, each post is published under a certain topic.
The log line starts with ‘[INFO]’, followed by the <strong>topic</strong> of the
post. Topics in <em>AMQP</em> are fields separated by dot. Note that MQTT topics use
a slash (/) as the topic separator.  The complete topic starts with
a topicPrefix (see option), version <em>v03</em>,
followed by a subtopic (see option) here the default, the file path separated with dots
<em>data.shared.products.foo</em>.</p>
<p>The second field in the log line is the notification message notice.  It consists of a time
stamp <em>20150813161959.854</em>, and the source URL of the file in the last 2 fields.</p>
<p>The rest of the information is stored in AMQP message headers, consisting of key=value pairs.
The <em>sum=d,82edc8eb735fd99598a1fe04541f558d</em> header gives file fingerprint (or checksum
) information.  Here, <em>d</em> means md5 checksum performed on the data, and <em>82edc8eb735fd99598a1fe04541f558d</em>
is the checksum value. The <em>parts=1,4574,1,0,0</em> state that the file is available in 1 part of 4574 bytes
(the filesize.)  The remaining <em>1,0,0</em> is not used for transfers of files with only one part.</p>
<p>Another example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sr3_post</span> <span class="o">-</span><span class="n">pb</span> <span class="n">amqp</span><span class="p">:</span><span class="o">//</span><span class="n">broker</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">pbd</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">web</span><span class="o">/</span><span class="n">public_data</span> <span class="o">-</span><span class="n">pbu</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">dd</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">gc</span><span class="o">.</span><span class="n">ca</span><span class="o">/</span> <span class="o">-</span><span class="n">p</span> <span class="n">bulletins</span><span class="o">/</span><span class="n">alphanumeric</span><span class="o">/</span><span class="n">SACN32_CWAO_123456</span>
</pre></div>
</div>
<p>By default, sr3_post reads the file /data/web/public_data/bulletins/alphanumeric/SACN32_CWAO_123456
(concatenating the post_baseDir and relative path of the source url to obtain the local file path)
and calculates its checksum. It then builds a notification message, logs into broker.com as user ‘guest’
(default credentials) and sends the post to defaults vhost ‘/’ and exchange ‘xs_guest’.</p>
<p>A subscriber can download the file <a class="reference external" href="http://dd.weather.gc.ca/bulletins/alphanumeric/SACN32_CWAO_123456">http://dd.weather.gc.ca/bulletins/alphanumeric/SACN32_CWAO_123456</a> using http
without authentication on dd.weather.gc.ca.</p>
<section id="file-partitioning">
<h4>File Partitioning<a class="headerlink" href="#file-partitioning" title="Link to this heading"></a></h4>
<p>use of the <em>blocksize</em> option has no effect in sr3.  It is used to do file partitioning,
and it will become effective again in the future, with the same semantics.</p>
</section>
</section>
<section id="sarra">
<h3>SARRA<a class="headerlink" href="#sarra" title="Link to this heading"></a></h3>
<p><strong>sarra</strong> is a program that Subscribes to file notifications,
Acquires the files and ReAnnounces them at their new locations.
The notification protocol is defined here <a class="reference external" href="../Reference/sr_post.7.html">sr_post(7)</a></p>
<p><strong>sarra</strong> connects to a <em>broker</em> (often the same as the remote file server
itself) and subscribes to the notifications of interest. It uses the notification
information to download the file on the local server it’s running on.
It then posts a notification for the downloaded files on a broker (usually on the local server).</p>
<p><strong>sarra</strong> can be used to acquire files from <a class="reference external" href="../Reference/sr3_post.1.html">sr3_post(1)</a>
or <a class="reference internal" href="#watch">watch</a>  or to reproduce a web-accessible folders (WAF),
that announce its products.</p>
<p>The <strong>sr_sarra</strong> is an <a class="reference external" href="#subscribe">sr_subscribe(1)</a>  with the following presets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mirror</span> <span class="kc">True</span>
</pre></div>
</div>
<section id="specific-consuming-requirements">
<h4>Specific Consuming Requirements<a class="headerlink" href="#specific-consuming-requirements" title="Link to this heading"></a></h4>
<p>If the notification messages are posted directly from a source, the exchange used is ‘xs_&lt;brokerSourceUsername&gt;’.
To protect against malicious users, administrators should set <em>sourceFromExchange</em> to <strong>True</strong>.
Such notification messages may not contain a source nor an origin cluster fields
or a malicious user may set the values incorrectly.</p>
<ul class="simple">
<li><p><strong>sourceFromExchange  &lt;boolean&gt; (default: False)</strong></p></li>
</ul>
<p>Upon reception, the program will set these values in the parent class (here
cluster is the value of option <strong>cluster</strong> taken from default.conf):</p>
<p>msg[‘source’]       = &lt;brokerUser&gt;
msg[‘from_cluster’] = cluster</p>
<p>overriding any values present in the notification message. This setting
should always be used when ingesting data from a
user exchange.</p>
</section>
</section>
<section id="sender">
<h3>SENDER<a class="headerlink" href="#sender" title="Link to this heading"></a></h3>
<p><strong>sender</strong> is a component derived from <a class="reference internal" href="#subscribe">subscribe</a>
used to send local files to a remote server using a file transfer protocol, primarily SFTP.
<strong>sender</strong> is a standard consumer, using all the normal AMQP settings for brokers, exchanges,
queues, and all the standard client side filtering with accept, reject, and after_accept.</p>
<p>Often, a broker will announce files using a remote protocol such as HTTP,
but for the sender it is actually a local file.  In such cases, one will
see a notification message: <strong>ERROR: The file to send is not local.</strong>
An after_accept plugin will convert the web url into a local file one:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">baseDir</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">httpd</span><span class="o">/</span><span class="n">www</span>
<span class="n">flowcb</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">flowcb</span><span class="o">.</span><span class="n">tolocalfile</span><span class="o">.</span><span class="n">ToLocalFile</span>
</pre></div>
</div>
<p>This after_accept plugin is part of the default settings for senders, but one
still needs to specify baseDir for it to function.</p>
<p>If a <strong>post_broker</strong> is set, <strong>sender</strong> checks if the clustername given
by the <strong>to</strong> option if found in one of the notification message’s destination clusters.
If not, the notification message is skipped.</p>
<section id="setup-1-pump-to-pump-replication">
<h4>SETUP 1 : PUMP TO PUMP REPLICATION<a class="headerlink" href="#setup-1-pump-to-pump-replication" title="Link to this heading"></a></h4>
<p>For pump replication, <strong>mirror</strong> is set to True (default).</p>
<p><strong>baseDir</strong> supplies the directory path that, when combined with the relative
one in the selected notification gives the absolute path of the file to be sent.
The default is None which means that the path in the notification is the absolute one.</p>
<p>In a subscriber, the baseDir represents the prefix to the relative path on the upstream
server, and is used as a pattern to be replaced in the currently selected base directory
(from a <em>baseDir</em> or <em>directory</em> option) in the notification message fields: ‘fileOp’,
which are used when mirroring symbolic links, or files that are renamed.</p>
<p>The <strong>sendTo</strong> defines the protocol and server to be used to deliver the products.
Its form is a partial url, for example:  <strong>ftp://myuser&#64;myhost</strong>
The program uses the file ~/.conf/sarra/credentials.conf to get the remaining details
(password and connection options).  Supported protocol are ftp, ftps and sftp. Should the
user need to implement another sending mechanism, he would provide the plugin script
through option <strong>do_send</strong>.</p>
<p>On the remote site, the <strong>post_baseDir</strong> serves the same purpose as the
<strong>baseDir</strong> on this server.  The default is None which means that the delivered path
is the absolute one.</p>
<p>Now we are ready to send the product… for example, if the selected notification looks like this :</p>
<p><strong>20150813161959.854 http://this.pump.com/ relative/path/to/IMPORTANT_product</strong></p>
<p><strong>sr_sender</strong>  performs the following pseudo-delivery:</p>
<p>Sends local file [<strong>baseDir</strong>]/relative/path/to/IMPORTANT_product
to    <strong>sendTo</strong>/[<strong>post_baseDir</strong>]/relative/path/to/IMPORTANT_product
(<strong>kbytes_ps</strong> is greater than 0, the process attempts to respect
this delivery speed… ftp,ftps,or sftp)</p>
<p>At this point, a pump-to-pump setup needs to send the remote notification…
(If the post_broker is not set, there will be no posting… just products replication)</p>
<p>The selected notification contains all the right information
(topic and header attributes) except for url field in the
notice… in our example :  <strong>http://this.pump.com/</strong></p>
<p>By default, <strong>sr_sender</strong> puts the <strong>sendTo</strong> in that field.
The user can overwrite this by specifying the option <strong>post_baseUrl</strong>. For example:</p>
<p><strong>post_baseUrl http://remote.apache.com</strong></p>
<p>The user can provide an <strong>on_post</strong> script. Just before the notification message is
published on the <strong>post_broker</strong>  and <strong>post_exchange</strong>, the
<strong>on_post</strong> script is called… with the <strong>sr_sender</strong> class instance as an argument.
The script can perform whatever you want… if it returns False, the notification message will not
be published. If True, the program will continue processing from there.</p>
<p>FIXME: Missing example configuration.</p>
</section>
<section id="destination-setup-2-metpx-sundew-like-dissemination">
<h4>DESTINATION SETUP 2 : METPX-SUNDEW LIKE DISSEMINATION<a class="headerlink" href="#destination-setup-2-metpx-sundew-like-dissemination" title="Link to this heading"></a></h4>
<p>In this type of usage, we would not usually repost… but if the
<strong>post_broker</strong> and <strong>post_exchange</strong> (<strong>url</strong>,**on_post**) are set,
the product will be announced (with its possibly new location and new name).
Let’s reintroduce the options in a different order
with some new ones to ease explanation.</p>
<p>There are 2 differences with the previous case :
the <strong>directory</strong>, and the <strong>filename</strong> options.</p>
<p>The <strong>baseDir</strong> is the same, and so are the
<strong>sendTo</strong>  and the <strong>post_baseDir</strong> options.</p>
<p>The <strong>directory</strong> option defines another “relative path” for the product
at its sendTo.  It is tagged to the <strong>accept</strong> options defined after it.
If another sequence of <strong>directory</strong>/<strong>accept</strong> follows in the configuration file,
the second directory is tagged to the following accepts and so on.</p>
<p>The  <strong>accept/reject</strong>  patterns apply to notification message notice url as above.
Here is an example, here some ordered configuration options :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">directory</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">new</span><span class="o">/</span><span class="n">important_location</span>

<span class="n">accept</span> <span class="o">.*</span><span class="n">IMPORTANT</span><span class="o">.*</span>

<span class="n">directory</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">new</span><span class="o">/</span><span class="n">location</span><span class="o">/</span><span class="n">for_others</span>

<span class="n">accept</span> <span class="o">.*</span>
</pre></div>
</div>
<p>If the notification selected is, as above, this :</p>
<p><strong>20150813161959.854 http://this.pump.com/ relative/path/to/IMPORTANT_product</strong></p>
<p>It was selected by the first <strong>accept</strong> option. The remote relative path becomes
<strong>/my/new/important_location</strong> … and <strong>sr_sender</strong>  performs the following pseudo-delivery:</p>
<p>sends local file [<strong>baseDir</strong>]/relative/path/to/IMPORTANT_product
to    <strong>sendTo</strong>/[<strong>post_baseDir</strong>]/my/new/important_location/IMPORTANT_product</p>
<p>Usually this way of using <strong>sr_sender</strong> would not require posting of the product.
But if <strong>post_broker</strong> and <strong>post_exchange</strong> are provided, and <strong>url</strong> , as above, is set to
<strong>http://remote.apache.com</strong>,  then <strong>sr_sender</strong> would reconstruct :</p>
<p>Topic: <strong>v03.my.new.important_location.IMPORTANT_product</strong></p>
<p>Notice: <strong>20150813161959.854 http://remote.apache.com/ my/new/important_location/IMPORTANT_product</strong></p>
</section>
</section>
<section id="shovel">
<h3>SHOVEL<a class="headerlink" href="#shovel" title="Link to this heading"></a></h3>
<p>shovel copies notification messages on one broker (given by the <em>broker</em> option) to
another (given by the <em>post_broker</em> option.) subject to filtering
by (<em>exchange</em>, <em>subtopic</em>, and optionally, <em>accept</em>/<em>reject</em>.)</p>
<p>The <em>topicPrefix</em> option must to be set to:</p>
<blockquote>
<div><ul class="simple">
<li><p>to shovel <a class="reference external" href="../Reference/sr_post.7.html">sr_post(7)</a> notification messages</p></li>
</ul>
</div></blockquote>
<p>shovel is a flow with the following presets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">no</span><span class="o">-</span><span class="n">download</span> <span class="kc">True</span>
<span class="n">suppress_duplicates</span> <span class="n">off</span>
</pre></div>
</div>
</section>
<section id="subscribe">
<h3>SUBSCRIBE<a class="headerlink" href="#subscribe" title="Link to this heading"></a></h3>
<p>Subscribe is the normal downloading flow component, that will connect to a broker, download
the configured files, and then forward the notification messages with an altered baseUrl.</p>
</section>
<section id="watch">
<h3>WATCH<a class="headerlink" href="#watch" title="Link to this heading"></a></h3>
<p>Watches a directory and publishes posts when files in the directory change
( added, modified, or deleted). Its arguments are very similar to  <a class="reference external" href="../Reference/sr3_post.1.html">sr3_post</a>.
In the MetPX-Sarracenia suite, the main goal is to post the availability and readiness
of one’s files. Subscribers use  <em>sr_subscribe</em>  to consume the post and download the files.</p>
<p>Posts are sent to an AMQP server, also called a broker, specified with the option [ <em>-pb|–post_broker broker_url</em> ].</p>
<p>The [<em>-post_baseUrl|–pbu|–url url</em>] option specifies the protocol, credentials, host and port to which subscribers
will connect to get the file.</p>
<p>Format of argument to the <em>url</em> option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ftp</span><span class="o">|</span><span class="n">http</span><span class="o">|</span><span class="n">sftp</span><span class="p">]:</span><span class="o">//</span><span class="p">[</span><span class="n">user</span><span class="p">[:</span><span class="n">password</span><span class="p">]</span><span class="o">@</span><span class="p">]</span><span class="n">host</span><span class="p">[:</span><span class="n">port</span><span class="p">]</span><span class="o">/</span>
<span class="ow">or</span>
<span class="p">[</span><span class="n">ftp</span><span class="o">|</span><span class="n">http</span><span class="o">|</span><span class="n">sftp</span><span class="p">]:</span><span class="o">//</span><span class="p">[</span><span class="n">user</span><span class="p">[:</span><span class="n">password</span><span class="p">]</span><span class="o">@</span><span class="p">]</span><span class="n">host</span><span class="p">[:</span><span class="n">port</span><span class="p">]</span><span class="o">/</span>
<span class="ow">or</span>
<span class="n">file</span><span class="p">:</span>
</pre></div>
</div>
<p>The [<em>-p|–path path</em>] option tells <em>watch</em> what to look for.
If the <em>path</em> specifies a directory, <em>watches</em> creates a post for any time
a file in that directory is created, modified or deleted.
If the <em>path</em> specifies a file,  <em>watch</em>  watches only that file.
In the notification message, it is specified with the <em>path</em> of the product.
There is usually one post per file.</p>
<p>FIXME: in version 3 does it work at all without a configuration?
perhaps we should just create the file if it isn’t there?</p>
<p>An example of an execution of  <em>watch</em>  checking a file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sr3</span> <span class="o">--</span><span class="n">post_baseUrl</span> <span class="n">sftp</span><span class="p">:</span><span class="o">//</span><span class="n">stanley</span><span class="nd">@mysftpserver</span><span class="o">.</span><span class="n">com</span><span class="o">/</span> <span class="o">--</span><span class="n">path</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">shared</span><span class="o">/</span><span class="n">products</span><span class="o">/</span><span class="n">foo</span> <span class="o">--</span><span class="n">post_broker</span> <span class="n">amqp</span><span class="p">:</span><span class="o">//</span><span class="n">broker</span><span class="o">.</span><span class="n">com</span> <span class="n">start</span> <span class="n">watch</span><span class="o">/</span><span class="n">myflow</span>
</pre></div>
</div>
<p>Here, <em>watch</em> checks events on the file /data/shared/products/foo.
Default events settings reports if the file is modified or deleted.
When the file gets modified, <em>watch</em> reads the file /data/shared/products/foo
and calculates its checksum. It then builds a notification message, logs into broker.com as user ‘guest’ (default credentials)
and sends the post to defaults vhost ‘/’ and post_exchange ‘xs_stanley’ (default exchange)</p>
<p>A subscriber can download the file /data/shared/products/foo  by logging as user stanley
on mysftpserver.com using the sftp protocol to  broker.com assuming he has proper credentials.</p>
<p>The output of the command is as follows</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">v03</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">products</span><span class="o">.</span><span class="n">foo</span> <span class="s1">&#39;20150813161959.854 sftp://stanley@mysftpserver.com/ /data/shared/products/foo&#39;</span>
      <span class="n">source</span><span class="o">=</span><span class="n">guest</span> <span class="n">parts</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">256</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span> <span class="nb">sum</span><span class="o">=</span><span class="n">d</span><span class="p">,</span><span class="n">fc473c7a2801babbd3818260f50859de</span>
</pre></div>
</div>
<p>In MetPX-Sarracenia, each post is published under a certain topic.
After the ‘[INFO]’ the next information gives the fBtopic*  of the
post. Topics in  <em>AMQP</em>  are fields separated by dot. In MetPX-Sarracenia
it is made of a  <em>topicPrefix</em>  by default : version  <em>v03</em> ,
followed by the  <em>subtopic</em>  by default : the file path separated with dots, here, <em>data.shared.products.foo</em></p>
<p>After the topic hierarchy comes the body of the notification.  It consists of a time  <em>20150813161959.854</em> ,
and the source url of the file in the last 2 fields.</p>
<p>The remaining line gives informations that are placed in the amqp message header.
Here it consists of  <em>source=guest</em> , which is the amqp user,  <em>parts=1,256,0,0,1</em> ,
which suggests to download the file in 1 part of 256 bytes (the actual filesize), trailing 1,0,0
gives the number of block, the remaining in bytes and the current
block.  <em>sum=d,fc473c7a2801babbd3818260f50859de</em>  mentions checksum information,</p>
<p>here,  <em>d</em>  means md5 checksum performed on the data, and  <em>fc473c7a2801babbd3818260f50859de</em>
is the checksum value.  When the event on a file is a deletion, sum=R,0  R stands for remove.</p>
<p>Another example watching a file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sr3</span> <span class="o">--</span><span class="n">post_baseDir</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">web</span><span class="o">/</span><span class="n">public_data</span> <span class="o">--</span><span class="n">post_baseUrl</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">dd</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">gc</span><span class="o">.</span><span class="n">ca</span><span class="o">/</span> <span class="o">--</span><span class="n">path</span> <span class="n">bulletins</span><span class="o">/</span><span class="n">alphanumeric</span><span class="o">/</span><span class="n">SACN32_CWAO_123456</span> <span class="o">-</span><span class="n">post_broker</span> <span class="n">amqp</span><span class="p">:</span><span class="o">//</span><span class="n">broker</span><span class="o">.</span><span class="n">com</span> <span class="n">start</span> <span class="n">watch</span><span class="o">/</span><span class="n">myflow</span>
</pre></div>
</div>
<p>By default, watch checks the file /data/web/public_data/bulletins/alphanumeric/SACN32_CWAO_123456
(concatenating the baseDir and relative path of the source url to obtain the local file path).
If the file changes, it calculates its checksum. It then builds a notification message, logs into broker.com as user ‘guest’
(default credentials) and sends the post to defaults vhost ‘/’ and post_exchange ‘sx_guest’ (default post_exchange)</p>
<p>A subscriber can download the file <a class="reference external" href="http://dd.weather.gc.ca/bulletins/alphanumeric/SACN32_CWAO_123456">http://dd.weather.gc.ca/bulletins/alphanumeric/SACN32_CWAO_123456</a> using http
without authentication on dd.weather.gc.ca.</p>
<p>An example checking a directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sr3</span> <span class="o">-</span><span class="n">post_baseDir</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">web</span><span class="o">/</span><span class="n">public_data</span> <span class="o">-</span><span class="n">post_baseUrl</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">dd</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">gc</span><span class="o">.</span><span class="n">ca</span><span class="o">/</span> <span class="o">--</span><span class="n">path</span> <span class="n">bulletins</span><span class="o">/</span><span class="n">alphanumeric</span> <span class="o">--</span><span class="n">post_broker</span> <span class="n">amqp</span><span class="p">:</span><span class="o">//</span><span class="n">broker</span><span class="o">.</span><span class="n">com</span> <span class="n">start</span> <span class="n">watch</span><span class="o">/</span><span class="n">myflow</span>
</pre></div>
</div>
<p>Here, watch checks for file creation(modification) in /data/web/public_data/bulletins/alphanumeric
(concatenating the baseDir and relative path of the source url to obtain the directory path).
If the file SACN32_CWAO_123456 is being created in that directory, watch calculates its checksum.
It then builds a notification message, logs into broker.com as user ‘guest’</p>
<p>A subscriber can download the created/modified file <a class="reference external" href="http://dd.weather.gc.ca/bulletins/alphanumeric/SACN32_CWAO_123456">http://dd.weather.gc.ca/bulletins/alphanumeric/SACN32_CWAO_123456</a> using http
without authentication on dd.weather.gc.ca.</p>
</section>
<section id="winnow">
<h3>WINNOW<a class="headerlink" href="#winnow" title="Link to this heading"></a></h3>
<p>the <strong>winnow</strong> component subscribes to file notification messages and reposts them, suppressing redundant
ones. How to decide which ones are redundant varies by use case. In the most straight-forward case,
the messages have <strong>Identity</strong> header stores a file’s fingerprint as described in the <a class="reference external" href="../Reference/sr_post.7.html">sr_post(7)</a> man page,
and header is used exclusively. There are many other use cases, though. discussed in the following section
on <a class="reference external" href="DuplicateSuppresion.html">Duplicate Suppression</a></p>
<p><strong>winnow</strong> has the following options forced:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">no</span><span class="o">-</span><span class="n">download</span> <span class="kc">True</span>
<span class="n">suppress_duplicates</span> <span class="n">on</span>
<span class="n">accept_unmatch</span> <span class="kc">True</span>
</pre></div>
</div>
<p>The suppress_duplicates lifetime can be adjusted, but it is always on.
Other components can use the same duplicate suppression logic.  The use of <em>winnow</em> components
is purely to make it easier for analysts to understand a configuration at a glance.</p>
<p><strong>winnow</strong> connects to a <em>broker</em> (often the same as the posting broker)
and subscribes to the notifications of interest. On reception of a notification,
it looks up its <strong>sum</strong> in its cache.  If it is found, the file has already come through,
so the notification is ignored. If not, then the file is new, and the <strong>sum</strong> is added
to the cache and the notification is posted.</p>
<p><strong>winnow</strong> can be used to trim notification messages produced by  post, <a class="reference external" href="../Reference/sr3_post.1.html">sr3_post</a>,
sr3_cpost, <a class="reference internal" href="#poll">poll</a> or <a class="reference internal" href="#watch">watch</a> etc… It is used when there are multiple sources of the same data, so that clients
only download the source data once, from the first source that posted it.</p>
</section>
</section>
<section id="configurations">
<h2>Configurations<a class="headerlink" href="#configurations" title="Link to this heading"></a></h2>
<p>If one has a ready made configuration called <em>q_f71.conf</em>, it can be
added to the list of known ones with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subscribe</span> <span class="n">add</span> <span class="n">q_f71</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>In this case, xvan_f14 is included with examples provided, so <em>add</em> finds it in the examples
directory and copies into the active configuration one.
Each configuration file manages the consumers for a single queue on
the broker. To view the available configurations, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ subscribe list

  configuration examples: ( /usr/lib/python3/dist-packages/sarra/examples/subscribe )
            all.conf     all_but_cap.conf            amis.conf            aqhi.conf             cap.conf      cclean_f91.conf
      cdnld_f21.conf       cfile_f44.conf        citypage.conf       clean_f90.conf            cmml.conf cscn22_bulletins.conf
        ftp_f70.conf            gdps.conf         ninjo-a.conf           q_f71.conf           radar.conf            rdps.conf
           swob.conf           t_f30.conf      u_sftp_f60.conf

  user plugins: ( /home/peter/.config/sarra/plugins )
        destfn_am.py         destfn_nz.py       msg_tarpush.py

  general: ( /home/peter/.config/sarra )
          admin.conf     credentials.conf         default.conf

  user configurations: ( /home/peter/.config/sarra/subscribe )
     cclean_f91.conf       cdnld_f21.conf       cfile_f44.conf       clean_f90.conf         ftp_f70.conf           q_f71.conf
          t_f30.conf      u_sftp_f60.conf
</pre></div>
</div>
<p>one can then modify it using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ subscribe edit q_f71.conf
</pre></div>
</div>
<p>(The edit action uses the EDITOR environment variable, if present.)
Once satisfied, one can start the the configuration running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ subscibe foreground q_f71.conf
</pre></div>
</div>
<p>What goes into the files? See next section:</p>
<ul class="simple">
<li><p>The forward slash (/) as the path separator in Sarracenia configuration files on all
operating systems. Use of the backslash character as a path separator (as used in the
cmd shell on Windows) may not work properly. When files are read on Windows, the path
separator is immediately converted to the forward slash, so all pattern matching,
in accept, reject, strip etc… directives should use forward slashes when a path
separator is needed.</p></li>
</ul>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">directory</span> <span class="n">A</span>
<span class="n">accept</span> <span class="n">X</span>
</pre></div>
</div>
<p>Places files matching X in directory A.</p>
<dl class="simple">
<dt>vs::</dt><dd><p>accept X
directory A</p>
</dd>
</dl>
<p>Places files matching X in the current working directory, and the <em>directory A</em> setting
does nothing in relation to X.</p>
<p>To provide non-functional descriptions of configurations, or comments, use lines that begin with a <strong>#</strong>.</p>
<p><strong>All options are case sensitive.</strong>  <strong>Debug</strong> is not the same as <strong>debug</strong> nor <strong>DEBUG</strong>.
Those are three different options (two of which do not exist and will have no effect,
but should generate an ´unknown option warning´).</p>
<p>Options and command line arguments are equivalent.  Every command line argument
has a corresponding long version starting with ‘–’.  For example <em>-u</em> has the
long form <em>–url</em>. One can also specify this option in a configuration file.
To do so, use the long form without the ‘–’, and put its value separated by a space.
The following are all equivalent:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>url &lt;url&gt;</strong></p></li>
<li><p><strong>-u &lt;url&gt;</strong></p></li>
<li><p><strong>–url &lt;url&gt;</strong></p></li>
</ul>
</div></blockquote>
<p>Settings are interpreted in order.  Each file is read from top to bottom.
For example:</p>
<p>sequence #1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">reject</span> <span class="o">.*</span>\<span class="o">.</span><span class="n">gif</span>
<span class="n">accept</span> <span class="o">.*</span>
</pre></div>
</div>
<p>sequence #2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">accept</span> <span class="o">.*</span>
<span class="n">reject</span> <span class="o">.*</span>\<span class="o">.</span><span class="n">gif</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FIXME: does this match only files ending in ‘gif’ or should we add a $ to it?
will it match something like .gif2 ? is there an assumed .* at the end?</p>
</div>
<p>In sequence #1, all files ending in ‘gif’ are rejected. In sequence #2, the
accept .* (which accepts everything) is encountered before the reject statement,
so the reject has no effect.  Some options have global scope, rather than being
interpreted in order.  for thoses cases, a second declaration overrides the first.</p>
<p>Options to be reused in different config files can be grouped in an <em>include</em> file:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>–include &lt;includeConfigPath&gt;</strong></p></li>
</ul>
</div></blockquote>
<p>The includeConfigPath would normally reside under the same config dir of its
master configs. If a URL is supplied as an includeConfigPATH, then a remote
configuraiton will be downloaded and cached (used until an update on the server
is detected.) See <a class="reference internal" href="#remote-configurations">Remote Configurations</a> for details.</p>
<p>Environment variables, and some built-in variables can also be put on the
right hand side to be evaluated, surrounded by ${..} The built-in variables are:</p>
<blockquote>
<div><ul class="simple">
<li><p>${BROKER_USER} - the user name for authenticating to the broker (e.g. anonymous)</p></li>
<li><p>${PROGRAM}     - the name of the component (subscribe, shovel, etc…)</p></li>
<li><p>${CONFIG}      - the name of the configuration file being run.</p></li>
<li><p>${HOSTNAME}    - the hostname running the client.</p></li>
<li><p>${RANDID}      - a random id that will be consistent within a single invocation.</p></li>
</ul>
</div></blockquote>
</section>
<section id="flowcallbacks">
<h2>flowCallbacks<a class="headerlink" href="#flowcallbacks" title="Link to this heading"></a></h2>
<p>Sarracenia makes extensive use of small python code snippets that customize
processing called <em>flowCallback</em> Flow_callbacks define and use additional settings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flowCallback</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">flowcb</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">Log</span>
</pre></div>
</div>
<p>There is also a shorter form to express the same thing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">callback</span> <span class="n">log</span>
</pre></div>
</div>
<p>Either way, the module refers to the sarracenia/flowcb/msg/log.py file in the
installed package. In that file, the Log class is the one searched for entry
points. The log.py file included in the package is like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sarracenia.flowcb</span> <span class="kn">import</span> <span class="n">FlowCB</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span> <span class="vm">__name__</span> <span class="p">)</span>

<span class="k">class</span> <span class="nc">Log</span><span class="p">(</span><span class="n">Plugin</span><span class="p">):</span>

  <span class="k">def</span> <span class="nf">after_accept</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">worklist</span><span class="p">):</span>
      <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">worklist</span><span class="o">.</span><span class="n">incoming</span><span class="p">:</span>
          <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span> <span class="s2">&quot;msg/log received: </span><span class="si">%s</span><span class="s2"> &quot;</span> <span class="o">%</span> <span class="n">msg</span> <span class="p">)</span>
      <span class="k">return</span> <span class="n">worklist</span>
</pre></div>
</div>
<p>It’s a normal python class, declared as a child of the sarracenia.flowcb.FlowCB
class. The methods (function names) in the plugin describe when
those routines will be called. For more details consult the
<a class="reference internal" href="SarraPluginDev.html"><span class="doc">Programmer’s Guide</span></a></p>
<p>To add special processing of notification messages, create a module in the python
path, and have it include entry points.</p>
<p>There is also <em>flowCallbackPrepend</em> which adds a flowCallback class to the front
of the list (which determines relative execution order among flowCallback classes.)</p>
<section id="callback-options">
<h3>callback options<a class="headerlink" href="#callback-options" title="Link to this heading"></a></h3>
<p>callbacks that are delivered with metpx-sr3 follow the following convention:</p>
<ul class="simple">
<li><p>they are placed in the sarracenia/flowcb  directory tree.</p></li>
<li><p>the name of the primary class is the same as the name of file containing it.</p></li>
</ul>
<p>so we provide the following syntactic sugar:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">callback</span> <span class="n">log</span>    <span class="p">(</span><span class="ow">is</span> <span class="n">equivalent</span> <span class="n">to</span> <span class="o">*</span><span class="n">flowCallback</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">flowcb</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">Log</span><span class="o">*</span> <span class="p">)</span>
</pre></div>
</div>
<p>There is similarly a <em>callback_prepend</em> to fill in.</p>
</section>
<section id="importing-extensions">
<h3>Importing Extensions<a class="headerlink" href="#importing-extensions" title="Link to this heading"></a></h3>
<p>The <em>import</em> option works in a way familiar to Python developers,
Making them available for use by the Sarracenia core, or flowCallback.
Developers can add additional protocols for notification messages or
file transfer.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">torr</span>
</pre></div>
</div>
<p>would be a reasonable name for a Transfer protocol to retrieve
resources with bittorrent protocol. A skeleton of such a thing
would look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">sarracenia.transfer</span>

<span class="k">class</span> <span class="nc">torr</span><span class="p">(</span><span class="n">sarracenia</span><span class="o">.</span><span class="n">transfer</span><span class="o">.</span><span class="n">Transfer</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;loading&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>For more details on implementing extensions, consult the
<a class="reference internal" href="SarraPluginDev.html"><span class="doc">Programmer’s Guide</span></a></p>
</section>
<section id="deprecated-v2-plugins">
<h3>Deprecated v2 plugins<a class="headerlink" href="#deprecated-v2-plugins" title="Link to this heading"></a></h3>
<p>There is and older (v2) style of plugins as well. That are usually
prefixed with the name of the plugin:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">msg_to_clusters</span> <span class="n">DDI</span>
<span class="n">msg_to_clusters</span> <span class="n">DD</span>

<span class="n">on_message</span> <span class="n">msg_to_clusters</span>
</pre></div>
</div>
<p>A setting ‘msg_to_clusters’ is needed by the <em>msg_to_clusters</em> plugin
referenced in the <em>on_message</em> the v2 plugins are a little more
cumbersome to write. They are included here for completeness, but
people should use version 3 (either flowCallback, or extensions
discussed next) when possible.</p>
<p>Reasons to use newer style plugins:</p>
<ul class="simple">
<li><p>Support for running v2 plugins is accomplished using a flowcb
called v2wrapper. It performs a lot of processing to wrap up
the v3 data structures to look like v2 ones, and then has
to propagate the changes back. It’s a bit expensive.</p></li>
<li><p>newer style extensions are ordinary python modules, unlike
v2 ones which require minor magic incantations.</p></li>
<li><p>when a v3 (flowCallback or imported) module has a syntax error,
all the tools of the python interpreter apply, providing
a lot more feedback is given to the coder. with v2, it just
says there is something wrong, much more difficult to debug.</p></li>
<li><p>v3 api is strictly more powerful than v2, as it works
on groups of notification messages, rather than individual ones.</p></li>
</ul>
</section>
<section id="environment-variables">
<h3>Environment Variables<a class="headerlink" href="#environment-variables" title="Link to this heading"></a></h3>
<p>On can also reference environment variables in configuration files,
using the <em>${ENV}</em> syntax.  If Sarracenia routines needs to make use
of an environment variable, then they can be set in configuration files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">declare</span> <span class="n">env</span> <span class="n">HTTP_PROXY</span><span class="o">=</span><span class="n">localhost</span>
</pre></div>
</div>
</section>
<section id="logs-and-monitoring">
<h3>LOGS and MONITORING<a class="headerlink" href="#logs-and-monitoring" title="Link to this heading"></a></h3>
<ul>
<li><dl class="simple">
<dt>debug</dt><dd><p>Setting option debug is identical to use  <strong>logLevel debug</strong></p>
</dd>
</dl>
</li>
<li><p>logMessageDump  (default: off) boolean flag
if set, all fields of a notification message are printed, rather than just a url/path reference.</p></li>
<li><dl class="simple">
<dt>logEvents ( default after_accept,after_work,on_housekeeping )</dt><dd><p>emit standard log messages at the given points in notification message processing.
other values: on_start, on_stop, post, gather, … etc…</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>logLevel ( default: info )</dt><dd><p>The level of logging as expressed by python’s logging. Possible values are :  critical, error, info, warning, debug.</p>
</dd>
</dl>
</li>
<li><p>–logStdout ( default: False )  EXPERIMENTAL FOR DOCKER use case</p>
<blockquote>
<div><p>The <em>logStdout</em> disables log management. Best used on the command line, as there is
some risk of creating stub files before the configurations are completely parsed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sr3</span> <span class="o">--</span><span class="n">logStdout</span> <span class="n">start</span>
</pre></div>
</div>
<p>All launched processes inherit their file descriptors from the parent. so all output is like an interactive session.</p>
<p>This is in contrast to the normal case, where each instance takes care of its logs, rotating and purging periodically.
In some cases, one wants to have other software take care of logs, such as in docker, where it is preferable for all
logging to be to standard output.</p>
<p>It has not been measured, but there is a reasonable likelihood that use of <em>logStdout</em> with large configurations (dozens
of configured instances/processes) will cause either corruption of logs, or limit the speed of execution of all processes
writing to stdout.</p>
</div></blockquote>
</li>
<li><dl class="simple">
<dt>log_reject &lt;True|False&gt; ( default: False )</dt><dd><p>print a log message when <em>rejecting</em> notification messages (choosing not to download the corresponding files)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>log &lt;dir&gt; ( default: ~/.cache/sarra/log ) (on Linux)</dt><dd><p>The directory to store log files in.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>statehost &lt;False|True&gt; ( default: False )</dt><dd><p>In large data centres, the home directory can be shared among thousands of
nodes. Statehost adds the node name after the cache directory to make it
unique to each node. So each node has it’s own statefiles and logs.
example, on a node named goofy,  ~/.cache/sarra/log/ becomes ~/.cache/sarra/goofy/log.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>logRotateCount &lt;max_logs&gt; ( default: 5 )</dt><dd><p>Maximum number of logs archived.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>logRotateInterval &lt;duration&gt;[&lt;time_unit&gt;] ( default: 1d = 86,400s )</dt><dd><p>The duration of the interval with an optional time unit (ie 5m, 2h, 3d)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>permLog ( default: 0600 )</dt><dd><p>The permission bits to set on log files.</p>
</dd>
</dl>
</li>
</ul>
<p>See the <cite>Subscriber Guide &lt;../How2Guides/subscriber.rst&gt;</cite> for a more detailed discussion of logging
options and techniques.</p>
</section>
<section id="credentials">
<h3>CREDENTIALS<a class="headerlink" href="#credentials" title="Link to this heading"></a></h3>
<p>One normally does not specify passwords in configuration files.  Rather they are placed
in the credentials file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">edit</span> <span class="o">~/.</span><span class="n">config</span><span class="o">/</span><span class="n">sr3</span><span class="o">/</span><span class="n">credentials</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>For every url specified that requires a password, one places
a matching entry in credentials.conf.
The broker option sets all the credential information to connect to the  <strong>RabbitMQ</strong> server</p>
<ul class="simple">
<li><p><strong>broker amqp{s}://&lt;user&gt;:&lt;pw&gt;&#64;&lt;brokerhost&gt;[:port]/&lt;vhost&gt;</strong></p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="n">amqps</span><span class="p">:</span><span class="o">//</span><span class="n">anonymous</span><span class="p">:</span><span class="n">anonymous</span><span class="nd">@dd</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">gc</span><span class="o">.</span><span class="n">ca</span><span class="o">/</span> <span class="p">)</span>
</pre></div>
</div>
<p>For all <strong>sarracenia</strong> programs, the confidential parts of credentials are stored
only in ~/.config/sarra/credentials.conf. This includes the url and broker
passwords and settings needed by components. The format is one entry per line. Examples:</p>
<ul class="simple">
<li><p><strong>amqp://user1:password1&#64;host/</strong></p></li>
<li><p><strong>amqps://user2:password2&#64;host:5671/dev</strong></p></li>
<li><p><strong>amqps://usern:passwd&#64;host/ login_method=PLAIN</strong></p></li>
<li><p><strong>sftp://user5:password5&#64;host</strong></p></li>
<li><p><strong>sftp://user6:password6&#64;host:22  ssh_keyfile=/users/local/.ssh/id_dsa</strong></p></li>
<li><p><strong>ftp://user7:password7&#64;host  passive,binary</strong></p></li>
<li><p><strong>ftp://user8:password8&#64;host:2121  active,ascii</strong></p></li>
<li><p><strong>ftps://user7:De%3Aize&#64;host  passive,binary,tls</strong></p></li>
<li><p><strong>ftps://user8:%2fdot8&#64;host:2121  active,ascii,tls,prot_p</strong></p></li>
<li><p><strong>https://ladsweb.modaps.eosdis.nasa.gov/ bearer_token=89APCBF0-FEBE-11EA-A705-B0QR41911BF4</strong></p></li>
</ul>
<p>In other configuration files or on the command line, the url simply lacks the
password or key specification.  The url given in the other files is looked
up in credentials.conf.</p>
<section id="credential-details">
<h4>Credential Details<a class="headerlink" href="#credential-details" title="Link to this heading"></a></h4>
<p>You may need to specify additional options for specific credential entries. These details can be added after the end of the URL, with multiple details separated by commas (see examples above).</p>
<p>Supported details:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ssh_keyfile=&lt;path&gt;</span></code> - (SFTP) Path to SSH keyfile</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">passive</span></code> - (FTP) Use passive mode</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">active</span></code> - (FTP) Use active mode</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">binary</span></code> - (FTP) Use binary mode</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ascii</span></code> - (FTP) Use ASCII mode</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ssl</span></code> - (FTP) Use SSL/standard FTP</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tls</span></code> - (FTP) Use FTPS with TLS</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prot_p</span></code> - (FTPS) Use a secure data connection for TLS connections (otherwise, clear text is used)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bearer_token=&lt;token&gt;</span></code> (or <code class="docutils literal notranslate"><span class="pre">bt=&lt;token&gt;</span></code>) - (HTTP) Bearer token for authentication</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">login_method=&lt;PLAIN|AMQPLAIN|EXTERNAL|GSSAPI&gt;</span></code> - (AMQP) By default, the login method will be automatically determined. This can be overriden by explicity specifying a login method, which may be required if a broker supports multiple methods and an incorrect one is automatically selected.</p></li>
</ul>
<dl>
<dt>Note::</dt><dd><p>SFTP credentials are optional, in that sarracenia will look in the .ssh directory
and use the normal SSH credentials found there.</p>
<p>These strings are URL encoded, so if an account has a password with a special
character, its URL encoded equivalent can be supplied.  In the last example above,
<strong>%2f</strong> means that the actual password isi: <strong>/dot8</strong>
The next to last password is:  <strong>De:olonize</strong>. ( %3a being the url encoded value for a colon character. )</p>
</dd>
</dl>
</section>
</section>
</section>
<section id="periodic-processing">
<h2>PERIODIC PROCESSING<a class="headerlink" href="#periodic-processing" title="Link to this heading"></a></h2>
<p>Most processing occurs on receipt of a notification message, but there is some periodic maintenance
work that happens every <em>housekeeping</em> interval (default is 5 minutes.)  Evey housekeeping, all of the
configured <em>on_housekeeping</em> plugins are run. By default there are three present:</p>
<blockquote>
<div><ul class="simple">
<li><p>log - prints “housekeeping” in the log.</p></li>
<li><p>nodupe - ages out old entries in the reception cache, to minimize its size.</p></li>
<li><p>memory - checks the process memory usage, and restart if too big.</p></li>
</ul>
</div></blockquote>
<p>The log will contain notification messages from all three plugins every housekeeping interval, and
if additional periodic processing is needed, the user can configure addition
plugins to run with the <em>on_housekeeping</em> option.</p>
<section id="sanity-log-dead-interval-default-1-5-housekeeping">
<h3>sanity_log_dead &lt;interval&gt; (default: 1.5*housekeeping)<a class="headerlink" href="#sanity-log-dead-interval-default-1-5-housekeeping" title="Link to this heading"></a></h3>
<p>The <strong>sanity_log_dead</strong> option sets how long to consider too long before restarting
a component.</p>
</section>
<section id="nodup-ttl-off-on-999-default-off">
<h3>nodup_ttl &lt;off|on|999&gt; (default: off)<a class="headerlink" href="#nodup-ttl-off-on-999-default-off" title="Link to this heading"></a></h3>
<p>The cleanup of expired elements in the duplicate suppression store happens at
each housekeeping.</p>
</section>
</section>
<section id="error-recovery">
<h2>ERROR RECOVERY<a class="headerlink" href="#error-recovery" title="Link to this heading"></a></h2>
<p>The tools are meant to work well unattended, and so when transient errors occur, they do
their best to recover elegantly.  There are timeouts on all operations, and when a failure
is detected, the problem is noted for retry.  Errors can happen at many times:</p>
<blockquote>
<div><ul class="simple">
<li><p>Establishing a connection to the broker.</p></li>
<li><p>losing a connection to the broker</p></li>
<li><p>establishing a connection to the file server for a file (for download or upload.)</p></li>
<li><p>losing a connection to the server.</p></li>
<li><p>during data transfer.</p></li>
</ul>
</div></blockquote>
<p>Initially, the programs try to download (or send) a file a fixed number (<em>attempts</em>, default: 3) times.
If all three attempts to process the file are unsuccessful, then the file is placed in an instance’s
retry file. The program then continues processing of new items. When there are no new items to
process, the program looks for a file to process in the retry queue. It then checks if the file
is so old that it is beyond the <em>retry_expire</em> (default: 2 days). If the file is not expired, then
it triggers a new round of attempts at processing the file. If the attempts fail, it goes back
on the retry queue.</p>
<p>This algorithm ensures that programs do not get stuck on a single bad product that prevents
the rest of the queue from being processed, and allows for reasonable, gradual recovery of
service, allowing fresh data to flow preferentially, and sending old data opportunistically
when there are gaps.</p>
<p>While fast processing of good data is very desirable, it is important to slow down when errors
start occurring. Often errors are load related, and retrying quickly will just make it worse.
Sarracenia uses exponential back-off in many points to avoid overloading a server when there
are errors. The back-off can accumulate to the point where retries could be separated by a minute
or two. Once the server begins responding normally again, the programs will return to normal
processing speed.</p>
</section>
<section id="examples">
<h2>EXAMPLES<a class="headerlink" href="#examples" title="Link to this heading"></a></h2>
<p>Here is a short complete example configuration file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">broker</span> <span class="n">amqps</span><span class="p">:</span><span class="o">//</span><span class="n">dd</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">gc</span><span class="o">.</span><span class="n">ca</span><span class="o">/</span>

<span class="n">subtopic</span> <span class="n">model_gem_global</span><span class="mf">.25</span><span class="n">km</span><span class="o">.</span><span class="n">grib2</span><span class="o">.</span><span class="c1">#</span>
<span class="n">accept</span> <span class="o">.*</span>
</pre></div>
</div>
<p>This above file will connect to the dd.weather.gc.ca broker, connecting as
anonymous with password anonymous (defaults) to obtain notification messages about
files in the <a class="reference external" href="http://dd.weather.gc.ca/model_gem_global/25km/grib2">http://dd.weather.gc.ca/model_gem_global/25km/grib2</a> directory.
All files which arrive in that directory or below it will be downloaded
into the current directory (or just printed to standard output if -n option
was specified.)</p>
<p>A variety of example configuration files are available here:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/MetPX/sarracenia/tree/main/sarracenia/examples">https://github.com/MetPX/sarracenia/tree/main/sarracenia/examples</a></p>
</div></blockquote>
<section id="queues-and-multiple-streams">
<h3>QUEUES and MULTIPLE STREAMS<a class="headerlink" href="#queues-and-multiple-streams" title="Link to this heading"></a></h3>
<p>When executed,  <strong>subscribe</strong>  chooses a queue name, which it writes
to a file named after the configuration file given as an argument to <strong>subscribe</strong>
with a .queue suffix ( .”configfile”.queue).
If subscribe is stopped, the posted notification messages continue to accumulate on the
broker in the queue.  When the program is restarted, it uses the queuename
stored in that file to connect to the same queue, and not lose any notification messages.</p>
<p>File downloads can be parallelized by running multiple subscribes using
the same queue.  The processes will share the queue and each download
part of what has been selected.  Simply launch multiple instances
of subscribe in the same user/directory using the same configuration file.</p>
<p>You can also run several subscribe with different configuration files to
have multiple download streams delivering into the the same directory,
and that download stream can be multi-streamed as well.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While the brokers keep the queues available for some time, Queues take resources on
brokers, and are cleaned up from time to time.  A queue which is not accessed for
a long (implementation dependent) period will be destroyed.  A queue which is not
accessed and has too many (implementation defined) files queued will be destroyed.
Processes which die should be restarted within a reasonable period of time to avoid
loss of notifications.</p>
</div>
</section>
<section id="report-and-report-exchange">
<h3>report and report_exchange<a class="headerlink" href="#report-and-report-exchange" title="Link to this heading"></a></h3>
<p>For each download, by default, an amqp report message is sent back to the broker.
This is done with option :</p>
<ul class="simple">
<li><p><strong>report &lt;boolean&gt;        (default: True)</strong></p></li>
<li><p><strong>report_exchange &lt;report_exchangename&gt; (default: xreport|xs_*username* )</strong></p></li>
</ul>
<p>When a report is generated, it is sent to the configured <em>report_exchange</em>. Administrative
components post directly to <em>xreport</em>, whereas user components post to their own
exchanges (xs_*username*). The report daemons then copy the notification messages to <em>xreport</em> after validation.</p>
<p>These reports are used for delivery tuning and for data sources to generate statistical information.
Set this option to <strong>False</strong>, to prevent generation of reports.</p>
</section>
<section id="instances">
<h3>INSTANCES<a class="headerlink" href="#instances" title="Link to this heading"></a></h3>
<p>Sometimes one instance of a component and configuration is not enough to process &amp; send all available notifications.</p>
<p><strong>instances      &lt;integer&gt;     (default:1)</strong></p>
<p>The instance option allows launching several instances of a component and configuration.
When running sender for example, a number of runtime files are created.
In the ~/.cache/sarra/sender/configName directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>A .sender_configname.state         is created, containing the number instances.
A .sender_configname_$instance.pid is created, containing the PID  of $instance process.
</pre></div>
</div>
<p>In directory ~/.cache/sarra/log:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>A .sender_configname_$instance.log  is created as a log of $instance process.
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>known bug in the management interface <cite>sr &lt;sr.8.rst&gt;_</cite>  means that instance should
always be in the .conf file (not a .inc) and should always be an number
(not a substituted variable or other more complex value.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FIXME: indicate Windows location also… dot files on Windows?</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While the brokers keep the queues available for some time, Queues take resources on
brokers, and are cleaned up from time to time.  A queue which is not
accessed and has too many (implementation defined) files queued will be destroyed.
Processes which die should be restarted within a reasonable period of time to avoid
loss of notifications.  A queue which is not accessed for a long (implementation dependent)
period will be destroyed.</p>
</div>
<section id="vip-active-passive-options">
<h4>vip - ACTIVE/PASSIVE OPTIONS<a class="headerlink" href="#vip-active-passive-options" title="Link to this heading"></a></h4>
<p><strong>sr3</strong> can be used on a single server node, or multiple nodes
could share responsibility. Some other, separately configured, high availability
software presents a <strong>vip</strong> (virtual ip) on the active server. Should
the server go down, the <strong>vip</strong> is moved on another server.
Both servers would run <strong>sr3</strong>. It is for that reason that the
following options were implemented:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>vip          &lt;string&gt;          (None)</strong></p></li>
</ul>
</div></blockquote>
<p>When you run only one <strong>sr3</strong> on one server, these options are not set,
and sr3 will run in ‘standalone mode’.</p>
<p>In the case of clustered brokers, you would set the options for the
moving vip.</p>
<p><strong>vip 153.14.126.3</strong></p>
<p>When <strong>sr3</strong> does not find the vip, it sleeps for 5 seconds and retries.
If it does find the vip, it consumes and processes a notification message and than rechecks for the vip.
if multiple vips are specified, then posession of any of the vips is sufficient
to be declared active.</p>
</section>
<section id="blocksize-value-default-0-auto">
<h4>[–blocksize &lt;value&gt;] (default: 0 (auto))<a class="headerlink" href="#blocksize-value-default-0-auto" title="Link to this heading"></a></h4>
<p>This <strong>blocksize</strong> option controls the partitioning strategy used to post files.
The value should be one of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span> <span class="o">-</span> <span class="n">autocompute</span> <span class="n">an</span> <span class="n">appropriate</span> <span class="n">partitioning</span> <span class="n">strategy</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="mi">1</span> <span class="o">-</span> <span class="n">always</span> <span class="n">send</span> <span class="n">entire</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">single</span> <span class="n">part</span><span class="o">.</span>
<span class="o">&lt;</span><span class="n">blocksize</span><span class="o">&gt;</span> <span class="o">-</span> <span class="n">used</span> <span class="n">a</span> <span class="n">fixed</span> <span class="n">partition</span> <span class="n">size</span> <span class="p">(</span><span class="n">example</span> <span class="n">size</span><span class="p">:</span> <span class="mi">1</span><span class="n">M</span> <span class="p">)</span>
</pre></div>
</div>
<p>Files can be announced as multiple parts.  Each part has a separate checksum.
The parts and their checksums are stored in the cache. Partitions can traverse
the network separately, and in parallel.  When files change, transfers are
optimized by only sending parts which have changed.</p>
<p>The <em>outlet</em> option allows the final output to be other than a post.
See <a class="reference external" href="../Reference/sr3_cpump.1.html">sr3_cpump(1)</a> for details.</p>
</section>
<section id="pbd-post-basedir-path-optional">
<h4>[-pbd|–post_baseDir &lt;path&gt;] (optional)<a class="headerlink" href="#pbd-post-basedir-path-optional" title="Link to this heading"></a></h4>
<p>The <em>post_baseDir</em> option supplies the directory path that, when combined (or found)
in the given <em>path</em>, gives the local absolute path to the data file to be posted.
The <em>post_baseDir</em> part of the path will be removed from the posted notification message.
For sftp urls it can be appropriate to specify a path relative to a user account.
Example of that usage would be:  -pbd ~user  -url sftp:user&#64;host
For file: url’s, baseDir is usually not appropriate.  To post an absolute path,
omit the -pbd setting, and just specify the complete path as an argument.</p>
</section>
<section id="post-baseurl-url-mandatory">
<h4>post_baseUrl &lt;url&gt; (MANDATORY)<a class="headerlink" href="#post-baseurl-url-mandatory" title="Link to this heading"></a></h4>
<p>The <strong>post_baseUrl</strong> option sets how to get the file… it defines the protocol,
host, port, and optionally, the user. It is best practice to not include
passwords in urls.</p>
</section>
<section id="post-exchange-name-default-xpublic">
<h4>post_exchange &lt;name&gt; (default: xpublic)<a class="headerlink" href="#post-exchange-name-default-xpublic" title="Link to this heading"></a></h4>
<p>The <strong>post_exchange</strong> option set under which exchange the new notification
will be posted.  In most cases it is ‘xpublic’.</p>
<p>Whenever a publish happens for a product, a user can set to trigger a script.
The option <strong>on_post</strong> would be used to do such a setup.</p>
</section>
<section id="post-exchangesplit-number-default-0">
<h4>post_exchangeSplit   &lt;number&gt;   (default: 0)<a class="headerlink" href="#post-exchangesplit-number-default-0" title="Link to this heading"></a></h4>
<p>The <strong>post_exchangeSplit</strong> option appends a two digit suffix resulting from
hashing the last character of the checksum to the post_exchange name,
in order to divide the output amongst a number of exchanges.  This is currently used
in high traffic pumps to allow multiple instances of winnow, which cannot be
instanced in the normal way.  Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">post_exchangeSplit</span> <span class="mi">5</span>
<span class="n">post_exchange</span> <span class="n">xwinnow</span>
</pre></div>
</div>
<p>will result in posting notification messages to five exchanges named: xwinnow00, xwinnow01,
xwinnow02, xwinnow03 and xwinnow04, where each exchange will receive only one fifth
of the total flow.</p>
</section>
</section>
<section id="remote-configurations">
<h3>Remote Configurations<a class="headerlink" href="#remote-configurations" title="Link to this heading"></a></h3>
<p>One can specify URI’s as configuration files, rather than local files. Example:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>–config http://dd.weather.gc.ca/alerts/doc/cap.conf</strong></p></li>
</ul>
</div></blockquote>
<p>On startup, subscribe checks if the local file cap.conf exists in the
local configuration directory.  If it does, then the file will be read to find
a line like so:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>–remote_config_url http://dd.weather.gc.ca/alerts/doc/cap.conf</strong></p></li>
</ul>
</div></blockquote>
<p>In which case, it will check the remote URL and compare the modification time
of the remote file against the local one. The remote file is not newer, or cannot
be reached, then the component will continue with the local file.</p>
<p>If either the remote file is newer, or there is no local file, it will be downloaded,
and the remote_config_url line will be prepended to it, so that it will continue
to self-update in future.</p>
</section>
<section id="extensions">
<h3>Extensions<a class="headerlink" href="#extensions" title="Link to this heading"></a></h3>
<p>One can override or add functionality with python scripting.</p>
<p>Sarracenia comes with a variety of example plugins, and uses some to implement base functionality,
such as logging (implemented by default use of msg_log, file_log, post_log plugins):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 list fcb
Provided callback classes: ( /home/peter/Sarracenia/sr3/sarracenia )
flowcb/filter/deleteflowfiles.py flowcb/filter/fdelay.py          flowcb/filter/pclean_f90.py      flowcb/filter/pclean_f92.py
flowcb/gather/file.py            flowcb/gather/message.py         flowcb/line_log.py               flowcb/line_mode.py
flowcb/log.py                    flowcb/nodupe.py                 flowcb/pclean.py                 flowcb/post/message.py
flowcb/retry.py                  flowcb/sample.py                 flowcb/script.py                 flowcb/v2wrapper.py
flowcb/work/rxpipe.py
$
</pre></div>
</div>
<p>Users can place their own scripts in the script sub-directory of their config directory
tree ( on Linux, the ~/.config/sarra/plugins).</p>
<section id="flowcallback-and-flowcallbackprepend-class">
<h4>flowCallback and flowCallbackPrepend &lt;class&gt;<a class="headerlink" href="#flowcallback-and-flowcallbackprepend-class" title="Link to this heading"></a></h4>
<p>The flowCallback directive takes a class to load can scan for entry points as an argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flowCallback</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">flowcb</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">Log</span>
</pre></div>
</div>
<p>With this directive in a configuration file, the Log class found in installed package will be used.
That module logs messages <em>after_accept</em> (after notification messages have passed through the accept/reject masks.)
and the <em>after_work</em> (after the file has been downloaded or sent). Here is the source code
for that callback class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">sarracenia.flowcb</span> <span class="kn">import</span> <span class="n">FlowCB</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Log</span><span class="p">(</span><span class="n">FlowCB</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">options</span><span class="p">):</span>

      <span class="c1"># FIXME: should a logging module have a logLevel setting?</span>
      <span class="c1">#        just put in a cookie cutter for now...</span>
      <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="s1">&#39;logLevel&#39;</span><span class="p">):</span>
          <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">logging</span><span class="p">,</span> <span class="n">options</span><span class="o">.</span><span class="n">logLevel</span><span class="o">.</span><span class="n">upper</span><span class="p">()))</span>
      <span class="k">else</span><span class="p">:</span>
          <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">after_accept</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">worklist</span><span class="p">):</span>
      <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">worklist</span><span class="o">.</span><span class="n">incoming</span><span class="p">:</span>
          <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;accepted: </span><span class="si">%s</span><span class="s2"> &quot;</span> <span class="o">%</span> <span class="n">msg_dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="p">)</span>

  <span class="k">def</span> <span class="nf">after_work</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">worklist</span><span class="p">):</span>
      <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">worklist</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
          <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;worked successfully: </span><span class="si">%s</span><span class="s2"> &quot;</span> <span class="o">%</span> <span class="n">msg</span><span class="o">.</span><span class="n">dumps</span><span class="p">()</span> <span class="p">)</span>
</pre></div>
</div>
<p>If you have multiple callbacks configured, they will be called in the same order they are
configuration file. components in sr3 are often differentiated by the callbacks configured.
For example, a <em>watch</em> is a flow with sarracenia.flowcb.gather.file.File class that
is used to scan directories. A Common need when a data source is not easily accessed
with python scripts is to use the script callback:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flowCallbackPrepend</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">flowcb</span><span class="o">.</span><span class="n">script</span><span class="o">.</span><span class="n">Script</span>

<span class="n">script_gather</span> <span class="n">get_weird_data</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>Using the <em>_prepend</em> variant of the <em>flowCallback</em> option, will have the Script callback
class’s entry point, before the File callback… So A script will be executed, and then
the directory will be checked for new files.  Here is part of the Script callback class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">sarracenia.flowcb</span> <span class="kn">import</span> <span class="n">FlowCB</span>
<span class="kn">import</span> <span class="nn">subprocess</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Script</span><span class="p">(</span><span class="n">FlowCB</span><span class="p">):</span>

   <span class="o">.</span>
   <span class="o">.</span>
   <span class="o">.</span>

    <span class="k">def</span> <span class="nf">run_script</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">script</span> <span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">o</span><span class="o">.</span><span class="n">script_gather</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;subprocess.run failed err=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exception details:&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">gather</span><span class="p">(</span><span class="bp">self</span> <span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">o</span><span class="p">,</span> <span class="s1">&#39;script_gather&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">o</span><span class="o">.</span><span class="n">script_gather</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">run_script</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">o</span><span class="o">.</span><span class="n">script_gather</span> <span class="p">)</span>
        <span class="k">return</span> <span class="p">[]</span>
</pre></div>
</div>
</section>
</section>
<section id="identity">
<h3>Identity<a class="headerlink" href="#identity" title="Link to this heading"></a></h3>
<p>One can use the <em>import</em> directive to add new checksum algorithms by sub-classing
sarracenia.identity.Identity.</p>
</section>
<section id="transfer">
<h3>Transfer<a class="headerlink" href="#transfer" title="Link to this heading"></a></h3>
<p>One can add support for additional methods of downloading data by sub-classing
sarracenia.transfer.Transfer.</p>
<p>Transfer protocol scripts should be declared using the <strong>import</strong> option.
Aside the targetted built-in function(s), a module <strong>registered_as</strong> that defines
a list of protocols that these functions provide.  Example :</p>
<dl class="simple">
<dt>def registered_as(self) :</dt><dd><p>return [‘ftp’,’ftps’]</p>
</dd>
</dl>
<p>See the <a class="reference internal" href="SarraPluginDev.html"><span class="doc">Programming Guide</span></a> for more information on Extension development.</p>
</section>
<section id="roles-feeder-admin-declare">
<h3>ROLES - feeder/admin/declare<a class="headerlink" href="#roles-feeder-admin-declare" title="Link to this heading"></a></h3>
<p><em>of interest only to administrators</em></p>
<p>Administrative options are set using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">edit</span> <span class="o">~/.</span><span class="n">config</span><span class="o">/</span><span class="n">sr3</span><span class="o">/</span><span class="n">admin</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>The <em>feeder</em> option specifies the account used by default system transfers for components such as
shovel, sarra and sender (when posting).</p>
<ul class="simple">
<li><p><strong>feeder    amqp{s}://&lt;user&gt;:&lt;pw&gt;&#64;&lt;post_brokerhost&gt;[:port]/&lt;vhost&gt;</strong></p></li>
<li><p><strong>admin   &lt;name&gt;        (default: None)</strong></p></li>
</ul>
<p>The admin user is used to do maintenance operations on the pump such as defining
the other users. Most users are defined using the <em>declare</em> option. The feeder can also be declared in that
way.</p>
<ul class="simple">
<li><p><strong>declare &lt;role&gt; &lt;name&gt;   (no defaults)</strong></p></li>
</ul>
<section id="subscriber">
<h4>subscriber<a class="headerlink" href="#subscriber" title="Link to this heading"></a></h4>
<blockquote>
<div><p>A subscriber is user that can only subscribe to data and return report messages. Subscribers are
not permitted to inject data.  Each subscriber has an xs_&lt;user&gt; named exchange on the pump,
where if a user is named <em>Acme</em>, the corresponding exchange will be <em>xs_Acme</em>.  This exchange
is where an subscribe process will send its report messages.</p>
<p>By convention/default, the <em>anonymous</em> user is created on all pumps to permit subscription without
a specific account.</p>
</div></blockquote>
</section>
<section id="source">
<h4>source<a class="headerlink" href="#source" title="Link to this heading"></a></h4>
<blockquote>
<div><p>A user permitted to subscribe or originate data.  A source does not necessarily represent
one person or type of data, but rather an organization responsible for the data produced.
So if an organization gathers and makes available ten kinds of data with a single contact
email or phone number for questions about the data and its availability, then all of
those collection activities might use a single ‘source’ account.</p>
<p>Each source gets a xs_&lt;user&gt; exchange for injection of data posts, and, similar to a subscriber
to send report messages about processing and receipt of data. Source may also have an xl_&lt;user&gt;
exchange where, as per report routing configurations, report messages of consumers will be sent.</p>
</div></blockquote>
</section>
<section id="feeder">
<h4>feeder<a class="headerlink" href="#feeder" title="Link to this heading"></a></h4>
<blockquote>
<div><p>A user permitted to write to any exchange. Sort of an administrative flow user, meant to pump
notification messages when no ordinary source or subscriber is appropriate to do so.  Is to be used in
preference to administrator accounts to run flows.</p>
</div></blockquote>
<p>User credentials are placed in the credentials files, and <em>audit</em> will update
the broker to accept what is specified in that file, as long as the admin password is
already correct.</p>
</section>
</section>
<section id="configuration-files">
<h3>CONFIGURATION FILES<a class="headerlink" href="#configuration-files" title="Link to this heading"></a></h3>
<p>While one can manage configuration files using the <em>add</em>, <em>remove</em>,
<em>list</em>, <em>edit</em>, <em>disable</em>, and <em>enable</em> actions, one can also do all
of the same activities manually by manipulating files in the settings
directory.  The configuration files for an sr_subscribe configuration
called <em>myflow</em> would be here:</p>
<blockquote>
<div><ul class="simple">
<li><p>linux: ~/.config/sarra/subscribe/myflow.conf (as per: <a class="reference external" href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-0.6.rst">XDG Open Directory Specication</a> )</p></li>
<li><p>Windows: %AppDir%/science.gc.ca/sarra/myflow.conf , this might be:
C:UserspeterAppDataLocalscience.gc.casarramyflow.conf</p></li>
<li><p>MAC: FIXME.</p></li>
</ul>
</div></blockquote>
<p>The top of the tree has  <em>~/.config/sarra/default.conf</em> which contains settings that
are read as defaults for any component on start up.  In the same directory, <em>~/.config/sarra/credentials.conf</em>
contains credentials (passwords) to be used by sarracenia ( <a class="reference internal" href="#credentials">CREDENTIALS</a> for details. )</p>
<p>One can also set the XDG_CONFIG_HOME environment variable to override default placement, or
individual configuration files can be placed in any directory and invoked with the
complete path.   When components are invoked, the provided file is interpreted as a
file path (with a .conf suffix assumed.)  If it is not found as a file path, then the
component will look in the component’s config directory ( <strong>config_dir</strong> / <strong>component</strong> )
for a matching .conf file.</p>
<p>If it is still not found, it will look for it in the site config dir
(linux: /usr/share/default/sarra/<strong>component</strong>).</p>
<p>Finally, if the user has set option <strong>remote_config</strong> to True and if he has
configured web sites where configurations can be found (option <strong>remote_config_url</strong>),
The program will try to download the named file from each site until it finds one.
If successful, the file is downloaded to <strong>config_dir/Downloads</strong> and interpreted
by the program from there.  There is a similar process for all <em>plugins</em> that can
be interpreted and executed within sarracenia components.  Components will first
look in the <em>plugins</em> directory in the users config tree, then in the site
directory, then in the sarracenia package itself, and finally it will look remotely.</p>
</section>
<section id="sundew-compatibility-options">
<h3>SUNDEW COMPATIBILITY OPTIONS<a class="headerlink" href="#sundew-compatibility-options" title="Link to this heading"></a></h3>
<p>For compatibility with Sundew, there are some additional delivery options which can be specified.</p>
<section id="destfn-script-script-default-none">
<h4>destfn_script &lt;script&gt; (default:None)<a class="headerlink" href="#destfn-script-script-default-none" title="Link to this heading"></a></h4>
<p>This option defines a script to be run when everything is ready
for the delivery of the product.  The script receives the sr_sender class
instance.  The script takes the parent as an argument, and for example, any
modification to  <strong>parent.msg.new_file</strong>  will change the name of the file written locally.</p>
</section>
<section id="filename-keyword-default-whatfn">
<h4>filename &lt;keyword&gt; (default:WHATFN)<a class="headerlink" href="#filename-keyword-default-whatfn" title="Link to this heading"></a></h4>
<p>From <strong>metpx-sundew</strong> the support of this option give all sorts of possibilities
for setting the remote filename. Some <strong>keywords</strong> are based on the fact that
<strong>metpx-sundew</strong> filenames are five (to six) fields strings separated by for colons.</p>
<p>The default value on Sundew is NONESENDER, but in the interest of discouraging use
of colon separation in files, the default in Sarracenia is WHATFN</p>
<p>The possible keywords are :</p>
<dl class="simple">
<dt><strong>None</strong></dt><dd><ul class="simple">
<li><p>no Sundew-style filename processing. Leave the filename alone.
(Not the same as NONE, described below.)</p></li>
</ul>
</dd>
<dt><strong>WHATFN</strong></dt><dd><ul class="simple">
<li><p>the first part of the Sundew filename (string before first :)</p></li>
</ul>
</dd>
<dt><strong>HEADFN</strong></dt><dd><ul class="simple">
<li><p>HEADER part of the sundew filename</p></li>
</ul>
</dd>
<dt><strong>SENDER</strong></dt><dd><ul class="simple">
<li><p>the Sundew filename may end with a string SENDER=&lt;string&gt; in this case the &lt;string&gt; will be the remote filename</p></li>
</ul>
</dd>
<dt><strong>NONE</strong></dt><dd><ul class="simple">
<li><p>deliver with the complete Sundew filename (without :SENDER=…)</p></li>
</ul>
</dd>
<dt><strong>NONESENDER</strong></dt><dd><ul class="simple">
<li><p>deliver with the complete Sundew filename (with :SENDER=…)</p></li>
</ul>
</dd>
<dt><strong>TIME</strong></dt><dd><ul class="simple">
<li><p>time stamp appended to filename. Example of use: WHATFN:TIME</p></li>
</ul>
</dd>
<dt><strong>DESTFN=str</strong></dt><dd><ul class="simple">
<li><p>direct filename declaration str</p></li>
</ul>
</dd>
<dt><strong>SATNET=1,2,3,A</strong></dt><dd><ul class="simple">
<li><p>cmc internal satnet application parameters</p></li>
</ul>
</dd>
<dt><strong>DESTFNSCRIPT=script.py</strong></dt><dd><ul class="simple">
<li><p>invoke a script (same as destfn_script) to generate the name of the file to write</p></li>
</ul>
</dd>
</dl>
<p><strong>accept &lt;regexp pattern&gt; [&lt;keyword&gt;]</strong></p>
<p>keyword can be added to the <strong>accept</strong> option. The keyword is any one of the <strong>filename</strong>
options.  A notification message that matched against the accept regexp pattern, will have its remote_file
plied this keyword option.  This keyword has priority over the preceeding <strong>filename</strong> one.</p>
<p>The <strong>regexp pattern</strong> can be use to set directory parts if part of the notification message is put
to parenthesis. <strong>sr_sender</strong> can use these parts to build the directory name. The
rst enclosed parenthesis strings will replace keyword <strong>${0}</strong> in the directory name…
the second <strong>${1}</strong> etc.</p>
<p>Example of use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>filename NONE

directory /this/first/target/directory

accept .*file.*type1.*

directory /this/target/directory

accept .*file.*type2.*

accept .*file.*type3.*  DESTFN=file_of_type3

directory /this/${0}/pattern/${1}/directory

accept .*(2016....).*(RAW.*GRIB).*
</pre></div>
</div>
<p>A selected notification message by the first accept would be delivered unchanged to the first directory.</p>
<p>A selected notification message by the second accept would be delivered unchanged to the second directory.</p>
<p>A selected notification message by the third accept would be renamed “file_of_type3” in the second directory.</p>
<p>A selected notification message by the forth accept would be delivered unchanged to a directory.</p>
<p>It’s named  <em>/this/20160123/pattern/RAW_MERGER_GRIB/directory</em> if the notification message would have a notice like:</p>
<p><strong>20150813161959.854 http://this.pump.com/ relative/path/to/20160123_product_RAW_MERGER_GRIB_from_CMC</strong></p>
</section>
<section id="field-replacements">
<h4>Field Replacements<a class="headerlink" href="#field-replacements" title="Link to this heading"></a></h4>
<p>In MetPX Sundew, there is a much more strict file naming standard, specialised for use with
World Meteorological Organization (WMO) data.   Note that the file naming convention predates, and
bears no relation to the WMO file naming convention currently approved, but is strictly an internal
format.   The files are separated into six fields by colon characters.  The first field, DESTFN,
gives the WMO (386 style) Abbreviated Header Line (AHL) with underscores replacing blanks:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TTAAii</span> <span class="n">CCCC</span> <span class="n">YYGGGg</span> <span class="n">BBB</span> <span class="o">...</span>
</pre></div>
</div>
<p>(see WMO manuals for details) followed by numbers to render the product unique (as in practice,
though not in theory, there are a large number of products which have the same identifiers).
The meanings of the fifth field is a priority, and the last field is a date/time stamp.
The other fields vary in meaning depending on context.  A sample file name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SACN43_CWAO_012000_AAA_41613</span><span class="p">:</span><span class="n">ncp1</span><span class="p">:</span><span class="n">CWAO</span><span class="p">:</span><span class="n">SA</span><span class="p">:</span><span class="mf">3.</span><span class="n">A</span><span class="o">.</span><span class="n">I</span><span class="o">.</span><span class="n">E</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span><span class="mi">20050201200339</span>
</pre></div>
</div>
<p>If a file is sent to sarracenia and it is named according to the Sundew conventions, then the
following substitution fields are available:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>${T1}    replace by bulletin&#39;s T1
${T2}    replace by bulletin&#39;s T2
${A1}    replace by bulletin&#39;s A1
${A2}    replace by bulletin&#39;s A2
${ii}    replace by bulletin&#39;s ii
${CCCC}  replace by bulletin&#39;s CCCC
${YY}    replace by bulletin&#39;s YY   (obs. day)
${GG}    replace by bulletin&#39;s GG   (obs. hour)
${Gg}    replace by bulletin&#39;s Gg   (obs. minute)
${BBB}   replace by bulletin&#39;s bbb
${RYYYY} replace by reception year
${RMM}   replace by reception month
${RDD}   replace by reception day
${RHH}   replace by reception hour
${RMN}   replace by reception minutes
${RSS}   replace by reception second
</pre></div>
</div>
<p>The ‘R’ fields come from the sixth field, and the others come from the first one.
When data is injected into sarracenia from Sundew, the <em>sundew_extension</em> notification message header
will provide the source for these substitions even if the fields have been removed
from the delivered file names.</p>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Concepts.html" class="btn btn-neutral float-left" title="General Sarracenia Concepts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="SarraPluginDev.html" class="btn btn-neutral float-right" title="Sarracenia Programming Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Shared Services Canada, Government of Canada, GPLv2.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>