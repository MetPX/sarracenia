metpx-sarracenia (2.19.04b1) unstable; urgency=medium

  * new:    adding WMO_mesh_post example.
  * bugfix: regression all posts in b6 were v02 (v03 inadvertantly disabled.)
  * bugfix: print improvements.
  * bugfix: there was an issue with extended attribute in checksums.

 -- Peter Silva <peter.silva@canada.ca>  Mon, 01 Apr 2019 23:16:37 -0400

metpx-sarracenia (2.19.03b6) unstable; urgency=medium

  * new:    made code use instance variables instead of repeatedly parsing
  *         elements of the message: topic_prefix->version, sum-> event.
  *         more robust/easier to maintain.
  * bugfix: updated WMO_mesh examples to use v03 and /var/www/html (as per feedback.)
  * new:    add post_override_del option to post_override plugin.
  *         allows deletion of headers on post.
  * bugfix: Issue #175 documentation needs to use amqps for dd.weather, not amqp anymore.
  * new:    wmo_mesh example now deletes a bunch of headers to shorten & simplify messages.
  * new:    switching http port in flow test to 8001.  8000 is too popular.
  * new:    switching flow_test to use hpfx.collab.science.gc.ca instead of dd.weather.gc.ca
  * bugfix: Issue #168 have httpd unit test retrieve pick a file <= 2kb.  Big files 
  *         were causing hangs in the flow test... this is one fix, but not enough to close
  *         the bug.
  * new:    Issue #54 is finally closed.
  * new:    Issue #54 added xattr_disable to turn off extended attributes feature.
  * new:    Issue #54 added version of extended attributes for NTFS.
 
 -- Peter Silva <peter.silva@canada.ca>  Sun, 31 Mar 2019 16:13:54 -0400

metpx-sarracenia (2.19.03b5) unstable; urgency=medium

  * bugfix: transparently accept setxattr failure for readonly files.
  * bugfix: several bugs with roundtripping v03->v02 checksums.
  * bugfix: changed documentation for rename (used what is changed by strip option) 
  * bugfix: found issues with arbitrary-application checksum
  * bugfix: mode/atime/mtim restoration was missing for inlined data.
  * new:    upgrade wmo_mesh mqtt publishing plugin to work with v03

 -- Peter Silva <peter.silva@canada.ca>  Sun, 24 Mar 2019 23:26:56 -0400

metpx-sarracenia (2.19.03b4) unstable; urgency=medium

  * bugfix: conversion from v02 to v03 was broken somewhere else.

 -- Peter Silva <peter.silva@canada.ca>  Thu, 21 Mar 2019 00:59:08 -0400

metpx-sarracenia (2.19.03b3) unstable; urgency=medium

  * bugfix: v02 to v03 conversion was broken. 

 -- Peter Silva <peter.silva@canada.ca>  Tue, 19 Mar 2019 20:35:46 -0400

metpx-sarracenia (2.19.03b2) unstable; urgency=medium

  * new:    issue #134 added on_data plugin entry point, to allow data tranformation.
  * new:    removed recomputer_chksum setting. application now decides on its own.
  * new:    added post_on_start option so control whether sr_watch posts all files on startup.
  * bugfix: issue #172 add inlining of data when the header is missing.  
  * dev:    issue #159 Contiguous Integration with travis-ci added, improved testing.
  *         testing of four different python versions now automated.
  * new:    added msg_rawlog to allow clearer viewing of v02 and v03 messages.

 -- Peter Silva <peter.silva@canada.ca>  Sun, 17 Mar 2019 14:03:21 -0400

metpx-sarracenia (2.19.03b1) unstable; urgency=medium

  * new:    issue #166: Added *size* and *blocks* added to v03.post format.
  * bugfix: removed some incorrect ERROR messages (originally inserted to aid debugging.)
  * bugfix: issue #162: use of python-amqp broken on ubuntu <= 16.04 because *connect* call missing.
  * bugfix: issue #160: cleaned up v03 so it has no *sum* header (which should only be present in v02)

 -- Peter Silva <peter.silva@canada.ca>  Sat, 09 Mar 2019 01:11:35 -0500

metpx-sarracenia (2.19.02b3) unstable; urgency=medium

  *bugfix: issue #163: use of python-amqp broken on ubuntu <= 16.04 because *connect* 
  *        call missing. 

 -- Peter Silva <peter.silva@canada.ca>  Wed, 27 Feb 2019 14:38:43 -0500

metpx-sarracenia (2.19.02b2) unstable; urgency=medium

  * new:    implemented WMO expert team on computing and telecommunication systems
  *         (ETCTS, latest meeting: 2019/02) recommendations for changes to v03 format.
  * new:    ETCTS201902 v03 message body is a single JSON *object* (like a python *dictionary*)
  * new:    issue #146 ETCTS201902 v03 timestamps now have a "T" in them.
  * new:    issue #148 ETCTS201902 v03 *sum* header changed to *integrity*, encoding changed from hex 
  *         to base64.
  * new:    issue #147 ETCTS201902 v03 added **inline** support to include file data in the announcements.
  *         data is encoded in either utf-8 or base64.
  * new:    issue #153 log rotation interval can now be set. Minues if you like.
  * bugfix: issue #140 messages on console instead of log.
  *

 -- Peter Silva <peter.silva@canada.ca>  Sat, 23 Feb 2019 08:33:36 -0500

metpx-sarracenia (2.19.02b1) unstable; urgency=medium

  * new:    Added checksum caching in an extended file attribute (from Issue #54) 
  * new:    Issue #130 - moved to new amqp library protocol changed from 0.8 to 0.9.1
  * new:    exp_2mqtt.py -> bridge to export to MQTT brokers.
  * new:    sample configuration: WMO_Sketch_2mqtt.conf 
  * new:    windows installer available. Issue #122
  * bugfix: windows Issue #111 - now works with drive specfications (C:)
  * bugfix: debian package name, removed python3- prefix matches pypi, 
  *         and better compliance with debian standards.
  * bugfix: *remove* wouldn't in some circumstances. (bug from in v2.19.01b1)

 -- Peter Silva <peter.silva@canada.ca>  Wed, 06 Feb 2019 22:15:10 -0500

metpx-sarracenia (2.19.01b1) unstable; urgency=medium

  * new:    optionally produce and consume experimental v03.post messages, 
  *         headers now in body in JSON, removing 255 character limit.
  * new:    save/restore format is now the same as the v03 payload.
  *         (still reads old ones)
  * new:    add post_topic_prefix setting (matches existing consumer topic_prefix)
  * new:    added windows_run exe|pyw|py option to allow choosing of how components run.
  *         one can invoke .exe files, or the script files with pythonw or python exes.
  * new:    added suppress_duplicates_basis path|name|data to tune cache for use cases.
  * bugfix: added documentation of preserve_time option (was missing.)
  * bugfix: if *preserve_time* is off, posts will not have *atime* and *mtime* headers
  * bugfix: if *preserve_mode* is off, posts will not have *mode* 
  * bugfix: print a useful message if invalids sum algorithm specified.
  * bugfix: change cleanup, setup, declare to connect once and fail, rather than hang.
  * bugfix: when sr_post is a one-shot configuration, status makes no sense.

 -- Peter Silva <peter.silva@canada.ca>  Thu, 17 Jan 2019 17:15:21 -0500

metpx-sarracenia (2.18.12b4) unstable; urgency=medium

  * new: print exceptions on failure of makedirs, so "permission denied" is obvious
  * documentation: shim\_ options for sarrac
  * documentation: made importance of ordering between exchange and subtopic options clearer 
  * documentation: change installation instructions so that paramiko is always installed.
  * documentation: removed deprecation of *rename* header, there are valid use cases for it.
  * documentation: extensive revision of mesh_gts briefing.
  * bugfix: in pitcher_client.conf sample config, order of echange_suffix and subtopic option corrected.
  * bugfix: copyright is GPLv2 only.  Notices incorrectly listed GPLv2 OR LATER.
  * bugfix: more progress on issue #54 (application-defined checksums with extended attributes.)

 -- Peter Silva <peter.silva@canada.ca>  Sat, 15 Dec 2018 13:04:13 -0500

metpx-sarracenia (2.18.11b6) unstable; urgency=medium

  * missed a commit... just completing b5 changes... 

 -- Peter Silva <peter.silva@canada.ca>  Tue, 27 Nov 2018 15:20:18 -0500

metpx-sarracenia (2.18.11b5) unstable; urgency=medium

  * revert xattr dependency, causing issues on windows and older linux. 

 -- Peter Silva <peter.silva@canada.ca>  Tue, 27 Nov 2018 13:41:03 -0500

metpx-sarracenia (2.18.11b4) unstable; urgency=medium

  * revert depedency on paramiko which breaks build on ubuntu 14.04.
  * adding a warning about backslashes in paths on windows

 -- Peter Silva <peter.silva@canada.ca>  Sat, 24 Nov 2018 23:16:14 -0500

metpx-sarracenia (2.18.11b3) unstable; urgency=medium

  *bugfix: windows dependencies corrected. 

 -- Peter Silva <peter.silva@canada.ca>  Fri, 23 Nov 2018 01:21:41 -0500

metpx-sarracenia (2.18.11b2) unstable; urgency=medium

  * bugfix:  windows: Issue #54 support is broken on windows, disabled there.
  *          print slashes the right way round on windows in more cases.

 -- Peter Silva <peter.silva@canada.ca>  Wed, 21 Nov 2018 23:04:49 -0500

metpx-sarracenia (2.18.11b1) unstable; urgency=medium

  * New:     Issue #54 initial support for *fake* (application defined) checksums.
  *
  * bugfix:  Issue #118 windows commands started from cmd.exe exit when window closed.
  *          Issue #113 crash on sr_post/watch with post_exchange_split
  *          Issue #112 windows log rollover 
  *          Issue #101 windows git checkout corruption 

 -- Peter Silva <peter.silva@canada.ca>  Wed, 21 Nov 2018 13:35:06 -0500

metpx-sarracenia (2.18.10b2) unstable; urgency=medium

  * new      Issue #106 plugins for hydrometric forecast data acquisition.
  *          now have many more examples of polls.
  * bugfix:  Issue #110 has_vip does not find vips.
  *          unit tests referred to non SSL datamart, were broken
  *          when it was de-commissioned.

 -- Peter Silva <peter.silva@canada.ca>  Wed, 31 Oct 2018 16:33:41 -0400

metpx-sarracenia (2.18.10b1) unstable; urgency=medium

  * bugfix   corruption in cache cleaning introduced by pathname encoding.
  * new      email ingest support added ( Issue #59 )


 -- Peter Silva <peter.silva@canada.ca>  Fri, 05 Oct 2018 18:02:47 -0400

metpx-sarracenia (2.18.09b2) unstable; urgency=medium

  * bugfix   fixed duplicate suppression corruption when files have spaces in their names.
  * bugfix   on windows: many issues with on \ vs. / addressed.
  * bugfix   on windows, *edit* directive now works using notepad.exe by default.
  * bugfix   #100 on windows, *add* adds carriage returns to example files added, so notepad is happy.
  * bugfix   on windows, *log* now works.
  * bugfix   on windows, *list* now works for individual files.
  * new      list now prints out log directory (which is hard to guess on windows)
  * bugfix   examples for sr_Pitcher use case where inaccurate.
  * bugfix   issue #99 *list* missed some items it should have listed.
  * bugfix   *list* no longer list dot files or those ending in ~ (tmp/work/hidden files)


 -- Peter Silva <peter.silva@canada.ca>  Wed, 19 Sep 2018 21:02:22 -0400

metpx-sarracenia (2.18.09b1) unstable; urgency=medium

  * disabling timeouts on windows, as they were not working anyways.
  * added ${DD} to substitutions in directives
  * added --version option. ( issue #25 )
  * added rename option. ( Issue #92 )
  * added globbing to include directive ( Issue #31 )
  * many corrections to French documentation.
  * bugfix issues #85 #86 
 

 -- Peter Silva <peter.silva@canada.ca>  Thu, 13 Sep 2018 23:34:52 -0400

metpx-sarracenia (2.18.08b1) unstable; urgency=medium

  * bugfix    issue #76 sftp login passwords broken when any keys present. (from Marie!)
  *           updated configuration for ECCC RDPS (from Sandrine.)
  *           close_fds=false for older python to fix flow_test on ubuntu 14.04.
  *
  *    new    NEXRAD AWS polling (from Marie!)
  *           more plugin documentation. 
  *           dd.weather.gc.ca polling migrated to amqps.
  *           catalogued two contributed implementations (Thanks Canberk & Tanner)
  *           issue #80: mirror/strip/flatten affect each accept, rather than global.


 -- Peter Silva <peter.silva@canada.ca>  Thu, 09 Aug 2018 22:53:54 -0400

metpx-sarracenia (2.18.07b3) unstable; urgency=medium

  * bugfix     regression for subprocess api change @ V3.5

 -- Peter Silva <peter.silva@canada.ca>  Tue, 17 Jul 2018 11:51:15 -0400

metpx-sarracenia (2.18.07b2) unstable; urgency=medium

  * bugfix      HPC mirroring reports crash in retry logic, work-around,
  *             add try/except around it.
  *             retry_ttl unit conversion error (was comparing milliseconds to seconds.)
  * new         poll_email_fetch - query and download from mailboxes. From Marie!
  *

 -- Peter Silva <peter.silva@canada.ca>  Mon, 16 Jul 2018 00:17:00 -0400

metpx-sarracenia (2.18.07b1) unstable; urgency=medium

  * bugfix      sr_audit now fixes missing instances. (issue #62 & #63 )
  *             two different crashes fixed in flow_test.sh
  *             filter_wmo2msc directory tree naming improved ( issue #60 )
  *             many documentation improvements. (Alain & Marie)
  * new         enhanced parsing of date substitution (issue #55 Wahaj!)
  *             now have program settings audit.conf  (issue #64 )
  *             more output of plugin programs present in logs (issue #63)

 -- Peter Silva <peter.silva@canada.ca>  Thu, 12 Jul 2018 20:26:59 -0400

metpx-sarracenia (2.18.06b2) unstable; urgency=medium

  *bugfix	Jun's do_poll fix. 

 -- Peter Silva <peter.silva@canada.ca>  Tue, 12 Jun 2018 18:42:37 -0400

metpx-sarracenia (2.18.06b1) unstable; urgency=medium

  * bugfix      sr_audit now runs for all users (restarts crashed components.)
  * new         start post (sleep <= 0) now does nothing.
  *             tested and added build instructions for RPM systems.
  * doc         French docs done.
  *             *sci-fi* (future planned features) removed from docs.
  *             website migrated from sf.net to git repo ones (github, gitlab)

 -- Peter Silva <peter.silva@canada.ca>  Tue, 12 Jun 2018 18:31:24 -0400

metpx-sarracenia (2.18.05b4) unstable; urgency=medium

  * bugfix       plugin msg_filter_wmo2msc.py fixed
  *              sr_poll now uses its own set_dir_pattern to replace variables
  *              sr_post/sr_poll/sr_watch fixed that a cache file for instance 000 was created
  *              sr_post/sr_poll/sr_watch add caching of 'L' message
  * new          sr_amqp for consumer sets channel.basic_recover(requeue=True)
  * update       flow_post.sh posts lot of files within one call (load problem fixed)
  *              flow_test does not test filename with space anymore
  *              flow_test 5 instances for sender
  * doc          miscellaneous doc fixups.

 -- peter <peter.silva@canada.ca.bsqt.homeip.net>  Thu, 24 May 2018 19:45:58 -0400

metpx-sarracenia (2.18.05b2) unstable; urgency=medium

  * bugfix       sr_sftp use chdir to see if connection is still alive
  *              sr_http some site do not tolerate '//' in path
  *              sr_subscribe some code added for sr_sender (lost in inheritance)
  *              sr_file if a file does not exist and should be copied/linked just warn (Dominic)
  * update       flow_test test2_f61.conf no use of post_total_save (race condition)

 -- local michel <aspymjg@grogne1.cmc.ec.gc.ca>  Mon, 14 May 2018 14:41:23 +0000

metpx-sarracenia (2.18.05b1) unstable; urgency=medium

  * bugfix       sr_sftp  differentiate put part vs put file
  * new          sr_retry uses caching for message uniqueness
  *              sr_ftp,sr_sftp better connection test
  * update       sr_poll  default post_base_url from destination url without password
  *              sr_subscribe,sr_sender  log attempt
  *              sr_subscribe retry.on_heartbeat on startup
  *              sr_sender/sr_util if file to send does not exist... give it "attempt" chances
  * doc          fixes and translation into french in progress
  *              updated examples link, and samples directory cleanup

 -- local michel <aspymjg@grogne1.cmc.ec.gc.ca>  Wed, 09 May 2018 12:47:28 +0000

metpx-sarracenia (2.18.04b5) unstable; urgency=medium

  * 
  * bugfix  open local file read rb (instead of r+b)
  *         remove .tmp file if upload does not work
  *         sftp link and directory removal (from message)
  * update  instance string using 2 digits (and code to migrate to)
  *         switch for subprocess.check_call or subprocess.run 
  *         give all chances to sigterm to complete
  * new     inflight tmp/
  *         If things go badly (general exception catch) keep message in retry
  *         log when a retry message is dropped because it expires
  *         poll accepts https (more test to do...not working with japan)
  * doc     expanded description of *expire* setting.
  *         Adding hint about use of *expire* option, how it is necessary for operations.
  *         default setting is to avoid broker overload, too low for operational use.

 -- Peter Silva <peter.silva@canada.ca>  Fri, 27 Apr 2018 12:40:16 -0400

metpx-sarracenia (2.18.04b4) unstable; urgency=medium

  * bugfix  destfn_script was not working
  * update  sr_config.run_command presents subprocess check_call or run depending 
  * on python version
  * new     inflight tmp/


 -- Peter Silva <peter.silva@canada.ca>  Wed, 25 Apr 2018 10:51:00 -0400

metpx-sarracenia (2.18.04b3) unstable; urgency=medium

  * testing flow_test standardisation of messages
  * bugfix  hb_retry no more dependency with on_start
  *         sr_poll make sure all comparaisons are done without of trailing \n
  * new     registered do_get,do_put
  *         registered plugin, if return None, let python do it
  *         plugin accel_scp.py
  *         C has its own sarrac git repo
  *         sr_config.py  '\ ' backslash_space allowed in options 
  *         sr_config.py/sr_message.py  topic encodes  ' ' '#' with %20 %23
  * update  flow_test standardisation of messages
  *         sr_poll logs a warning when sleep time makes no sense
  *         documentation launchpat for sundew
  *         sr_audit log a message when --users all is done
  *                   make sure heartbeat is in try/except 

 -- Peter Silva <peter.silva@canada.ca>  Fri, 20 Apr 2018 16:14:24 -0400

metpx-sarracenia (2.18.04b2) unstable; urgency=medium

  *  * testing: Added recovery of flow_test stuck in retrying state.
  * bugfix  C Truncate all headers and topic so they don't exceed 255 (AMQP limit.)
  *         C Try to avoid being in conflict with stdin/out/err  open/close + 2 dup
  *         C Valgrind hygiene: if nanosecond timestamp was 0, weird stuff happenned.  Fixed.
  *           now valgrind does not complain at all.
  *         C libsrshim enforced checks on commands'status
  *         C any Python, topic and path with # encoded into %23 (as blank into %20)
  * update  sr_audit hb_police_queues to check queue as admin, 
  *           hb_sanity to check processes and sanity_log_dead option added     
  *
  *           no sleep option, sleep computed to trigger next heartbeat
  *         sr_rabbit rabbit dependant commands placed in this file
  * new     plugin do_send_log

 -- Peter Silva <peter.silva@canada.ca>  Tue, 10 Apr 2018 11:17:31 -0400

metpx-sarracenia (2.18.04b1) unstable; urgency=medium

  * testing:retries on python side to validate products and routing
  *         flow_post: loop on sorted individial products (spaces in path)... symlinks considered
  * new     sr_subscribe: traceback logs when doing badly
  *         sr_audit heartbeat works ... needs a config in audit/x.conf for now.
  *         plugins: hp_sanity  uses sr sanity to check if program in strange state and log age to restart
  *                  do_simulation logs protocol steps... instead of doing the actual download or send of a product
  *         sr_config sundew_dirpattern provide a mean to use $RYYYY... etc in directory
  * bugfix  C changes to return proper status of shimmed functions
  *         C Get log file descriptor out of the danger zone also
  *         C renameorlink put back code when oldname exists and processes it if link too
  *         sr_retry : no more uses of self.activity and conditional retry heartbeat changed

 -- local michel <aspymjg@grogne1.cmc.ec.gc.ca>  Thu, 05 Apr 2018 18:07:58 +0000

metpx-sarracenia (2.18.03b1) unstable; urgency=medium

  * expanded flow_test coverage:
  *        plugin msg_stopper with env MAX_MESSAGES
  *        filename with spaces: ls_file_index (poll,sftp,ftp), sr_post.c, flow_post.sh
  *        flow config changes : reject (hourly,today,yesterday xml)
  *        plugins   : msg_pclean_f9*.py
  *        sr_subscribe logging fix
  * new    realpath_filter (PY and C), realpath also named realpath_post
  *        sr sanity  check pid/process  and log age if older than heartbeat * 1.5
  *        sr_audit not finished (heartbeat)
  * bugfix Rotation of retry messages ajusted under certain conditions
  * update msg_filter_wmo2msc.py requiered operationally now

 -- Peter Silva <peter.silva@canada.ca>  Fri, 23 Mar 2018 11:57:09 -0400

metpx-sarracenia (2.18.03a4) unstable; urgency=medium

  * C      libsrshim dup3 (like dup2 for redirection)
  * bugfix amqp.connection not working now showing reference to 'msg'

 -- local michel <aspymjg@grogne1.cmc.ec.gc.ca>  Thu, 15 Mar 2018 14:12:58 +0000

metpx-sarracenia (2.18.03a3) unstable; urgency=medium

  * bugfix sr using cleanup_parent (was cleanup)
  * bugfix unlink cache_file under try:except
  * bugfix sender posting fix from msg.new_*
  * bugfix with exchange_suffix
  * bugfix on plugins (return T/F) for on_start/on_stop incomplete
  *        show on_stop/start plugin/modules at startup
  * C      realpath_post T/F, realpath_filter T/F
  * C      libsrshim processes  here document
  * subscribe on_report plugin implemented... and report_log plugin given as an example
  * subscribe module check_consumer_options

 -- local michel <aspymjg@grogne1.cmc.ec.gc.ca>  Wed, 14 Mar 2018 17:39:30 +0000

metpx-sarracenia (2.18.03a2) unstable; urgency=medium

  * bugfix: C: revert stat passed to sr_post because used for hardlink
  * rename option and in message header put back 

 -- local michel <aspymjg@grogne1.cmc.ec.gc.ca>  Wed, 07 Mar 2018 17:46:10 +0000

metpx-sarracenia (2.18.03a1) unstable; urgency=medium

  * bugfix: C: on rename/mv : realpath option and stat attributes unused for oldname
  * rename option and in message header withdrawn

 -- local michel <aspymjg@grogne1.cmc.ec.gc.ca>  Wed, 06 Mar 2018 17:46:10 +0000

metpx-sarracenia (2.18.02a2) unstable; urgency=medium

  * bugfix: C: posting, link... would cause problem depending on realpath value
  * bugfix: C: posting, post_base_directory that started and/or ended with / might be missing a . in topic.
  * documentation: renamed cp.py -> accel_cp.py, wget.py --> accel_wget.py

 -- local michel <aspymjg@grogne1.cmc.ec.gc.ca>  Wed, 06 Mar 2018 17:46:10 +0000

metpx-sarracenia (2.18.02a1) unstable; urgency=medium

  * change: no default broker (was dd.weather.gc.ca) caused more trouble than help.
  * feature: pluggable checksum algorithms implemented.
  * feature: sr_poll is now recursive.
  * feature: can use URL's in config & 'include' directives... also: remote_config_url added.
  * feature: python https & ftps download support added. (was an omission.)
  * feature: code now has msg_count available (number of queued messages at broker.)
  * feature: config can use api instance variables from application ex.: ${broker.username}
  * plugins: on_start/on_stop support completed,  
  * plugins: root_chown.py, trace_on_stop.py
  * plugins: hb_memory now prints cpu usage.
  * bugfix: C: queue_name random seed wasn't. 
  * bugfix: *restart* no longer restarts unless old process is really gone (used to kill and hope.)
  * bugfix: sr_log2save.py was broken (old log file format), now runs on post_log at least
  * bugfix: path option when varsub and post_base_dir was implied
  * bugfix: posting remote file via polling: length = 0 when message has minimal infos
  * bugfix: sr_poll.py cache.check only if cache enabled
  * bugfix: sr_post rename paths wrong  oldname/newname (post_base_dir was not removed)
  * bugfix: sr_post/sr_poll on_post events now have new_dir/new_file as per other plugin entry points.
  * bugfix: C: components crash on add when SR_CONFIG_EXAMPLES is not set. Now complain and error exit.
  * performance: added dictionary to speed up cache when multiple entries have same sum.
  * flow_tests: unit tests, mirroring, will cope with log rotations
  
  
 -- Peter Silva <peter.silva@canada.ca>  Sat, 17 Feb 2018 11:03:08 -0500

metpx-sarracenia (2.18.01a5) unstable; urgency=medium

  * added *exchange_suffix* and *post_exchange_suffix*
  * *cleanup* action aborts if running. (py and C)
  * *cleanup* action removes .cache files and directories. (py and C)
  * *remove* action calls cleanup. (py and C)
  * Documentation: added mirroring use case.
  * retry logic refactored. performance substantially improved. more correct.
  * added detection of too short heartbeat interval.
  * C: added prefetch option.
  * many improvements to flow_tests (improved QA)
  * sftp will now not report an error if a file it is supposed to delete is not there. (jobs is done.)
  * re-worked wget plugin so the stdout and stderr are printed.
  * list action now prints properly (includes the examples) when user has no configurations.
  * added pitcher and sci2ec use cases to examples.

 -- Peter Silva <peter.silva@canada.ca>  Sat, 27 Jan 2018 16:31:25 -0500

metpx-sarracenia (2.18.01a4) unstable; urgency=medium

  * documentation updated for new plugin declaration.
  * made new style plugin examples work with older python.
  * added new style: cp.py and wget.py plugins.
  * fix: the new api was broken by old python fix.

 -- Peter Silva <peter.silva@canada.ca>  Mon, 08 Jan 2018 02:09:15 -0500

metpx-sarracenia (2.18.01a3) unstable; urgency=medium

  * fix to error message about *object has no attribute 'do_download_list'* 
  * disable new plugin api on python < 3.4 to avoid error messages.

 -- Peter Silva <peter.silva@canada.ca>  Fri, 05 Jan 2018 19:27:13 -0500

metpx-sarracenia (2.18.01a2) unstable; urgency=medium

  * lkely fix included for 1 in 200 file missing in HPC mirroring.
  * added on_start, and on_stop to plugins available.
  * combined plugin parser for all plugins in one module. Improved error checking.
  * C: now imports version info from python, so C version is meaningful (instead of always 1.0.0)
  * fixed: column width hack for older versions was busted.

 -- Peter Silva <peter.silva@canada.ca>  Fri, 05 Jan 2018 11:40:22 -0500

metpx-sarracenia (2.18.01a1) unstable; urgency=medium

  * C: made consumer tag meaningful (identifies hostname and pid of consumer.)
  * added version check and work around because get_terminal_width on python3.2 ( ubuntu 12.04 )
  * C: subscribers creating consumer for each message. api/usage wrong. Fixed.
  * added log_settings to display all settings on startup.
  * noticed wrong default settings on startup:  durable was false, should be true.
  * noticed wrong default settings on startup:  prefetch was 1, supposed to be 25.
  * flow_test: redirected much output to log files.
  * flow_test: added some libcshim (via cp command) based posting (in c diagram.)
  * flow_test: moved sr_poster code into flow_setup, so it is started at beginning instead of run in flow_check.
  * Corrected that *inflight* option was NONE on sender.  It was documented and intended to be '.tmp'.
    now it defaults to '.tmp' but if there is a post_broker, it defaults to NONE.
  * added info messages for cases where msg_received, but the log does not say what happenned (rename/link/mv cases.)
  * times used to be truncated to milliseconds, now the natural number of places after the decimal are retained.
  * C: fix: mv called from shim where no directory in old file name caused malformed *oldname* field in resulting post.
  * C: fix: segfault if credentials.conf is missing.


 -- Peter Silva <peter.silva@canada.ca>  Wed, 03 Jan 2018 14:27:18 -0500

metpx-sarracenia (2.17.12a8) unstable; urgency=medium

  * added exponential backoff on failure to main processing loop in sr_subscribe.
  * added exponential backoff to main retry loop in sr_consumer.
  * now recovers from syntax errors in retry files (json.decode errors.)
  * c: segault in mv if there's no slashes in the source path, oops!
  * added identifiers to differentiate all the Type: messages from exceptions.

 -- Peter Silva <peter.silva@canada.ca>  Mon, 18 Dec 2017 22:48:00 -0500

metpx-sarracenia (2.17.12a7) unstable; urgency=medium

  * flow_test configurations now included in examples.
  * flow_test now uses add/remove options for setup and teardown.
  * C: added SR_CONFIG_EXAMPLES environment variable.
  * C: change C to use four digit instance numbers to match python.
  * C: add *declare* option for variables. 
  * C: Remove *flow* option.
  * fixed: second field in options was not being checked for variable substitution.
  * fixed: remove did not work for disabled configurations.
  * added sr_pulse.7 man page.
  * made 'add' look in sample directories.
  * 'enable' and 'remove' weren't working.
  * 'list' now includes sample configurations, if available.
  * change retry_ttl to default to the value of 'expire'.  Can still override.
  * C: realpath wasn't properly applied in shim library cases.
  * removed 's' from the 'headers' option in python, to match C.
  * python added 'expiry' as synonym for 'expire', to match C.
  * C: realpath only applied if an absolute path was supplied, now works for relative ones also.
  * heartbeat_memory uses psutil.memory_info, on python 3.4 (in ubuntu 14.04) that routine is called get_memory_info.
    added an if statement so it works for all cases.



 -- Peter Silva <peter.silva@canada.ca>  Mon, 18 Dec 2017 13:15:10 -0500

metpx-sarracenia (2.17.12a6) unstable; urgency=medium

  * heartbeat processing surrounded by exception to avoid cpu-hang on bad script. 
  * list categorizes configuration files.
  * list now prints the directories containing configuration files for each category.
  * list prints plugins available also, and listing a particular plugin works now as well.
  * list now uses a PAGER, if configured, and *more* by default, rather than cat.
  * Normally stderr is redirected to logs, but when debug was set it wasn't. Now it always goes to logs.
  * added messages so heartbeat processing is visible.
  * sr_shovel would freak out if cache was set. fixed.
  * fixed heartbeat_memory so it works in sr_watch.
  * C: implemented *source* option
  * C: corrected picking of "main file" for configuration name.

 -- Peter Silva <peter.silva@canada.ca>  Tue, 12 Dec 2017 21:19:37 -0500

metpx-sarracenia (2.17.12a5) unstable; urgency=medium

  * added exponential backoff to downloads 

 -- Peter Silva <peter.silva@canada.ca>  Fri, 08 Dec 2017 09:54:37 -0500

metpx-sarracenia (2.17.12a4) unstable; urgency=medium

  * added exponential backoff on retry, so it doesn't SPAM/hammer server when retrying.

 -- Peter Silva <peter.silva@canada.ca>  Wed, 06 Dec 2017 17:28:56 -0500

metpx-sarracenia (2.17.12a3) unstable; urgency=medium

  * added retry_ttl to have retry queue give up eventually.
  * changed behaviour to try *attempts* times before putting in the retry queue
  * buffering changed from 8K to 1M (awful performance regression due to timeouts on small bufs.)

 -- Peter Silva <peter.silva@canada.ca>  Wed, 06 Dec 2017 15:38:01 -0500

metpx-sarracenia (2.17.12a2) unstable; urgency=medium

  * bugfix: sr_watch was ignoring event option.
  * C: added recovery code after posting errors.
  * heartbeat_memory plugin added by default to control runaway memory leaks.
  * support added to python for N checksum (already in C version.)

 -- Peter Silva <peter.silva@canada.ca>  Tue, 05 Dec 2017 18:01:18 -0500

metpx-sarracenia (2.17.12a1) unstable; urgency=medium

  * bugfix: sr_post sometimes required -p. It shouldn't.
  * Semantics of *accept_unmatch* changed. 
  * bugfix: report_exchange option was ignored and overridden.
  * undocumented, and unused option 'use_pattern' withdrawn.
  * heartbeat_cache plugin added in option parsing rather than forced at end.
  * sr_poll now supports sum algorithms other than z to support polling of local files.
  * documentation bugfix: invalid links to sr_subscribe.7 corrected to sr_subscribe.1
  * testing added cases to simulate communications problems, such as message corruption.
  * bugfix: SENDER=X, filename would be =X, instead of X.
  * bugfix: sender used to print "Sends:" before sending a file, now prints "Sent:" afterward.
  * retry logic changed. Now write to a retry queue file, and try again when there is a gap. So it doesn't get "stuck" on old files, but keeps sending new stuff, catching up gradually.
  * timeouts for many parts of transfer processing added.
  * transfer code consolidated into one location rather that repeating in each protocol.
  * *Pulse* messages added, to ensure connection stays live.
  * some round-tripping added in heartbeat processing to ensure connection remains live.
  * C: fixed: was putting wrong checksum in posted messages.
  * C: now retries connection to broker forever (used to give up after one try.)
  * C: bugfix: pbu synonym for post_base_url, was not accepted, corrected.
  * C: fixed when renaming across file systems, it would fail, rather than copying the file.

 -- Peter Silva <peter.silva@canada.ca>  Mon, 04 Dec 2017 17:45:52 -0500

metpx-sarracenia (2.17.11a3) unstable; urgency=medium

  * sr_post -p|-path optional ending arguments are postpaths
  * sr_config  by default use_pika only if amqplib not available
  * sr_poll  vip written once, heartbeat_check before vip check
  * sr_instances sr_post foreground as a special case (no config)
  * sr_subscribe heartbeat_check before vip checking
  * sr_util startup_args generalized/simplified 
  * sr_util sumflg 0,random(0,100)
  * sr_watch merged into sr_post (inherited from sr_post now)
  * sr_watch post directory content at startup (if not cached)
  * sr_subscribe  revert onfly_checksum set to message checksum in case unset


 -- Peter Silva <peter.silva@canada.ca>  Fri, 17 Nov 2017 13:45:48 -0500

metpx-sarracenia (2.17.11a2) unstable; urgency=medium

  * C: fixed: build configuration directories if missing (used to segfault.)
  * C: fixed: *debug* setting misinterpreted.
  * C: fixed: option base_dir, should have been post_base_dir
  * sr_watch remnants of old cache code causing problems, removed.
  * sr_watch fixed bug with time check for files which have moved.
  * documentation improvements.
  * fixed: list,get,remove,edit,log not working for other than subscribe.
  * excessive debug messaging removed.

 -- Peter Silva <peter.silva@canada.ca>  Thu, 09 Nov 2017 17:04:06 -0500

metpx-sarracenia (2.17.11a1) unstable; urgency=medium

  * sr_subscribe bug fix for SOURCE 
  * sr_subscribe add module __on_file__
  * sr_sender    as flow test demonstrate, option post_base_url is not mandatory
  * sr_instances propagate action and permits edition of general files (admin,defaults,credentials)
  * sr_instances adds actions : add, disable, edit, enable, list, log, remove
  * sr_instances calls configure before build_parent to have all options set
  * sr_post/sr_watch get rid of useless lock stuff... fixed cache problems
  * sr_poll      able to use standard sr_file...
  * sr_(s)ftp/http  when preserve_mode is true... bug fix on setting value of mode
  * sr_file     adding some support for polling (standardisation)
  * sr_consumer file queuename ends with .qname and link to old file (to preserve version compat)
  * sr_config   late of user_log_dir and user_cache_dir to insert hostname if statehost is True
  * sr_config   statehost inserts hostname in user_cache_dir and user_log_dir
  * sr_config   module declare_option  makes program know about plugin options
  *             so program would warn only on real unknown or erronous options
  * sr_config   withdrawal of recursive option, set to True everywhere applicable
  * sr_config   log setup easier, supports loglevel none meaning no logs
  * sr_amqp.py  when using pika, no log if delete_queue and queue not found
  * sr_amqp.py  option use_pika to use or not pika when available
  * sr_amqp.py  mixing amqplib and pika depending of availability
  * sr_*        withdraw msg.headers['filename'],  msg.headers['flow']
  * sr_*        reenforcement of base_dir, post_broker, post_exchange, post_base_dir, post_base_url

 -- Peter Silva <peter.silva@canada.ca>  Mon, 06 Nov 2017 15:03:50 -0500

metpx-sarracenia (2.17.10a4) unstable; urgency=medium

  * C: msg pretty printer now includes user defined headers.
  * C: loglevel now accepts words: none, critical, error, warning, info, debug. (like python version.)
  * C: logevel numbers inverted (formerly 99 was be very quiet, no 0 is quiet.)
  * switched library dependency from amqplib to pika.
  * fix for no_download switch which wasn´t impeding downloads.


 -- Peter Silva <peter.silva@canada.ca>  Mon, 30 Oct 2017 17:43:28 -0400

metpx-sarracenia (2.17.10a3) unstable; urgency=medium

  * C: directories posted during rename. not sure what effect is.
  * documentation consolidated to sr_subscribe, much duplication gone.
  * C: sr_cpost force_polling works properly now (using cache.)
  * C: bugfix double free segfault on exit.
  * C: added directory support to sr_post_rename
  * C: libsrshim: added support for the truncate(2) system call.
  * many fixes based on deployment testing.
  * support files names with spaces in them.
  * call on_file plugins when symbolic link created.
  * sr_config    : environment variable substituted for option value
  * sr_sender    : on_msg msg_2localfile now by default (so no longer need to specify for every sender.)
  * sr_subscribe : changing determination of source (source_from_exchange or missing)
  * rmdir support (python only.)

 -- Peter Silva <peter.silva@canada.ca>  Fri, 27 Oct 2017 17:26:21 -0400

metpx-sarracenia (2.17.10a2) unstable; urgency=medium

  * add regexp option to strip.
  * now support environment variables in config files with ${var}
  * bugfix: misbehaved when file names have blanks in them.
  * added -header option to sr_post.
  * rename support added to sr_watch and python side as well.
  * fix for bug #74 - error messages on shutdown of amqps connection.
  * C: cpost setup/cleanup/declare/restart etc... some were broken, fixed.
  * C: added sighandler to avoid cache corruption when terminating.
  * C: add rename support to cpost (was only in libcshim and python before.)
  * C: bugfix: C was inventing fields if not provided (mode=0, mtime="").
  * C: added tx.select & tx.confirm (publish acknowledgements)
  * C: integrated into flow_tests.

 -- Peter Silva <peter.silva@canada.ca>  Fri, 20 Oct 2017 13:21:57 -0400

metpx-sarracenia (2.17.10a1) unstable; urgency=medium

  * cleanup/declare/setup actions (all programs): no exit, log with configname
  * sr_subscribe/sr_sarra/sr_sender : do_task plugin (initialised to proper module for now)
  * sr_subscribe: headers' source and from_cluster forced when source_from_exchange
  * sr_subscribe: add substitution for ${DR} ${PDR} ${YYYYMMDD} ${SOURCE} ${HH}
  * sr_subscribe: log ignore message when already in cache
  * sr_subscribe: events option is consider to perform link and delete messages
  * sr_subscribe: modified to be a base class instantiated from most programs
  * sr_subscribe: integration of restore_queue, process report_daemons, save/restore
  * sr_subscribe: help module : treats sr_shovel,sr_winnow,sr_sarra cases
  * sr_sender: for R and L messages skip offset/length setting in module set_local()
  * sr_shovel: caching optional default to False
  * sr_config: some save,restore and cache defaults
  * sr_config: inflight supports duration_from_str (for sr_watch/post)
  * sr_config: duration_from_str  time suffix [sS] [mM] [hH] [dD] [wW] where applicable
  * sr_config: module configure cleans up extended options (proper reload)
  * sr_config: option -headers to add,delete or reset user's  key,value pair in message headers
  * sr_ftp,sr_sftp: connect/reconnect resets cdir (current dir)
  * sr_ftp,sr_sftp,sr_http: standardisation, http exception (no hang)
  * sr_ftp,sr_sftp,sr_http: fix Eric's os.getcwd bug, add preventive fp.flush and os.fsync
  * msg_total.py: plugin skip total byte increment when no partstr in message
  * sr_message: move support with oldname/newname (impact watch,post,subscribe,sarra,sender to come)
  * sr_message: srcpath turned to baseurl, set_notice(baseurl,relpath) ***impact all programs
  * sr_message: trim_headers for user added headers key,value pair  ***impact all programs
  * sr_cache: module cache.check_msg ... process correctly message without parts (sum L and R)
  * sr_audit,sr speed up through class instantiation and direct broker connection
  * sr_audit fix permissions for source and subscribe users
  * sr_amqp,sr_pika: cleanup skip removal of exchanges xpublic,xreport,xwinnow*
  * sr_util:  startup_args catches -help when only args given
  * flow_test: several changes to make it more reliable.



 -- Peter Silva <peter.silva@canada.ca>  Thu, 12 Oct 2017 17:58:52 -0400

metpx-sarracenia (2.17.09a1) unstable; urgency=medium

  * FIXME: do old cache files need to be deleted during upgrade? update RELEASE_NOTES
  * expire DEFAULT CHANGED:  7 days -> 5 minutes.  Avoiding pump overloading turns out to be critical.
  * new plugin msg_to_clusters, simplified replacement of inter-cluster routing logic.
  * sr_watch, returned to recursive formulation of sr_watch, reduces overhead substantially.
  * flow_test now includes ftp download test.
  * flow_test now uses sr_audit, queues and exchanges extant now tested.
  * flow_test now waits for queues to drain (so it works more often.)
  * fix (bug# 88) for sr_audit creating report queues with no consumers.
  * sr_poll and plugin/poll_script.py post with parent.post  (srcpath,relpath instead of url)
  * flow_templates under poll|post|watch modified not to generate errors in flow logs
  * flow_templates shovel t_dd[12].conf  reject .*citypage.*  to avoid errors in flow logs
  * plugin/msg_by_user.py now considers msg.report_user for v02.report messages (correct error in flow logs)
  * flow_check.sh shows classified list of errors in log or report No error found
  * sr_poster unused in sr_poll, sr_winnow, sr_sender, sr_shovel
  * sr_winnow, sr_subscribe supports caching on messages
  * sr_config  post_url option equivalent to url
  * sr_subscribe support posting if post_broker is set (and other post options)
  * plugin heartbeat_cache : cache clean/save + stats if cache_stat = True
  * all program consuming... calls heartbeat_check themselves
  * move hearbeat code from sr_consumer to sr_config
  * cache is cleaned every heartbeat.

 -- Peter Silva <peter.silva@canada.ca>  Wed, 06 Sep 2017 18:26:31 -0400

metpx-sarracenia (2.17.08a1) unstable; urgency=medium

  * sr now starts|stops sr_cpost when appropriate.
  * tools now use ~/.ssh credentials, without need for a credentials.conf entry.
  * throttle use better time function
  * sr_message  topic without filename
  * sr_http  timeout + self test
  * sr_sftp self test works
  * sr_sftp/sr_ftp call self.close on download or send problems (attempted bugfix.)
  * sr_sender sftp/ftp bugfix now honours *mirror true* default. was ignored before.
  * sr_cache same algorithm as the C implementation
  * getting rid of cluster routing logic, gateway_for/, to be implemented with plugins.
  * debian packaging for C. 
  * C posting library, including sr_cpost that replicates post and watch is complete.
  * C libc shim that calls C posting library complete.
  * getting rid of random checksums (L & R -> SHA512 digest.)

 -- Peter Silva <peter.silva@canada.ca>  Mon, 14 Aug 2017 17:54:33 -0400

metpx-sarracenia (2.17.07a4) unstable; urgency=medium

  * changed *chmod* interpretation. Was obsolete in favour of umask, now an option to override umask.
  * bug fixes for chmod not being done in a number of situations where it was required.

 -- peter <peter.silva@canada.ca.bsqt.homeip.net>  Thu, 27 Jul 2017 22:52:16 -0400

metpx-sarracenia (2.17.07a3) unstable; urgency=medium

  * on_heartbeat support added to sr_watch. 

 -- Peter Silva <peter.silva@canada.ca>  Thu, 27 Jul 2017 12:34:47 -0400

metpx-sarracenia (2.17.07a2) unstable; urgency=medium

  * on_post plugins were broken in 2.17.07a1 
  * on_heartbeat now defaults to heartbeat_log as one would expect, and documented both.


 -- Peter Silva <peter.silva@canada.ca>  Wed, 26 Jul 2017 11:02:30 -0400

metpx-sarracenia (2.17.07a1) unstable; urgency=medium

  * sr_sarra bug fix os_.exit
  * All sarra programs have standard invoke : pgm [args] action config... old way still supported (MG)
  * sr_util defines a function startup_args to parse sarra program arguments (MG)
  * sr_audit --users : makes sure exchanges/queues configured on pump are setup (MG)
  * all programs manage exchanges/queues through action 'cleanup','declare','setup' (MG)
  * sr_poll nows supports http (MG)
  * sr_poll start posting without parts when it has no clue for size (MG)
  * on_html_page added in config and sr_poll with default http_page.py (MG)
  * on_watch added in config and sr_watch (MG)
  * sr_http.py now has a valid class sr_http (used in sr_poll) (MG)
  * mode bits limited to the last four digits (upper digits non portable anyways.)
  * C implementation of libsrshim, libsarra, sr_cpost, and sr_subjsondump  in C (not packaged yet.)
  * fixed bogus error message from backward compatibility plugins.
  * added mtime check to sarra and sr_subscribe so that if of new file is <= file_on_disk, then don't download.


 -- peter <peter.silva@canada.ca.bsqt.homeip.net>  Tue, 25 Jul 2017 20:51:34 -0400

metpx-sarracenia (2.17.06a3) unstable; urgency=medium

  * git repo url was wrong. Thanks Canadian Tire!
  * compatibility editing local_file (full path) now results in setting new_dir and new_file.
  * still harmonizing sender vs. subsribe api senders use parent.new_file, subs use parent.msg.new_file
  * fixed sender using ftp broken by error message referring to *remote_urlstr* ( replaced by *new_urlstr* )
  * files were created as public write because umask was overridden. Dunno why it was there in the first place.
  * strip fixed in sr_subscribe.
  * flatten fixed in sr_config.
  * crasher bug when sr_sender doesn´t have a post_broker.

 -- Peter Silva <peter.silva@canada.ca>  Thu, 22 Jun 2017 17:20:03 -0400

metpx-sarracenia (2.17.06a2) unstable; urgency=medium

  * added chmod_log for log files, which were defaulting to public writable... no idea why, set default to 600.
  * changed posting default for to_clusters from ALL to the hostname of the broker.
  * moved accept/reject processing into sr_poster.post, so automatically honoured when using plugin scripts that call it.
  * fix bug#86 DESTFNSCRIPT in one accept would be used by subsequent ones.
  * fix bug#51 now use new_path, rather than local_path in consumers, and remote_path in senders. all can use same plugins. 
  * includes warnings for existing plugins to change their variable names, old ones should still work, just prompt warning in log.


 -- peter <peter.silva@canada.ca.bsqt.homeip.net>  Tue, 13 Jun 2017 01:00:09 -0400

metpx-sarracenia (2.17.06a1) unstable; urgency=medium

  * Added default value of 'ALL' for *to_clusters* of  and *gateway_for* to make those options... optional.
  * Adding *preserve_time* option (default: True), to have mtime from source reflected in files written.
  * Adding *preserve_mode* option (default: True)  the move mode bits from source reflected in files written.
  * deprecating *interface* setting, code from Jun. one less thing to set. Now scans all interfaces for *vip*
  * polling script should still sleep for *sleep* seconds if the script fails. busyloop is bad.
  * added download_dd plugin, which does multiple process copies (striping individual files.)
  * documentation improvement: made *blocksize* the main partitioning option, *parts* is developer only.
  there was an error in that usage of parts actually referred partially to blocksize
  * fixed blocksize=1 to mean send entire file, not 1 byte blocks.
  * fix bug#66 for sr_sender to put the actual file name on the destination (after destfn, etc...) 
  * sr_sarra: suppressedn excessive messages about who has vip in debug mode.
  * sr_sarra:  fixed -strip.  Did not work at all before.
  * added the poll_script.py plugin as an example for sr_poll.
  * fix from Eric for wrong permissions in sr_sftp.
  * removed useless import in line_mode.py plugin which breaks it on python 3.2
  * fix from Eric for wrong permissions in sr_ftp. (bug #84)
  * added version strings to components log and usage outputs.
  * added sr_poll to flow_test (from Daniel)
  * some re-organizing of code in sr_watch.
  * implement 0400 default permission mask in sr_poll.
  * note on how to encode special characters in passwords in credentials.conf
  * some plugin improvements from Dominic Racette.


 -- Peter Silva <peter.silva@canada.ca>  Wed, 07 Jun 2017 13:47:55 -0400

metpx-sarracenia (2.17.03a5) unstable; urgency=medium

  * added sr_watchb... the old implementation as a backup in case the new sr_watch is busted.
  * attempted fix for sr_walk permission denied issue.  recursion is now manual, and it queues issues for later.

 -- Peter Silva <peter.silva@canada.ca>  Mon, 27 Mar 2017 16:27:22 -0400

metpx-sarracenia (2.17.03a4) unstable; urgency=medium

  * attempted fix for bug #79 (.tmp file stay when download fails.) not tested.
  * added 's', SHA512 checksum support.
  * after a shovel has restored a queue from a save file, it now exits.
  * on repeated saves, json save files of same data will now be identical (key ordering issue.)
  * added 'attempt' setting to make the number of retries programmable.
  * fixed on_line plugins being broken in sr_poll.
  * fixed 'reject' not working in sr_poll.
  * added -save_file option to shovel and sender to allow arbitrary locations for save files. 
  * report_daemons False option setting now stops report routing shovels from starting.
  * added file_age.py to plugins examples.

 -- Peter Silva <peter.silva@canada.ca>  Sat, 25 Mar 2017 23:08:40 -0400

metpx-sarracenia (2.17.03a2) unstable; urgency=medium

  *problem with releasing a1 had to use a second tag. 

 -- Peter Silva <peter.silva@canada.ca>  Sat, 18 Mar 2017 14:42:00 -0400

metpx-sarracenia (2.17.03a1) unstable; urgency=medium

  * feature 61: added save/restore to persist large broker queues to disk
  * init files now included (feature #56)
  * DESTFNSCRIPT usage broken by last release repaired
  * bugs 76, 77, 78 repaired.
  * another bug with file truncation in sftp fixed.

 -- Peter Silva <peter.silva@canada.ca>  Sat, 18 Mar 2017 14:36:50 -0400

metpx-sarracenia (2.17.02a1) unstable; urgency=medium

  * added some understanding of symbolic links. 
  * sr_watch faster in many cases, many improvements.
  * sr_post now accepts normal file specifications (more than 1, and rela tive paths)
  * Any component can now use vip/interface for active/passive.  
  * programming: on_*, now stackable (multiple plugins on same hook)
  * programming: do_download plugin examples added for use of wget or scp.
  * other small improvements.

 -- Peter Silva <peter.silva@canada.ca>  Thu, 02 Feb 2017 09:23:22 -0500

metpx-sarracenia (2.16.11a4) unstable; urgency=medium

  * Added moving of log directory from var/log -> log, and replacement of var directory with a symlink.
  * Added setting of passwords by default for broker users by sr_audit.
  * Added --reset flag interpretation by sr_audit so that permissions can be updated easily for all users.
  * Added 'set_passwords' flag to sr_audit, defaulting to True.
  * un-commented the over-ride default exchange for reporting in tsource2send.conf...
  * Corrected the regexp permission masks to allow sources to write to any exchange that starts with xs_<user>
  * Corrected the regexp permissions to allow reading by subs from same.  
  * Reverted patch in sarra that broke download URL's.
  * Add old log exchanges to sr_audit for compatibility with pre-transition clients.
  * Changed test of sender to compare against the ones watch, rather than subscriber.
  * Added measurable test to flow test for sender.
  * Adding sr_watch to flow_test.
  * Added sr_sender to flow test.
  * Removing '/var' so log files are in the normal place now.
  * Optimizing the flow_test script (so it's shorter, more straightforward and regular.) 
  * Documentation cleanup 

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Tue, 22 Nov 2016 13:40:41 -0500

metpx-sarracenia (2.16.11a3) unstable; urgency=medium

  * Fixing a cosmetic but ugly bug. Caused by the URL fix
  * Add unready list to prevent posting unreadable files 

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Tue, 15 Nov 2016 17:51:48 +0000

metpx-sarracenia (2.16.11a2) unstable; urgency=medium

  * fix bug #61: change outputs to better present URL's in logs.
  * just naming of some routines that were imported from sundew, add prefix metpx_...
  * fix bug #54:  Adds interpretation of sundew-specific delivery options to sr_subscribe.

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Mon, 14 Nov 2016 20:11:46 +0000

metpx-sarracenia (2.16.11a1) unstable; urgency=medium

  * Another String too long fix.
  * Potential fix for bug #55 (chdir)

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Tue, 08 Nov 2016 18:26:03 +0000

metpx-sarracenia (2.16.10a2) unstable; urgency=medium

  * Fix issue #42 (header length in AMQP)
  * Numerous doc changes

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Wed, 12 Oct 2016 11:19:01 -0400

metpx-sarracenia (2.16.10a1) unstable; urgency=medium

  * Fixes to self test suite
  * Added calls to the usage strings on a bunch of components
  * Added centralized time format conversion in sr_util
  * Added sr_report(1) manual page.
  * Bugfix for headers too long.
  * Patch to sr_poll to prevent crashing with post_exchange_split.
  * Tentative fix for bug #50 improper requirement of write permissions
  * Process headers dynamically
  * Documentation Updates. 

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Tue, 04 Oct 2016 15:05:34 -0400

metpx-sarracenia (2.16.08a1) unstable; urgency=medium

  * Changed package dependency. Paramiko is now recommended.
  * Major Change: Changed "log" to "report" in all components.
  * Added test case for sr_sender.
  * Documentation Updates. 

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Tue, 09 Aug 2016 15:10:48 -0400

metpx-sarracenia (2.16.07a3) unstable; urgency=medium

  * Ian's fix for sr_sender borked with post_exchange_split.
  * Jun's fix for chmod and chmod_dir to be octal.  

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Fri, 15 Jul 2016 14:09:47 -0400

metpx-sarracenia (2.16.07a2) unstable; urgency=medium

  * Fixed typos that prevent proper install of deb package. 

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Tue, 05 Jul 2016 10:59:39 -0400

metpx-sarracenia (2.16.07a1) unstable; urgency=medium

  * Various updates to sr_post/sr_watch
  * Documentation updates
  * test suite updates
  * Full details in CHANGES.txt

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Mon, 04 Jul 2016 14:38:45 -0400

metpx-sarracenia (2.16.05a2) unstable; urgency=medium

  * Fix bug in default pluging that would prevernt many components from stating
  * updated documentation

 -- Khosrow Ebrahimpour <aspykhe@zerocool>  Mon, 16 May 2016 13:43:39 -0400

metpx-sarracenia (2.16.05a1) unstable; urgency=medium

  * Multiple changes to code
  * Lots of documentation change

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Fri, 13 May 2016 12:55:30 -0400

metpx-sarracenia (2.16.03a10) unstable; urgency=medium

  * support sr_post cache for multiple sr_watch
  * disable lock mechanism in sr_post/sr_poster
  * selected events in sr_watch are now handled by sr_post 

 -- Daluma Sen <daluma.sen@canada.ca>  Wed, 30 Mar 2016 16:14:50 +0000

metpx-sarracenia (2.16.03a9) unstable; urgency=medium

  * sr_poster caching issues on delete... 

 -- Michel Grenier <michel.grenier2@canada.ca>  Thu, 10 Mar 2016 15:49:37 -0500

metpx-sarracenia (2.16.03a8) unstable; urgency=medium

  * sr_config.py should not prevent the creation of sr_audit user_cache_dir

 -- Michel Grenier <michel.grenier2@canada.ca>  Wed, 09 Mar 2016 14:36:15 -0500

metpx-sarracenia (2.16.03a7) unstable; urgency=medium

  * sr_audit bug fix when adding subscribe user

 -- Michel Grenier <michel.grenier2@canda.ca>  Wed, 09 Mar 2016 10:43:19 -0500

metpx-sarracenia (2.16.03a6) unstable; urgency=medium

  * fix typo in testing argument pump

 -- Michel Grenier <michel.grenier2@canada.ca>  Wed, 09 Mar 2016 09:24:07 -0500

metpx-sarracenia (2.16.03a5) unstable; urgency=medium

  * make sure sr_config.defaults() preceeds sr_config.general() everywhere...
  * would cause harmless but annoying log errors 

 -- Michel Grenier <michel.grenier2@canada.ca>  Wed, 09 Mar 2016 08:19:26 -0500

metpx-sarracenia (2.16.03a4) unstable; urgency=medium

  * sr_watch Daluma's last version... with defaults for blocksize(200Mb) and caching True

 -- Michel Grenier <michel.grenier2@canada.ca>  Tue, 08 Mar 2016 17:19:27 -0500

metpx-sarracenia (2.16.03a3) unstable; urgency=medium

  *  sr_config/sr_post  fix for document_root and paths
  *  seems that I did not install  2.16.03.a2 also  :-(

 -- Michel Grenier <aspymjg@zerocool>  Tue, 08 Mar 2016 14:38:36 -0500

metpx-sarracenia (2.16.03a1) unstable; urgency=medium

  * sr_audit add old sr_admin func through --pump
             tolerate exchanges that starts with 'x'
             delete queue > max_queue_size if not running

  * sr_config add options: loglevel,prefetch
          expire = 1 week (queue expire after 1 week)
          log = sets a log directory (not a file)
          unrecognized option :log warning BUT added as attribute of class with value
          log_daemons option : True  attempt to start sr_2xlog,sr_log2source,sr_log2clusters
          (may not work if no configuration to make them run)
          admin : use url (instead of username completed by feeder option)

   * sr_consumer : prefetch from parent (sr_config modifs)

   * sr_post : if log is configured or given as argument, set it as log file.
               queue_name now used for retransmission directly to client's queue source can also be used.
               lock_set, lock_unset for caching lock.

   * sr_poster: caching, reset, blocksize implemented.

   * sr_message : processes correctly retransmitted message from sr_post to queue_name
                  on_message called before notify_only is tested
                  overwrite default to False 
                  

   * queue_share option removed : sr_config,sr_consumer,sr_sarra,sr_sender,sr_shovel,sr_subscribe,sr_winnow

   * lots of log level changes for all classes.


 -- Michel Grenier <michel.grenier2@canada.ca>  Tue, 08 Mar 2016 09:53:30 -0500

metpx-sarracenia (2.16.02a4) unstable; urgency=medium

  * sr_post easier to use as a class (check not that picky)
  * sr_watch according to sr_post changes

 -- Michel Grenier <michel.grenier@canada.ca>  Thu, 18 Feb 2016 14:38:46 -0500

metpx-sarracenia (2.16.02a3) unstable; urgency=medium

  * sr_audit omitted in setup.py

 -- Michel Grenier <michel.grenier2@canada.ca>  Wed, 17 Feb 2016 12:39:35 -0500

metpx-sarracenia (2.16.02a2) unstable; urgency=medium

  * message with sum=R,0 (deletion) processed
  * sr_post able to post file,directory, and directory tree
  * config, scripts and checksum can be http://... urls
  * sr_audit first release
  * sr_watch uses sr_instances
  * and more...

 -- Michel Grenier <michel.grenier2@canada.ca>  Wed, 17 Feb 2016 12:09:50 -0500

metpx-sarracenia (2.16.01a8) unstable; urgency=medium

  * fixed makefile for debian documentation 
  * building for trusty and xenial

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Fri, 29 Jan 2016 11:37:19 -0500

metpx-sarracenia (2.16.01a7) unstable; urgency=medium

  * some variable substitution in config
  * reload reconfigure (probably busted since not using daemon)
  * lock .  and .tmp  put back
  * include at  sarra level (not only at process config)
  * etc.

 -- Michel Grenier <michel.grenier2@canada.ca>  Thu, 28 Jan 2016 16:31:13 -0500

metpx-sarracenia (2.16.01a6) unstable; urgency=medium

  * connection sftp/ftp/ftps connected until batch reached or changing destination
  * timeout on channel sftp
  * sr_config  include

 -- Michel Grenier <michel.grenier2@canada.ca>  Tue, 26 Jan 2016 16:13:10 -0500

metpx-sarracenia (2.16.01a5) trusty; urgency=medium

  * sr_config added delete,reset option
  * sr_consumer uses reset to delete queue before declaration
  * sr_sftp bug fix, added delete option after download
  * sr_ftp added delete option after download
  * sr_poll bug fix

 -- Michel Grenier <michel.grenier2@canada.ca>  Fri, 22 Jan 2016 17:16:37 -0500

metpx-sarracenia (2.16.01a4) trusty; urgency=medium

  * sr_config : parsing changed, method configure added
  *             .cache/.config overlaps nicely
  * sr_*      : impact for sr_config changes
  * sr_log.py : uses sr_instances
  * sr        : manage sr_log

 -- Michel Grenier <michel.grenier2@canada.ca>  Thu, 21 Jan 2016 12:16:39 -0500

metpx-sarracenia (2.16.01a3) trusty; urgency=medium

  * Added sr_winnow.
  * Modified how sr_sarra deals with named queue
  * Fixed some issues with sr_*  missing the declaration of an ok variable in certain circumstances.

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Tue, 12 Jan 2016 09:49:53 -0500

metpx-sarracenia (2.16.01a2) trusty; urgency=low

  * startup calls, sr_instances fix, sr_message fix

 -- Michel Grenier <michel.grenier2@canada.ca>  Fri, 08 Jan 2016 14:23:39 -0500

metpx-sarracenia (2.16.01a1) trusty; urgency=medium

  * Multiple improvements and bug fixes.

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Thu, 07 Jan 2016 10:40:17 -0500

metpx-sarracenia (2.15.12a4) trusty; urgency=medium

  * Improved documentation
  * Bug fix in mirroring in sr_subscribe  
  * Bug fix for on_part, on_file in sr_file

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Wed, 23 Dec 2015 11:15:56 -0500

metpx-sarracenia (2.15.12a3) trusty; urgency=medium

  * Incremental release
  * Example on_file script included with package now

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Mon, 21 Dec 2015 14:59:35 -0500

metpx-sarracenia (2.15.12a2) trusty; urgency=medium

  * Incremental release. Still in pre-alpha.

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Tue, 15 Dec 2015 10:19:50 -0500

metpx-sarracenia (2.15.12a1) trusty; urgency=medium

  * Changing the versioning scheme for sarracenia

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Wed, 09 Dec 2015 14:36:47 -0500

metpx-sarracenia (0.1.1) trusty; urgency=low

  [ Khosrow Ebrahimpour ]
  * resetting the version number on the package

 -- Khosrow Ebrahimpour <khosrow.ebrahimpour@canada.ca>  Wed, 18 Nov 2015 14:36:31 +0000

metpx-sarracenia (0.8-precise) trusty; urgency=low

  [ Michel Grenier ]
  * lock option set to . will be used as a temporary prefix for download
  * command line option [-l logdir] used to log into a file instead of stdout
  * option  queue to set a queue name
  * option  durable to set a queue durable
  * option  expire  to set a number of minutes to remove queue when unconnected

 -- Michel Grenier <michel.grenier@ec.gc.ca>  Mon, 04 Aug 2014 19:44:18 +0000

metpx-sarracenia (0.7-precise) trusty; urgency=low

  [ Michel Grenier ]
  * uses python-amqplib

 -- Michel Grenier <michel.grenier@ec.gc.ca>  Mon, 04 Aug 2014 19:44:18 +0000

metpx-sarracenia (0.6-precise) trusty; urgency=low

  [ Michel Grenier ]
  * supports newer type of messages under topic that starts with v00

 -- Michel Grenier <michel.grenier@ec.gc.ca>  Mon, 04 Aug 2014 19:44:18 +0000

metpx-sarracenia (0.5-precise) trusty; urgency=low

  [ Michel Grenier ]
  * loop wget and addition of a timeout of 180 secs by default to download the file

 -- Michel Grenier <michel.grenier@ec.gc.ca>  Mon, 03 Feb 2014 19:44:18 +0000

metpx-sarracenia (0.4-precise) trusty; urgency=low

  [ Michel Grenier ]
  * while loop over consumer.run() to stay alive when server/service stops/restarts

 -- Michel Grenier <michel.grenier@ec.gc.ca>  Mon, 03 Feb 2014 19:44:18 +0000

metpx-sarracenia (0.3-precise) trusty; urgency=low

  [ Michel Grenier ]
  * default exchange name now set to xpublic

 -- Michel Grenier <michel.grenier@ec.gc.ca>  Mon, 03 Feb 2014 19:44:18 +0000

metpx-sarracenia (0.2-precise) trusty; urgency=low

  [ Michel Grenier ]
  * release notes announcing the change of the default exchange name to xpublic
  * call to exchange_declare : expose all option settings

 -- Michel Grenier <michel.grenier@ec.gc.ca>  Mon, 27 Jan 2014 19:44:18 +0000

metpx-sarracenia (0.1-precise) trusty; urgency=low

  [ Michel Grenier ]
  * initial release

 -- Michel Grenier <michel.grenier@ec.gc.ca>  Thu, 10 Oct 2013 19:44:18 +0000
