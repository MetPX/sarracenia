
# This configuration file gets a basic weather feed from dd.weather.gc.ca running.
# should be possible to run this from anywhere.
#
# This gives a local pump that is fully under developer control and has some data to serve
# for self-testing purposes.  The web server should be started under TESTDOCROOT
#
# pre-requisites:
#      rabbitmq installed on HOST, allowing 5672 (normal amqp port) without ssl.
#     
#      defined local user tfeed
#
#     to get data from dd:
#     you need to have amqp://anonymous:anonymous@dd.weather.gc.ca in your ~/.sarra/config/credentials.conf
#
# As a TEMPLATE, this file will be copied into user configs as part of setup_self_test

broker amqp://anonymous@dd.weather.gc.ca/
exchange xpublic

directory TESTDOCROOT
include 
mirror False

# make sure it wants to download anything.
gateway_for DD


# want a continuous feed, but of small files, so eliminate big ones.

# tar files are big also.
reject .*/\.tar
# GRIB files will overwhelm a small server.
reject .*/grib2/.*
# large netcdf files as well.
reject .*/model_giops/.*

# radar imagery
reject .*/GIF/.*

accept .*

instances 1

url http://HOST:8000
document_root TESTDOCROOT
post_broker amqp://tfeed@HOST/
