<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Guide De Ligne De Commande &mdash; Sarracenia 3.00.54rc2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="../../_static/sarra_horror_culture_favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=ae03d225"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="File Detection Strategies" href="StrategieDetectionFichiers.html" />
    <link rel="prev" title="Concepts généraux de Sarracenia" href="Concepts.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Sarracenia
              <img src="../../_static/sarra_horror_culture_w200.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.00.54rc2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Explanation/Overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../How2Guides/index.html">HOWTOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Explanation/index.html">Explanation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Reference/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Contribution/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-documentation.html">API Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">En français</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Reference/index.html">Référence</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Explication</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Aper%C3%A7u.html">Aperçu</a></li>
<li class="toctree-l3"><a class="reference internal" href="Concepts.html">Concepts généraux de Sarracenia</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Guide De Ligne De Commande</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sr3-tout">SR3 - Tout</a></li>
<li class="toctree-l4"><a class="reference internal" href="#la-ceuillette-de-messages">La ceuillette de messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#publication-post">PUBLICATION (POST)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sondage-polling">SONDAGE (POLLING)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#composants">COMPOSANTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configurations">Configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#flowcallbacks">flowCallbacks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#traitement-periodique">TRAITEMENT PÉRIODIQUE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#recuperation-derreur">RÉCUPÉRATION D’ERREUR</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exemples">EXEMPLES</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="StrategieDetectionFichiers.html">File Detection Strategies</a></li>
<li class="toctree-l3"><a class="reference internal" href="SupprimerLesDoublons.html">Suppression de Doublons</a></li>
<li class="toctree-l3"><a class="reference internal" href="AssurerLaLivraison.html">Assurer la livraison (inflight)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ConsiderationsDeployments.html">Considérations relatives au déploiement</a></li>
<li class="toctree-l3"><a class="reference internal" href="SarraPluginDev.html">Guide de programmation sarracenia</a></li>
<li class="toctree-l3"><a class="reference internal" href="Glossaire.html">Glossaire</a></li>
<li class="toctree-l3"><a class="reference internal" href="sftps.html">Pourquoi SFTP est plus souvent choisi que FTPS</a></li>
<li class="toctree-l3"><a class="reference internal" href="Histoire/index.html">Histoire</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Tutoriel/index.html">Tutoriel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../CommentFaire/index.html">Comment Faire</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Contribution/index.html">Contribuer à Sarracenia</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Sarracenia</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">S´abonner et répliquer</a></li>
          <li class="breadcrumb-item"><a href="index.html">Explication</a></li>
      <li class="breadcrumb-item active">Guide De Ligne De Commande</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/fr/Explication/GuideLigneDeCommande.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="guide-de-ligne-de-commande">
<h1>Guide De Ligne De Commande<a class="headerlink" href="#guide-de-ligne-de-commande" title="Link to this heading"></a></h1>
<section id="sr3-tout">
<h2>SR3 - Tout<a class="headerlink" href="#sr3-tout" title="Link to this heading"></a></h2>
<p><strong>sr3</strong> est un outil de ligne de commande pour gérer les configurations
<a class="reference external" href="https://github.com/MetPX/sarracenia">Sarracenia</a> individuellement ou en groupe. Pour l’utilisateur actuel,
il lit sur tous les fichiers de configuration, des fichiers d’état et consulte la table de processus pour déterminer
l’état de tous les composants. Il effectue ensuite la modification demandée.</p>
<blockquote>
<div><p><strong>sr3</strong> <em>options</em> <em>action</em> [ <em>composant/configuration</em> … ]</p>
</div></blockquote>
<p>Les composants sr3 sont utilisés pour publier et télécharger des fichiers à partir de sites Web ou de serveurs de fichiers
qui fournissent des <a class="reference external" href="../Reference/sr3_post.7.html">sr3_post(7)</a>. Ces sites
publient des messages pour chaque fichier dès qu’il est disponible. Les clients se connectent à un
<em>broker</em> (souvent le même que le serveur) et s’abonnent aux notifications.
Les notifications <em>sr3_post</em> fournissent de véritables notifications push pour les dossiers accessibles sur le Web (WAF),
et sont beaucoup plus efficaces que l’interrogation périodique des répertoires ou le style ATOM/RSS
de notifications. Sr_subscribe peut être configuré pour publier des messages après leur téléchargement,
les mettre à la disposition des consommateurs pour un traitement ultérieur ou des transferts.</p>
<p><strong>sr3</strong> peut également être utilisé à des fins autres que le téléchargement (par exemple, pour
fourniture à un programme externe) en spécifiant le -n (égal à : <em>download off</em>)
supprimer le comportement de téléchargement et publier uniquement l’URL sur la sortie standard. La
sortie standard peut être redirigée vers d’autres processus dans le style de filtre de texte UNIX classique.</p>
<p>Les composants de sarracenia sont des groupes de valeurs choisi par défaut sur l’algorithme principal,
pour réduire la taille des composants individuels.  Les composants sont les suivants :</p>
<blockquote>
<div><ul class="simple">
<li><p>cpump - copier des messages d’une pompe a une autre (une implémentation C d’un shovel.)</p></li>
<li><p>flow  - flux générique sans comportement par défaut. Bonne base pour créer un composant défini par l’utilisateur</p></li>
<li><p>poll  - interroger un serveur Web ou de fichiers non sarracenia pour créer des messages à traiter.</p></li>
<li><p>post &amp; watch - créer des messages pour les fichiers à traiter.</p></li>
<li><p>sarra  - télécharger le fichier d’un serveur distant vers le serveur local et les republier pour d’autres.</p></li>
<li><p>sender - envoyer des fichiers d’un serveur local à un serveur distant.</p></li>
<li><p>shovel - copier des messages, uniquement, pas des fichiers.</p></li>
<li><p>watch - créer des messages pour chaque nouveau fichier qui arrive dans un répertoire ou à un chemin défini.</p></li>
<li><p>winnow - copier des messages, en supprimant les doublons.</p></li>
</ul>
</div></blockquote>
<p>Tous ces composants acceptent les mêmes options, avec les mêmes effets.
Il existe également des <a class="reference external" href="../Reference/sr3_cpump.1.html">sr3_cpump(1).</a> qui est une version C qui implémente un
sous-ensemble des options ici, mais là où elles sont implémentées, elles ont le même effet.</p>
<p>La commande <strong>sr3</strong> prend généralement deux arguments : une action suivie d’une liste
de fichiers de configuration. Lorsqu’un composant est appelé, une opération et un
fichier de configuration sont spécifiés. Si la configuration est omise, cela signifie que
l’action s’applique à toutes les configurations. L’action est l’une des suivantes :</p>
<blockquote>
<div><ul class="simple">
<li><p>foreground: exécuter une seule instance au premier plan, écrivant le journal à l´erreur standard.</p></li>
<li><p>restart: arrêter puis démarrer la configuration.</p></li>
<li><p>sanity: recherche les instances qui se sont plantées ou ont bloqué et les redémarre.</p></li>
<li><p>start:  démarrer la configuration</p></li>
<li><p>status: vérifier si la configuration est en cours d’exécution.</p></li>
<li><p>stop: arrêter la configuration.</p></li>
</ul>
</div></blockquote>
<p>Les actions restantes gèrent les ressources (échanges, files d’attente) utilisées par le composant sur
le courtier ou pour gérer les configurations.</p>
<blockquote>
<div><ul class="simple">
<li><p>cleanup:       supprime les ressources du composant sur le serveur</p></li>
<li><p>declare:       crée les ressources du composant sur le serveur.</p></li>
<li><p>add:           copie une configuration à la liste des configurations disponibles.</p></li>
<li><p>list:          Énumérer toutes les configurations disponibles.</p></li>
<li><p>list plugins:  Énumérer toutes les <em>plugins</em> disponibles.</p></li>
<li><p>list examples: Énumérer toutes les exemples disponibles.</p></li>
<li><p>show           voir une version interpreté d’un fichier de configuration.</p></li>
<li><p>edit:          modifier une configuration existante.</p></li>
<li><p>remove:        Supprimer une configuration</p></li>
<li><p>disable:       marquer une configuration comme non éligible à l’exécution.</p></li>
<li><p>enable:        marquer une configuration comme éligible à l’exécution.</p></li>
<li><p>convert:       convertir une configuration de la version2 à la version3</p></li>
</ul>
</div></blockquote>
<p>Par exemple: <em>sr_subscribe foreground dd</em> exécute une instance du composant sr_subscribe en avant plan
en se servant de la configuration dd.</p>
<p>L’action <strong>foreground</strong> est utilisée lors de la construction d’une
configuration ou pour le débogage. L’instance <strong>foreground</strong> sera exécutée
indépendamment des autres instances qui sont en cours d’exécution.
Si des instances sont en cours d’exécution, il partage la même fil d’attente
d’avis avec eux. Un utilisateur arrête l’instance <strong>foreground</strong> en
utilisant simplement &lt;ctrl-c&gt; sur linux. ou utilise d’autres moyens pour tuer le processus.</p>
<p>Une fois qu’une configuration a été affinée, <em>start</em> lance le composant en tant que service d’arrière-plan
(démon ou flotte de démons dont le numéro est contrôlé par l’option <em>instances</em>).
Si plusieurs configurations et composants doivent être exécutés ensemble, l’ensemble de la flotte
peut être contrôlé de la même manière à l’aide de la commande <a class="reference external" href="../Reference/sr3.1.html">sr3(1).</a>.</p>
<p>Pour que les composants roulent tous en meme temps,sur Linux on peut utiliser l’intégration
<a class="reference external" href="https://www.freedesktop.org/wiki/Software/systemd/">systemd</a> , comme décrit dans
<a class="reference external" href="../How2Guides/Admin.html">Admin Guide</a> . Sur Windows, il est possible de configurer un service,
comme décrit dans <a class="reference external" href="../Tutorials/Windows.html">Windows user manual</a></p>
<p>Les actions <strong>cleanup</strong>, <strong>declare</strong>, peuvent être utilisées pour gérer les
ressources sur le courtier rabbitmq. Les ressources sont soit des files d’attente,
soit des échanges. <strong>declare</strong> crée les ressources.</p>
<p>Les actions <strong>add, remove, list, edit, enable &amp; disable</strong> sont utilisées pour gérer la liste
de configurations et <em>plugins</em>. On peut voir toutes les configurations disponibles en utilisant l´action <strong>list</strong>.
et les <em>plugins</em> disponibles avec <strong>list plugins</strong>.
En utilisant l’option <strong>edit</strong>, on peut travailler sur une configuration particulière.
Une configuration <strong>disabled</strong> ne sera pas démarrée ou redémarrée par les actions <strong>start</strong>
ou <strong>restart</strong>. Cela peut être utilisé pour mettre une configuration temporairement de côté.</p>
<p>L’option <strong>convert</strong> est utilisé pour traduire une configuration écrite avec des options de la version2
de Sarracenia, avec des options de la version3. Le fichier de configuration de la version2 doit etre
placé dans le réportoire <em>~/.config/sarra/composant/v2_config.conf</em> et la version traduite sera placé
dans le répertoire <em>~/.config/sr3/composant/v3_config.conf</em>. Pas exemple, cette action serais invoqué avec
<em>sr3 convert composant/config</em>.</p>
<section id="actions">
<h3>ACTIONS<a class="headerlink" href="#actions" title="Link to this heading"></a></h3>
<section id="declare">
<h4>declare<a class="headerlink" href="#declare" title="Link to this heading"></a></h4>
<p>Appeler la fonction correspondante pour chacune des configurations:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 declare
  declare: 2020-09-06 23:22:18,043 [INFO] root declare looking at cpost/pelle_dd1_f04
  2020-09-06 23:22:18,048 [INFO] sarra.moth.amqp __putSetup exchange declared: xcvan00 (as: amqp://tfeed@localhost/)
  2020-09-06 23:22:18,049 [INFO] sarra.moth.amqp __putSetup exchange declared: xcvan01 (as: amqp://tfeed@localhost/)
  2020-09-06 23:22:18,049 [INFO] root declare looking at cpost/veille_f34
  2020-09-06 23:22:18,053 [INFO] sarra.moth.amqp __putSetup exchange declared: xcpublic (as: amqp://tfeed@localhost/)
  2020-09-06 23:22:18,053 [INFO] root declare looking at cpost/pelle_dd2_f05
  ...
  2020-09-06 23:22:18,106 [INFO] root declare looking at cpost/pelle_dd2_f05
  2020-09-06 23:22:18,106 [INFO] root declare looking at cpump/xvan_f14
  2020-09-06 23:22:18,110 [INFO] sarra.moth.amqp __getSetup queue declared q_tfeed.sr_cpump.xvan_f14.23011811.49631644 (as: amqp://tfeed@localhost/)
  2020-09-06 23:22:18,110 [INFO] sarra.moth.amqp __getSetup um..: pfx: v03, exchange: xcvan00, values: #
  2020-09-06 23:22:18,110 [INFO] sarra.moth.amqp __getSetup binding q_tfeed.sr_cpump.xvan_f14.23011811.49631644 with v03.# to xcvan00 (as: amqp://tfeed@localhost/)
  2020-09-06 23:22:18,111 [INFO] root declare looking at cpump/xvan_f15
  2020-09-06 23:22:18,115 [INFO] sarra.moth.amqp __getSetup queue declared q_tfeed.sr_cpump.xvan_f15.50074940.98161482 (as: amqp://tfeed@localhost/)
</pre></div>
</div>
<p>Déclare les files d’attente et les échanges liés à chaque configuration.
On peut également l’appeler avec <em>--users</em>, afin qu’il déclare les utilisateurs ainsi que les échanges et les files d’attente:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 --users declare
  2020-09-06 23:28:56,211 [INFO] sarra.rabbitmq_admin add_user permission user &#39;ender&#39; role source  configure=&#39;^q_ender.*|^xs_ender.*&#39; write=&#39;^q_ender.*|^xs_ender.*&#39; read=&#39;^q_ender.*|^x[lrs]_ender.*|^x.*public$&#39;
  ...
</pre></div>
</div>
<p>La fourniture d’un ou de plusieurs flux ne déclarera que les utilisateurs spécifiés dans le(s) flux:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 --users declare subscribe/dd_amis
  ...
  declare: 2024-05-17 20:02:18,548 434920 [INFO] sarracenia.rabbitmq_admin add_user permission user &#39;tfeed@localhost&#39; role feeder  configure=.* write=.* read=.*
  ...
</pre></div>
</div>
</section>
<section id="dump">
<h4>dump<a class="headerlink" href="#dump" title="Link to this heading"></a></h4>
<p>imprimer les trois structures de données utilisées par sr.  Il existe trois listes :</p>
<ul class="simple">
<li><p>processus considérés comme liés à sr.</p></li>
<li><p>configurations présentes</p></li>
<li><p>contenu des fichiers d’état.</p></li>
</ul>
<p><strong>dump</strong> est utilisé pour le débogage ou pour obtenir plus de détails que ce qui est fourni par status:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Running</span> <span class="n">Processes</span>
     <span class="mi">4238</span><span class="p">:</span> <span class="n">name</span><span class="p">:</span><span class="n">sr_poll</span><span class="o">.</span><span class="n">py</span> <span class="n">cmdline</span><span class="p">:[</span><span class="s1">&#39;/usr/bin/python3&#39;</span><span class="p">,</span> <span class="s1">&#39;/home/peter/src/sarracenia/sarra/sr_poll.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--no&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="s1">&#39;pulse&#39;</span><span class="p">]</span>
     <span class="o">.</span>
     <span class="o">.</span>
     <span class="o">.</span>
<span class="n">Configs</span>
   <span class="n">cpost</span>
       <span class="n">veille_f34</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;running&#39;</span><span class="p">,</span> <span class="s1">&#39;instances&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>

<span class="n">States</span>
   <span class="n">cpost</span>
       <span class="n">veille_f34</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;instance_pids&#39;</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">4251</span><span class="p">},</span> <span class="s1">&#39;queue_name&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;instances_expected&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;has_state&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;missing_instances&#39;</span><span class="p">:</span> <span class="p">[]}</span>

<span class="n">Missing</span>
</pre></div>
</div>
<p>C’est assez long, et donc un peu trop d’informations à regarder à l’état brut.
Généralement utilisé en conjonction avec des filtres Linux, tels que grep.
par exemple:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 dump  | grep stopped
  WMO_mesh_post : {&#39;status&#39;: &#39;stopped&#39;, &#39;instances&#39;: 0}
  shim_f63 : {&#39;status&#39;: &#39;stopped&#39;, &#39;instances&#39;: 0}
  test2_f61 : {&#39;status&#39;: &#39;stopped&#39;, &#39;instances&#39;: 0}

$ sr3 dump  | grep disabled
  amqp_f30.conf : {&#39;status&#39;: &#39;disabled&#39;, &#39;instances&#39;: 5}
</pre></div>
</div>
<p>fournit une méthode simple pour déterminer quelles configurations sont dans un état particulier.
Autre exemple, si <em>sr3 status</em> signale que l’expéditeur/tsource2send_f50 est partiel, alors
on peut utiliser dump pour obtenir plus de détails:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 dump | grep sender/tsource2send_f50
  49308: name:sr3_sender.py cmdline:[&#39;/usr/bin/python3&#39;, &#39;/usr/lib/python3/dist-packages/sarracenia/instance.py&#39;, &#39;--no&#39;, &#39;1&#39;, &#39;start&#39;, &#39;sender/tsource2send_f50&#39;]
  q_tsource.sr_sender.tsource2send_f50.58710892.12372870: [&#39;sender/tsource2send_f50&#39;]
</pre></div>
</div>
</section>
<section id="foreground">
<h4>foreground<a class="headerlink" href="#foreground" title="Link to this heading"></a></h4>
<p>exécuter une seule instance d’une configuration unique en tant que processus interactif de journalisation à la sortie stderr/terminal actuelle.
pour le débogage.</p>
<p><strong>list</strong></p>
<p>montre à l’utilisateur les fichiers de configuration présents</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 list
  User Configurations: (from: /home/peter/.config/sarra )
  cpost/pelle_dd1_f04.conf         cpost/pelle_dd2_f05.conf         cpost/veille_f34.conf
  cpump/xvan_f14.conf              cpump/xvan_f15.conf              poll/f62.conf
  post/shim_f63.conf               post/t_dd1_f00.conf              post/t_dd2_f00.conf
  post/test2_f61.conf              sarra/download_f20.conf          sender/tsource2send_f50.conf
  shovel/rabbitmqtt_f22.conf       subscribe/amqp_f30.conf          subscribe/cclean_f91.conf
  subscribe/cdnld_f21.conf         subscribe/cfile_f44.conf         subscribe/cp_f61.conf
  subscribe/ftp_f70.conf           subscribe/q_f71.conf             subscribe/rabbitmqtt_f31.conf
  subscribe/u_sftp_f60.conf        watch/f40.conf                   admin.conf
  credentials.conf                 default.conf
  logs are in: /home/peter/.cache/sarra/log
</pre></div>
</div>
<p>La dernière ligne indique dans quel répertoire se trouvent les fichiers journaux.</p>
<p><em>list examples</em> montre également les modèles de configuration inclus disponibles comme points de départ avec l’action <em>add</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 list examples
  Sample Configurations: (from: /home/peter/Sarracenia/development/sarra/examples )
  cpump/cno_trouble_f00.inc        poll/aws-nexrad.conf             poll/pollingest.conf
  poll/pollnoaa.conf               poll/pollsoapshc.conf            poll/pollusgs.conf
  poll/pulse.conf                  post/WMO_mesh_post.conf          sarra/wmo_mesh.conf
  sender/ec2collab.conf            sender/pitcher_push.conf         shovel/no_trouble_f00.inc
  subscribe/WMO_Sketch_2mqtt.conf  subscribe/WMO_Sketch_2v3.conf    subscribe/WMO_mesh_CMC.conf
  subscribe/WMO_mesh_Peer.conf     subscribe/aws-nexrad.conf        subscribe/dd_2mqtt.conf
  subscribe/dd_all.conf            subscribe/dd_amis.conf           subscribe/dd_aqhi.conf
  subscribe/dd_cacn_bulletins.conf subscribe/dd_citypage.conf       subscribe/dd_cmml.conf
  subscribe/dd_gdps.conf           subscribe/dd_ping.conf           subscribe/dd_radar.conf
  subscribe/dd_rdps.conf           subscribe/dd_swob.conf           subscribe/ddc_cap-xml.conf
  subscribe/ddc_normal.conf        subscribe/downloademail.conf     subscribe/ec_ninjo-a.conf
  subscribe/hpfx_amis.conf         subscribe/local_sub.conf         subscribe/pitcher_pull.conf
  subscribe/sci2ec.conf            subscribe/subnoaa.conf           subscribe/subsoapshc.conf
  subscribe/subusgs.conf           watch/master.conf                watch/pitcher_client.conf
  watch/pitcher_server.conf        watch/sci2ec.conf


$ sr3 add dd_all.conf
  add: 2021-01-24 18:04:57,018 [INFO] sarracenia.sr add copying: /usr/lib/python3/dist-packages/sarracenia/examples/subscribe/dd_all.conf to /home/peter/.config/sr3/subscribe/dd_all.conf
$ sr3 edit dd_all.conf
</pre></div>
</div>
<p>Les actions <strong>add, remove, list, edit, enable &amp; disable</strong> sont utilisées pour gérer la liste
des configurations.  On peut voir toutes les configurations disponibles en utilisant l’action <strong>list</strong>.
Pour afficher les plugins disponibles, utilisez <strong>list plugins</strong>. À l’aide de l’option <strong>edit</strong>,
on peut travailler sur une configuration particulière.  Un <em>disabled</em> met une configuration de côté
(en ajoutant <em>.off</em> au nom) afin qu’elle ne soit pas démarrée ou redémarrée par
les actions <strong>start</strong>, <strong>foreground</strong> ou <strong>restart</strong>.</p>
</section>
<section id="show">
<h4>show<a class="headerlink" href="#show" title="Link to this heading"></a></h4>
<p>Afficher tous les paramètres de configuration (le résultat de toutes les analyses… ce que les composants du flux voient réellement)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">sr3</span> <span class="n">show</span> <span class="n">subscribe</span><span class="o">/</span><span class="n">q_f71</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">20</span> <span class="mi">15</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">32</span><span class="p">,</span><span class="mi">507</span> <span class="mi">1084652</span> <span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">config</span> <span class="n">parse_fil</span> <span class="n">download_f20</span><span class="o">.</span><span class="n">conf</span><span class="p">:</span><span class="mi">35</span> <span class="n">obsolete</span> <span class="n">v2</span><span class="p">:</span><span class="s2">&quot;on_message msg_log&quot;</span> <span class="n">converted</span> <span class="n">to</span> <span class="n">sr3</span><span class="p">:</span><span class="s2">&quot;logEvents after_accept&quot;</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">20</span> <span class="mi">15</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">32</span><span class="p">,</span><span class="mi">508</span> <span class="mi">1084652</span> <span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">config</span> <span class="n">parse_file</span> <span class="n">tsource2send_f50</span><span class="o">.</span><span class="n">conf</span><span class="p">:</span><span class="mi">26</span> <span class="n">obsolete</span> <span class="n">v2</span><span class="p">:</span><span class="s2">&quot;on_message msg_rawlog&quot;</span> <span class="n">converted</span> <span class="n">to</span> <span class="n">sr3</span><span class="p">:</span><span class="s2">&quot;logEvents after_accept&quot;</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">20</span> <span class="mi">15</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">32</span><span class="p">,</span><span class="mi">508</span> <span class="mi">1084652</span> <span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">config</span> <span class="n">parse_file</span> <span class="n">rabbitmqtt_f22</span><span class="o">.</span><span class="n">conf</span><span class="p">:</span><span class="mi">6</span> <span class="n">obsolete</span> <span class="n">v2</span><span class="p">:</span><span class="s2">&quot;on_message msg_log&quot;</span> <span class="n">converted</span> <span class="n">to</span> <span class="n">sr3</span><span class="p">:</span><span class="s2">&quot;logEvents after_accept&quot;</span>

<span class="n">Config</span> <span class="n">of</span> <span class="n">subscribe</span><span class="o">/</span><span class="n">q_f71</span><span class="p">:</span>
<span class="p">{</span><span class="s1">&#39;_Config__admin&#39;</span><span class="p">:</span> <span class="s1">&#39;amqp://bunnymaster@localhost/ None True True False False None None&#39;</span><span class="p">,</span>
 <span class="s1">&#39;_Config__broker&#39;</span><span class="p">:</span> <span class="s1">&#39;amqp://tsource@localhost/ None True True False False None None&#39;</span><span class="p">,</span>
 <span class="s1">&#39;_Config__post_broker&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;accelThreshold&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;acceptSizeWrong&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;acceptUnmatched&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;admin&#39;</span><span class="p">:</span> <span class="s1">&#39;amqp://bunnymaster@localhost/ None True True False False None None&#39;</span><span class="p">,</span>
 <span class="s1">&#39;attempts&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
 <span class="s1">&#39;auto_delete&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;baseDir&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;baseUrl_relPath&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;batch&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
 <span class="s1">&#39;bindings&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;xs_tsource_poll&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;v03&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;#&#39;</span><span class="p">])],</span>
 <span class="s1">&#39;broker&#39;</span><span class="p">:</span> <span class="s1">&#39;amqp://tsource@localhost/ None True True False False None None&#39;</span><span class="p">,</span>
 <span class="s1">&#39;bufsize&#39;</span><span class="p">:</span> <span class="mi">1048576</span><span class="p">,</span>
 <span class="s1">&#39;byteRateMax&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;cfg_run_dir&#39;</span><span class="p">:</span> <span class="s1">&#39;/home/peter/.cache/sr3/subscribe/q_f71&#39;</span><span class="p">,</span>
 <span class="s1">&#39;component&#39;</span><span class="p">:</span> <span class="s1">&#39;subscribe&#39;</span><span class="p">,</span>
 <span class="s1">&#39;config&#39;</span><span class="p">:</span> <span class="s1">&#39;q_f71&#39;</span><span class="p">,</span>
 <span class="s1">&#39;currentDir&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;debug&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;declared_exchanges&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;declared_users&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;anonymous&#39;</span><span class="p">:</span> <span class="s1">&#39;subscriber&#39;</span><span class="p">,</span> <span class="s1">&#39;eggmeister&#39;</span><span class="p">:</span> <span class="s1">&#39;subscriber&#39;</span><span class="p">,</span> <span class="s1">&#39;ender&#39;</span><span class="p">:</span> <span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="s1">&#39;tfeed&#39;</span><span class="p">:</span> <span class="s1">&#39;feeder&#39;</span><span class="p">,</span> <span class="s1">&#39;tsource&#39;</span><span class="p">:</span> <span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="s1">&#39;tsub&#39;</span><span class="p">:</span> <span class="s1">&#39;subscriber&#39;</span><span class="p">},</span>
 <span class="s1">&#39;delete&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;destfn_script&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;directory&#39;</span><span class="p">:</span> <span class="s1">&#39;//home/peter/sarra_devdocroot/recd_by_srpoll_test1&#39;</span><span class="p">,</span>
 <span class="s1">&#39;discard&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;documentRoot&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;download&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;durable&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;env_declared&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;FLOWBROKER&#39;</span><span class="p">,</span> <span class="s1">&#39;MQP&#39;</span><span class="p">,</span> <span class="s1">&#39;SFTPUSER&#39;</span><span class="p">,</span> <span class="s1">&#39;TESTDOCROOT&#39;</span><span class="p">],</span>
 <span class="s1">&#39;exchange&#39;</span><span class="p">:</span> <span class="s1">&#39;xs_tsource_poll&#39;</span><span class="p">,</span>
 <span class="s1">&#39;exchangeDeclare&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;exchangeSuffix&#39;</span><span class="p">:</span> <span class="s1">&#39;poll&#39;</span><span class="p">,</span>
 <span class="s1">&#39;expire&#39;</span><span class="p">:</span> <span class="mf">1800.0</span><span class="p">,</span>
 <span class="s1">&#39;feeder&#39;</span><span class="p">:</span> <span class="n">ParseResult</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;amqp&#39;</span><span class="p">,</span> <span class="n">netloc</span><span class="o">=</span><span class="s1">&#39;tfeed@localhost&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">fragment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
 <span class="s1">&#39;fileEvents&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;link&#39;</span><span class="p">,</span> <span class="s1">&#39;modify&#39;</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">,</span> <span class="s1">&#39;mkdir&#39;</span><span class="p">,</span> <span class="s1">&#39;rmdir&#39;</span> <span class="p">},</span>
 <span class="s1">&#39;file_total_interval&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;filename&#39;</span><span class="p">:</span> <span class="s1">&#39;WHATFN&#39;</span><span class="p">,</span>
 <span class="s1">&#39;fixed_headers&#39;</span><span class="p">:</span> <span class="p">{},</span>
 <span class="s1">&#39;flatten&#39;</span><span class="p">:</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
 <span class="s1">&#39;hostdir&#39;</span><span class="p">:</span> <span class="s1">&#39;fractal&#39;</span><span class="p">,</span>
 <span class="s1">&#39;hostname&#39;</span><span class="p">:</span> <span class="s1">&#39;fractal&#39;</span><span class="p">,</span>
 <span class="s1">&#39;housekeeping&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
 <span class="s1">&#39;imports&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;inflight&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;inline&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;inlineByteMax&#39;</span><span class="p">:</span> <span class="mi">4096</span><span class="p">,</span>
 <span class="s1">&#39;inlineEncoding&#39;</span><span class="p">:</span> <span class="s1">&#39;guess&#39;</span><span class="p">,</span>
 <span class="s1">&#39;inlineOnly&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;instances&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
 <span class="s1">&#39;identity_arbitrary_value&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;identity_method&#39;</span><span class="p">:</span> <span class="s1">&#39;sha512&#39;</span><span class="p">,</span>
 <span class="s1">&#39;logEvents&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;after_work&#39;</span><span class="p">,</span> <span class="s1">&#39;after_accept&#39;</span><span class="p">,</span> <span class="s1">&#39;on_housekeeping&#39;</span><span class="p">},</span>
 <span class="s1">&#39;logFormat&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> [</span><span class="si">%(levelname)s</span><span class="s1">] </span><span class="si">%(name)s</span><span class="s1"> </span><span class="si">%(funcName)s</span><span class="s1"> </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,</span>
 <span class="s1">&#39;logLevel&#39;</span><span class="p">:</span> <span class="s1">&#39;info&#39;</span><span class="p">,</span>
 <span class="s1">&#39;logReject&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;logRotateCount&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
 <span class="s1">&#39;logRotateInterval&#39;</span><span class="p">:</span> <span class="mi">86400</span><span class="p">,</span>
 <span class="s1">&#39;logStdout&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;log_flowcb_needed&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;masks&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;accept .* into //home/peter/sarra_devdocroot/recd_by_srpoll_test1 with mirror:True strip:.*sent_by_tsource2send/&#39;</span><span class="p">],</span>
 <span class="s1">&#39;messageAgeMax&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;messageCountMax&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;messageDebugDump&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;messageRateMax&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;messageRateMin&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;message_strategy&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;failure_duration&#39;</span><span class="p">:</span> <span class="s1">&#39;5m&#39;</span><span class="p">,</span> <span class="s1">&#39;reset&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;stubborn&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
 <span class="s1">&#39;message_ttl&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;mirror&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;msg_total_interval&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
 <span class="s1">&#39;fileAgeMax&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;nodupe_ttl&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;permCopy&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;permDefault&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;permDirDefault&#39;</span><span class="p">:</span> <span class="mi">509</span><span class="p">,</span>
 <span class="s1">&#39;permLog&#39;</span><span class="p">:</span> <span class="mi">384</span><span class="p">,</span>
 <span class="s1">&#39;plugins_early&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;plugins_late&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;sarracenia.flowcb.log.Log&#39;</span><span class="p">],</span>
 <span class="s1">&#39;post_baseDir&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;post_baseUrl&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;post_broker&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;post_documentRoot&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;post_exchanges&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;post_topicPrefix&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;v03&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">],</span>
 <span class="s1">&#39;prefetch&#39;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
 <span class="s1">&#39;pstrip&#39;</span><span class="p">:</span> <span class="s1">&#39;.*sent_by_tsource2send/&#39;</span><span class="p">,</span>
 <span class="s1">&#39;queueBind&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;queueDeclare&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;queueName&#39;</span><span class="p">:</span> <span class="s1">&#39;q_tsource_subscribe.q_f71.76359618.62916076&#39;</span><span class="p">,</span>
 <span class="s1">&#39;queue_filename&#39;</span><span class="p">:</span> <span class="s1">&#39;/home/peter/.cache/sr3/subscribe/q_f71/subscribe.q_f71.tsource.qname&#39;</span><span class="p">,</span>
 <span class="s1">&#39;randid&#39;</span><span class="p">:</span> <span class="s1">&#39;cedf&#39;</span><span class="p">,</span>
 <span class="s1">&#39;randomize&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;realpathPost&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;rename&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;report&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;reset&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;resolved_qname&#39;</span><span class="p">:</span> <span class="s1">&#39;q_tsource_subscribe.q_f71.76359618.62916076&#39;</span><span class="p">,</span>
 <span class="s1">&#39;retry_ttl&#39;</span><span class="p">:</span> <span class="mf">1800.0</span><span class="p">,</span>
 <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{},</span>
 <span class="s1">&#39;sleep&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
 <span class="s1">&#39;statehost&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;strip&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;subtopic&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;timeCopy&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
 <span class="s1">&#39;timezone&#39;</span><span class="p">:</span> <span class="s1">&#39;UTC&#39;</span><span class="p">,</span>
 <span class="s1">&#39;tls_rigour&#39;</span><span class="p">:</span> <span class="s1">&#39;normal&#39;</span><span class="p">,</span>
 <span class="s1">&#39;topicPrefix&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;v03&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">],</span>
 <span class="s1">&#39;undeclared&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;msg_total_interval&#39;</span><span class="p">,</span> <span class="s1">&#39;file_total_interval&#39;</span><span class="p">],</span>
 <span class="s1">&#39;users&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;v2plugin_options&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;v2plugins&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;plugin&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;msg_total_save&#39;</span><span class="p">,</span> <span class="s1">&#39;file_total_save&#39;</span><span class="p">]},</span>
 <span class="s1">&#39;vhost&#39;</span><span class="p">:</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
 <span class="s1">&#39;vip&#39;</span><span class="p">:</span> <span class="p">[]}</span>

<span class="o">%</span>
</pre></div>
</div>
</section>
<section id="convert">
<h4>convert<a class="headerlink" href="#convert" title="Link to this heading"></a></h4>
<p>Conversion d’une configuration : les deux formats sont acceptés, ainsi que les fichiers d’inclusion (.inc)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 convert poll/sftp_f62
  2022-06-14 15:00:00,762 1093345 [INFO] root convert converting poll/sftp_f62 from v2 to v3

$ sr3 convert poll/sftp_f62.conf
  2022-06-14 15:01:11,766 1093467 [INFO] root convert converting poll/sftp_f62.conf from v2 to v3

$ sr3 convert shovel/no_trouble_f00.inc
  2022-06-14 15:03:29,918 1093655 [INFO] root convert converting shovel/no_trouble_f00.inc from v2 to v3
</pre></div>
</div>
<p>Pour écraser une configuration SR3 existante, utilisez l’option <em>–wololo</em>.
Lors de l’écrasement de plusieurs configurations SR3 est voulu, il faut également
utiliser <em>–dangerWillRobinson=n</em> dans le mode normale… où <em>n</em> est le nombre de configurations à convertir.</p>
</section>
<section id="start">
<h4>start<a class="headerlink" href="#start" title="Link to this heading"></a></h4>
<p>lancer tous les composants configurés:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 start
  gathering global state: procs, configs, state files, logs, analysis - Done.
  starting...Done
</pre></div>
</div>
</section>
<section id="stop">
<h4>stop<a class="headerlink" href="#stop" title="Link to this heading"></a></h4>
<p>arrêter tous les processus:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 stop
  gathering global state: procs, configs, state files, logs, analysis - Done.
  stopping........Done
  Waiting 1 sec. to check if 93 processes stopped (try: 0)
  All stopped after try 0
</pre></div>
</div>
</section>
<section id="status">
<h4>status<a class="headerlink" href="#status" title="Link to this heading"></a></h4>
<p>Exemple d’état OK (sr3 est en cours d’exécution)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fractal</span><span class="o">%</span> <span class="n">sr3</span> <span class="n">status</span>
<span class="n">status</span><span class="p">:</span>
<span class="n">Component</span><span class="o">/</span><span class="n">Config</span>                         <span class="n">Processes</span>   <span class="n">Connection</span>        <span class="n">Lag</span>                              <span class="n">Rates</span>
                                         <span class="n">State</span>   <span class="n">Run</span> <span class="n">Retry</span>  <span class="n">msg</span> <span class="n">data</span>   <span class="n">Queued</span>  <span class="n">LagMax</span> <span class="n">LagAvg</span>  <span class="n">Last</span>  <span class="o">%</span><span class="n">rej</span>     <span class="n">pubsub</span> <span class="n">messages</span>   <span class="n">RxData</span>     <span class="n">TxData</span>
                                         <span class="o">-----</span>   <span class="o">---</span> <span class="o">-----</span>  <span class="o">---</span> <span class="o">----</span>   <span class="o">------</span>  <span class="o">------</span> <span class="o">------</span>  <span class="o">----</span>  <span class="o">----</span>     <span class="o">------</span> <span class="o">--------</span>   <span class="o">------</span>     <span class="o">------</span>
<span class="n">cpost</span><span class="o">/</span><span class="n">veille_f34</span>                         <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mf">0.0</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">cpump</span><span class="o">/</span><span class="n">pelle_dd1_f04</span>                      <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>   <span class="mf">31.3</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mi">4</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">cpump</span><span class="o">/</span><span class="n">pelle_dd2_f05</span>                      <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>   <span class="mf">31.3</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mi">4</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">cpump</span><span class="o">/</span><span class="n">xvan_f14</span>                           <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mf">0.0</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">cpump</span><span class="o">/</span><span class="n">xvan_f15</span>                           <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mf">0.0</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">poll</span><span class="o">/</span><span class="n">f62</span>                                 <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.08</span><span class="n">s</span>    <span class="mf">0.04</span><span class="n">s</span>  <span class="mf">1.4</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">2.0</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">post</span><span class="o">/</span><span class="n">shim_f63</span>                            <span class="n">stop</span>    <span class="mi">0</span><span class="o">/</span><span class="mi">0</span>          <span class="o">-</span>          <span class="o">-</span>         <span class="o">-</span>     <span class="o">-</span>     <span class="o">-</span>          <span class="o">-</span>        <span class="o">-</span>
<span class="n">post</span><span class="o">/</span><span class="n">test2_f61</span>                           <span class="n">stop</span>    <span class="mi">0</span><span class="o">/</span><span class="mi">0</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.02</span><span class="n">s</span>    <span class="mf">0.01</span><span class="n">s</span>  <span class="mf">0.4</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">8.1</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">sarra</span><span class="o">/</span><span class="n">download_f20</span>                       <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">10</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">13.17</span><span class="n">s</span>    <span class="mf">5.63</span><span class="n">s</span>  <span class="mf">1.8</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">5.4</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">4</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.7</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">sender</span><span class="o">/</span><span class="n">tsource2send_f50</span>                  <span class="n">run</span>   <span class="mi">10</span><span class="o">/</span><span class="mi">10</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">9</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">1.37</span><span class="n">s</span>    <span class="mf">1.08</span><span class="n">s</span>  <span class="mf">1.9</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">8.1</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">5</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.7</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">pclean_f90</span>                        <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>   <span class="mi">136</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span>  <span class="mf">0.6</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">4.0</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">5</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">pclean_f92</span>                        <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mf">0.0</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">rabbitmqtt_f22</span>                    <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.89</span><span class="n">s</span>    <span class="mf">0.67</span><span class="n">s</span>  <span class="mf">1.5</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">8.1</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">5</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">t_dd1_f00</span>                         <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mi">124</span>   <span class="mf">23.15</span><span class="n">s</span>    <span class="mf">4.50</span><span class="n">s</span>  <span class="mf">0.1</span><span class="n">s</span> <span class="mf">55.0</span><span class="o">%</span>  <span class="mf">3.9</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">9</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">t_dd2_f00</span>                         <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>     <span class="mi">83</span>   <span class="mf">11.82</span><span class="n">s</span>    <span class="mf">3.50</span><span class="n">s</span>  <span class="mf">0.1</span><span class="n">s</span> <span class="mf">49.2</span><span class="o">%</span>  <span class="mf">3.6</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">8</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">amqp_f30</span>                       <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">12</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">18.79</span><span class="n">s</span>    <span class="mf">9.22</span><span class="n">s</span>  <span class="mf">0.1</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">3.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">4</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.9</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">cclean_f91</span>                     <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>   <span class="mi">145</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">1</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span>  <span class="mf">0.4</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">2.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">6</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">cdnld_f21</span>                      <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">17</span><span class="o">%</span>     <span class="mi">12</span>    <span class="mf">7.20</span><span class="n">s</span>    <span class="mf">2.81</span><span class="n">s</span>  <span class="mf">0.7</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">2.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.7</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">cfile_f44</span>                      <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">6</span><span class="o">%</span>      <span class="mi">1</span>    <span class="mf">3.32</span><span class="n">s</span>    <span class="mf">0.32</span><span class="n">s</span>  <span class="mf">0.4</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">2.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">6</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.7</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">cp_f61</span>                         <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">3</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">6.42</span><span class="n">s</span>    <span class="mf">3.49</span><span class="n">s</span>  <span class="mf">1.6</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">4.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">6</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="mi">635</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">ftp_f70</span>                        <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">8</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">1.18</span><span class="n">s</span>    <span class="mf">0.83</span><span class="n">s</span>  <span class="mf">0.2</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.8</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.8</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">q_f71</span>                          <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">1.62</span><span class="n">s</span>    <span class="mf">0.57</span><span class="n">s</span>  <span class="mf">0.0</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">rabbitmqtt_f31</span>                 <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">11</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">4.27</span><span class="n">s</span>    <span class="mf">1.95</span><span class="n">s</span>  <span class="mf">1.2</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">4.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">6</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="mi">637</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">u_sftp_f60</span>                     <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">1</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">2.69</span><span class="n">s</span>    <span class="mf">2.23</span><span class="n">s</span>  <span class="mf">1.3</span><span class="n">s</span>  <span class="mf">0.7</span><span class="o">%</span>  <span class="mf">4.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">6</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="mi">644</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">watch</span><span class="o">/</span><span class="n">f40</span>                                <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.10</span><span class="n">s</span>    <span class="mf">0.05</span><span class="n">s</span>  <span class="mf">1.9</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">4.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">winnow</span><span class="o">/</span><span class="n">t00_f10</span>                           <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">12.31</span><span class="n">s</span>    <span class="mf">4.33</span><span class="n">s</span>  <span class="mf">3.5</span><span class="n">s</span> <span class="mf">50.0</span><span class="o">%</span>  <span class="mf">3.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
<span class="n">winnow</span><span class="o">/</span><span class="n">t01_f10</span>                           <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">11.59</span><span class="n">s</span>    <span class="mf">3.76</span><span class="n">s</span>  <span class="mf">0.1</span><span class="n">s</span> <span class="mf">50.5</span><span class="o">%</span>  <span class="mf">4.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">4</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>
      <span class="n">Total</span> <span class="n">Running</span> <span class="n">Configs</span><span class="p">:</span>  <span class="mi">25</span> <span class="p">(</span> <span class="n">Processes</span><span class="p">:</span> <span class="mi">64</span> <span class="n">missing</span><span class="p">:</span> <span class="mi">0</span> <span class="n">stray</span><span class="p">:</span> <span class="mi">0</span> <span class="p">)</span>
                     <span class="n">Memory</span><span class="p">:</span> <span class="n">uss</span><span class="p">:</span><span class="mf">2.4</span> <span class="n">GiB</span> <span class="n">rss</span><span class="p">:</span><span class="mf">3.3</span> <span class="n">GiB</span> <span class="n">vms</span><span class="p">:</span><span class="mf">6.2</span> <span class="n">GiB</span>
                   <span class="n">CPU</span> <span class="n">Time</span><span class="p">:</span> <span class="n">User</span><span class="p">:</span><span class="mf">39.62</span><span class="n">s</span> <span class="n">System</span><span class="p">:</span><span class="mf">4.42</span><span class="n">s</span>
       <span class="n">Pub</span><span class="o">/</span><span class="n">Sub</span> <span class="n">Received</span><span class="p">:</span> <span class="mi">103</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="p">(</span><span class="mf">80.6</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="p">),</span> <span class="n">Sent</span><span class="p">:</span>  <span class="mi">63</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="p">(</span><span class="mf">32.8</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="p">)</span> <span class="n">Queued</span><span class="p">:</span> <span class="mi">221</span> <span class="n">Retry</span><span class="p">:</span> <span class="mi">281</span><span class="p">,</span> <span class="n">Mean</span> <span class="n">lag</span><span class="p">:</span> <span class="mf">2.32</span><span class="n">s</span>
          <span class="n">Data</span> <span class="n">Received</span><span class="p">:</span> <span class="mi">32</span> <span class="n">Files</span><span class="o">/</span><span class="n">s</span> <span class="p">(</span><span class="mf">11.9</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="p">),</span> <span class="n">Sent</span><span class="p">:</span> <span class="mi">5</span> <span class="n">Files</span><span class="o">/</span><span class="n">s</span> <span class="p">(</span><span class="mf">1.7</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>
<span class="n">fractal</span><span class="o">%</span>
</pre></div>
</div>
<p>L’état au complet</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fractal</span><span class="o">%</span> <span class="n">sr3</span> <span class="o">--</span><span class="n">full</span> <span class="n">status</span>
<span class="n">status</span><span class="p">:</span>
<span class="n">Component</span><span class="o">/</span><span class="n">Config</span>                         <span class="n">Processes</span>   <span class="n">Connection</span>        <span class="n">Lag</span>                              <span class="n">Rates</span>                                        <span class="n">Counters</span> <span class="p">(</span><span class="n">per</span> <span class="n">housekeeping</span><span class="p">)</span>                                                    <span class="n">Data</span> <span class="n">Counters</span>                                           <span class="n">Memory</span>                             <span class="n">CPU</span> <span class="n">Time</span>
                                         <span class="n">State</span>   <span class="n">Run</span> <span class="n">Retry</span>  <span class="n">msg</span> <span class="n">data</span>   <span class="n">Queued</span>  <span class="n">LagMax</span> <span class="n">LagAvg</span>  <span class="n">Last</span>  <span class="o">%</span><span class="n">rej</span>     <span class="n">pubsub</span> <span class="n">messages</span>   <span class="n">RxData</span>     <span class="n">TxData</span>       <span class="n">subBytes</span>   <span class="n">Accepted</span>   <span class="n">Rejected</span>  <span class="n">Malformed</span>   <span class="n">pubBytes</span>    <span class="n">pubMsgs</span>     <span class="n">pubMal</span>     <span class="n">rxData</span>    <span class="n">rxFiles</span>     <span class="n">txData</span>    <span class="n">txFiles</span>    <span class="n">Since</span>       <span class="n">uss</span>        <span class="n">rss</span>        <span class="n">vms</span>       <span class="n">user</span>     <span class="n">system</span>
                                         <span class="o">-----</span>   <span class="o">---</span> <span class="o">-----</span>  <span class="o">---</span> <span class="o">----</span>   <span class="o">------</span>  <span class="o">------</span> <span class="o">------</span>  <span class="o">----</span>  <span class="o">----</span>     <span class="o">------</span> <span class="o">--------</span>   <span class="o">------</span>     <span class="o">------</span>        <span class="o">-------</span>   <span class="o">--------</span>   <span class="o">--------</span>  <span class="o">---------</span>    <span class="o">-------</span>     <span class="o">------</span>      <span class="o">-----</span>      <span class="o">-----</span>    <span class="o">-------</span>     <span class="o">------</span>  <span class="o">-------</span>      <span class="o">-----</span>        <span class="o">---</span>        <span class="o">---</span>        <span class="o">---</span>       <span class="o">----</span>     <span class="o">------</span>
<span class="n">cpost</span><span class="o">/</span><span class="n">veille_f34</span>                         <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mf">0.0</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">121.40</span><span class="n">s</span>    <span class="mf">2.4</span> <span class="n">MiB</span>    <span class="mf">5.9</span> <span class="n">MiB</span>   <span class="mf">15.2</span> <span class="n">MiB</span>        <span class="mf">0.03</span>       <span class="mf">0.08</span>
<span class="n">cpump</span><span class="o">/</span><span class="n">pelle_dd1_f04</span>                      <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>   <span class="mf">83.5</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">11</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mf">1.4</span> <span class="n">Kim</span>    <span class="mf">1.1</span> <span class="n">Kim</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>   <span class="mi">230</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">121.40</span><span class="n">s</span>    <span class="mf">3.9</span> <span class="n">MiB</span>    <span class="mf">6.8</span> <span class="n">MiB</span>   <span class="mf">17.2</span> <span class="n">MiB</span>        <span class="mf">0.12</span>       <span class="mf">0.11</span>
<span class="n">cpump</span><span class="o">/</span><span class="n">pelle_dd2_f05</span>                      <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>   <span class="mf">83.5</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">11</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mf">1.4</span> <span class="n">Kim</span>    <span class="mf">1.1</span> <span class="n">Kim</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>   <span class="mi">230</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">121.40</span><span class="n">s</span>    <span class="mf">3.9</span> <span class="n">MiB</span>    <span class="mf">7.0</span> <span class="n">MiB</span>   <span class="mf">17.2</span> <span class="n">MiB</span>        <span class="mf">0.17</span>       <span class="mf">0.06</span>
<span class="n">cpump</span><span class="o">/</span><span class="n">xvan_f14</span>                           <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mf">0.0</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>   <span class="mf">12.90</span><span class="n">s</span>    <span class="mf">3.0</span> <span class="n">MiB</span>    <span class="mf">4.7</span> <span class="n">MiB</span>   <span class="mf">16.1</span> <span class="n">MiB</span>        <span class="mf">0.01</span>       <span class="mf">0.01</span>
<span class="n">cpump</span><span class="o">/</span><span class="n">xvan_f15</span>                           <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span> <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mf">0.0</span><span class="o">%</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>    <span class="mi">0</span> <span class="n">Bytes</span>      <span class="mi">1</span> <span class="n">msg</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mf">8.63</span><span class="n">s</span>    <span class="mf">3.0</span> <span class="n">MiB</span>    <span class="mf">4.6</span> <span class="n">MiB</span>   <span class="mf">16.1</span> <span class="n">MiB</span>        <span class="mf">0.01</span>       <span class="mf">0.02</span>
<span class="n">poll</span><span class="o">/</span><span class="n">f62</span>                                 <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.16</span><span class="n">s</span>    <span class="mf">0.05</span><span class="n">s</span>  <span class="mf">0.8</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mf">4.4</span> <span class="n">Kim</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">151.1</span> <span class="n">KiB</span>   <span class="mi">420</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.56</span><span class="n">s</span>   <span class="mf">45.1</span> <span class="n">MiB</span>   <span class="mf">59.0</span> <span class="n">MiB</span>  <span class="mf">229.3</span> <span class="n">MiB</span>        <span class="mf">2.62</span>       <span class="mf">0.32</span>
<span class="n">post</span><span class="o">/</span><span class="n">shim_f63</span>                            <span class="n">stop</span>    <span class="mi">0</span><span class="o">/</span><span class="mi">0</span>          <span class="o">-</span>          <span class="o">-</span>         <span class="o">-</span>     <span class="o">-</span>     <span class="o">-</span>          <span class="o">-</span>        <span class="o">-</span>        <span class="o">-</span>       <span class="o">-</span>          <span class="o">-</span>          <span class="o">-</span>          <span class="o">-</span>          <span class="o">-</span>          <span class="o">-</span>          <span class="o">-</span>          <span class="o">-</span>          <span class="o">-</span>          <span class="o">-</span>          <span class="o">-</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Bytes</span>        <span class="mf">0.00</span>       <span class="mf">0.00</span>
<span class="n">post</span><span class="o">/</span><span class="n">test2_f61</span>                           <span class="n">stop</span>    <span class="mi">0</span><span class="o">/</span><span class="mi">0</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.03</span><span class="n">s</span>    <span class="mf">0.02</span><span class="n">s</span>  <span class="mf">0.5</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span> <span class="mf">11.5</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mf">6.7</span> <span class="n">KiB</span>    <span class="mi">14</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mf">0.58</span><span class="n">s</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Bytes</span>        <span class="mf">0.00</span>       <span class="mf">0.00</span>
<span class="n">sarra</span><span class="o">/</span><span class="n">download_f20</span>                       <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">10.17</span><span class="n">s</span>    <span class="mf">2.87</span><span class="n">s</span>  <span class="mf">1.1</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.1</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.1</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mf">27.1</span> <span class="n">KiB</span>    <span class="mi">47</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>   <span class="mf">36.0</span> <span class="n">KiB</span>    <span class="mi">47</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>   <span class="mf">65.6</span> <span class="n">KiB</span>   <span class="mi">47</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>   <span class="mf">57.57</span><span class="n">s</span>  <span class="mf">132.5</span> <span class="n">MiB</span>  <span class="mf">192.4</span> <span class="n">MiB</span>  <span class="mf">280.1</span> <span class="n">MiB</span>        <span class="mf">2.72</span>       <span class="mf">0.40</span>
<span class="n">sender</span><span class="o">/</span><span class="n">tsource2send_f50</span>                  <span class="n">run</span>   <span class="mi">10</span><span class="o">/</span><span class="mi">10</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">9</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">1.37</span><span class="n">s</span>    <span class="mf">0.52</span><span class="n">s</span>  <span class="mf">1.3</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">5.5</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mf">326.0</span> <span class="n">KiB</span>   <span class="mi">421</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">326.6</span> <span class="n">KiB</span>   <span class="mi">421</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">152.7</span> <span class="n">KiB</span>  <span class="mi">421</span> <span class="n">Files</span>  <span class="mf">118.97</span><span class="n">s</span>  <span class="mf">425.6</span> <span class="n">MiB</span>  <span class="mf">562.8</span> <span class="n">MiB</span>    <span class="mf">2.2</span> <span class="n">GiB</span>        <span class="mf">7.80</span>       <span class="mf">0.93</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">pclean_f90</span>                        <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>   <span class="mi">310</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">82.03</span><span class="n">s</span>   <span class="mf">75.72</span><span class="n">s</span>  <span class="mf">0.7</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">5.6</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">111.4</span> <span class="n">KiB</span>   <span class="mi">120</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>   <span class="mf">99.9</span> <span class="n">KiB</span>   <span class="mi">111</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>   <span class="mf">38.02</span><span class="n">s</span>  <span class="mf">127.4</span> <span class="n">MiB</span>  <span class="mf">169.0</span> <span class="n">MiB</span>  <span class="mf">249.6</span> <span class="n">MiB</span>        <span class="mf">2.37</span>       <span class="mf">0.27</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">pclean_f92</span>                        <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">82.49</span><span class="n">s</span>   <span class="mf">76.06</span><span class="n">s</span> <span class="mf">19.1</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.7</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mf">99.9</span> <span class="n">KiB</span>   <span class="mi">111</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">103.0</span> <span class="n">KiB</span>   <span class="mi">111</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.28</span><span class="n">s</span>  <span class="mf">126.4</span> <span class="n">MiB</span>  <span class="mf">168.5</span> <span class="n">MiB</span>  <span class="mf">249.2</span> <span class="n">MiB</span>        <span class="mf">2.04</span>       <span class="mf">0.21</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">rabbitmqtt_f22</span>                    <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">1.25</span><span class="n">s</span>    <span class="mf">0.54</span><span class="n">s</span>  <span class="mf">1.3</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">5.5</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">326.0</span> <span class="n">KiB</span>   <span class="mi">421</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">326.0</span> <span class="n">KiB</span>   <span class="mi">421</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.77</span><span class="n">s</span>  <span class="mf">126.0</span> <span class="n">MiB</span>  <span class="mf">167.6</span> <span class="n">MiB</span>  <span class="mf">248.7</span> <span class="n">MiB</span>        <span class="mf">2.12</span>       <span class="mf">0.20</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">t_dd1_f00</span>                         <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">3</span>   <span class="mf">23.15</span><span class="n">s</span>    <span class="mf">3.06</span><span class="n">s</span>  <span class="mf">0.1</span><span class="n">s</span> <span class="mf">82.3</span><span class="o">%</span>  <span class="mf">3.4</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">14</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">231.6</span> <span class="n">KiB</span>    <span class="mf">1.6</span> <span class="n">Kim</span>    <span class="mf">1.3</span> <span class="n">Kim</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">168.4</span> <span class="n">KiB</span>   <span class="mi">293</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.19</span><span class="n">s</span>  <span class="mf">127.3</span> <span class="n">MiB</span>  <span class="mf">171.0</span> <span class="n">MiB</span>  <span class="mf">250.1</span> <span class="n">MiB</span>        <span class="mf">2.77</span>       <span class="mf">0.32</span>
<span class="n">shovel</span><span class="o">/</span><span class="n">t_dd2_f00</span>                         <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">11.82</span><span class="n">s</span>    <span class="mf">2.61</span><span class="n">s</span>  <span class="mf">0.2</span><span class="n">s</span> <span class="mf">82.2</span><span class="o">%</span>  <span class="mf">3.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">13</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">225.7</span> <span class="n">KiB</span>    <span class="mf">1.6</span> <span class="n">Kim</span>    <span class="mf">1.3</span> <span class="n">Kim</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">166.6</span> <span class="n">KiB</span>   <span class="mi">290</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.33</span><span class="n">s</span>  <span class="mf">127.3</span> <span class="n">MiB</span>  <span class="mf">170.6</span> <span class="n">MiB</span>  <span class="mf">250.1</span> <span class="n">MiB</span>        <span class="mf">2.74</span>       <span class="mf">0.39</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">amqp_f30</span>                       <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">39</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">18.79</span><span class="n">s</span>    <span class="mf">6.44</span><span class="n">s</span>  <span class="mf">0.7</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.5</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">2</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">181.0</span> <span class="n">KiB</span>   <span class="mi">237</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">146.8</span> <span class="n">KiB</span>  <span class="mi">237</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">117.95</span><span class="n">s</span>  <span class="mf">126.2</span> <span class="n">MiB</span>  <span class="mf">168.0</span> <span class="n">MiB</span>  <span class="mf">248.9</span> <span class="n">MiB</span>        <span class="mf">2.20</span>       <span class="mf">0.27</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">cclean_f91</span>                     <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>   <span class="mi">213</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.00</span><span class="n">s</span>    <span class="mf">0.00</span><span class="n">s</span>  <span class="mf">0.5</span><span class="n">s</span> <span class="mf">17.4</span><span class="o">%</span>  <span class="mf">2.7</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">6</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mf">35.5</span> <span class="n">KiB</span>    <span class="mi">92</span> <span class="n">msgs</span>    <span class="mi">16</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>   <span class="mf">13.37</span><span class="n">s</span>  <span class="mf">126.1</span> <span class="n">MiB</span>  <span class="mf">167.9</span> <span class="n">MiB</span>  <span class="mf">248.8</span> <span class="n">MiB</span>        <span class="mf">2.53</span>       <span class="mf">0.36</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">cdnld_f21</span>                      <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">41</span><span class="o">%</span>      <span class="mi">0</span>   <span class="mf">10.43</span><span class="n">s</span>    <span class="mf">3.13</span><span class="n">s</span>  <span class="mf">0.1</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.4</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">2</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.4</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">167.1</span> <span class="n">KiB</span>   <span class="mi">262</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">162.7</span> <span class="n">KiB</span>  <span class="mi">262</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">117.90</span><span class="n">s</span>  <span class="mf">131.6</span> <span class="n">MiB</span>  <span class="mf">190.7</span> <span class="n">MiB</span>  <span class="mf">277.6</span> <span class="n">MiB</span>        <span class="mf">3.39</span>       <span class="mf">0.42</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">cfile_f44</span>                      <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">40</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">3.32</span><span class="n">s</span>    <span class="mf">0.30</span><span class="n">s</span>  <span class="mf">0.0</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.5</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">4</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.4</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">178.3</span> <span class="n">KiB</span>   <span class="mi">509</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">161.8</span> <span class="n">KiB</span>  <span class="mi">509</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.09</span><span class="n">s</span>  <span class="mf">130.9</span> <span class="n">MiB</span>  <span class="mf">188.5</span> <span class="n">MiB</span>  <span class="mf">278.0</span> <span class="n">MiB</span>        <span class="mf">2.62</span>       <span class="mf">0.30</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">cp_f61</span>                         <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">12</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">6.42</span><span class="n">s</span>    <span class="mf">2.09</span><span class="n">s</span>  <span class="mf">0.1</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">2.8</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="mi">597</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">326.6</span> <span class="n">KiB</span>   <span class="mi">421</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>   <span class="mf">69.0</span> <span class="n">KiB</span>  <span class="mi">123</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.23</span><span class="n">s</span>  <span class="mf">125.9</span> <span class="n">MiB</span>  <span class="mf">166.8</span> <span class="n">MiB</span>  <span class="mf">248.9</span> <span class="n">MiB</span>        <span class="mf">2.48</span>       <span class="mf">0.31</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">ftp_f70</span>                        <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">39</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">1.75</span><span class="n">s</span>    <span class="mf">0.77</span><span class="n">s</span>  <span class="mf">0.1</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">2</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.4</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">158.4</span> <span class="n">KiB</span>   <span class="mi">340</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">159.8</span> <span class="n">KiB</span>  <span class="mi">340</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.04</span><span class="n">s</span>  <span class="mf">126.1</span> <span class="n">MiB</span>  <span class="mf">167.4</span> <span class="n">MiB</span>  <span class="mf">248.8</span> <span class="n">MiB</span>        <span class="mf">2.22</span>       <span class="mf">0.36</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">q_f71</span>                          <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>  <span class="mi">31</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">3.12</span><span class="n">s</span>    <span class="mf">1.18</span><span class="n">s</span>  <span class="mf">5.7</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">1.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mf">1.1</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">142.7</span> <span class="n">KiB</span>   <span class="mi">396</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">124.6</span> <span class="n">KiB</span>  <span class="mi">396</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.49</span><span class="n">s</span>  <span class="mf">135.0</span> <span class="n">MiB</span>  <span class="mf">191.9</span> <span class="n">MiB</span>  <span class="mf">928.8</span> <span class="n">MiB</span>        <span class="mf">4.30</span>       <span class="mf">0.68</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">rabbitmqtt_f31</span>                 <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">8</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">4.27</span><span class="n">s</span>    <span class="mf">1.10</span><span class="n">s</span>  <span class="mf">1.1</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">2.8</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="mi">598</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">326.0</span> <span class="n">KiB</span>   <span class="mi">421</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>   <span class="mf">69.0</span> <span class="n">KiB</span>  <span class="mi">123</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">118.15</span><span class="n">s</span>  <span class="mf">126.2</span> <span class="n">MiB</span>  <span class="mf">167.9</span> <span class="n">MiB</span>  <span class="mf">248.9</span> <span class="n">MiB</span>        <span class="mf">2.22</span>       <span class="mf">0.27</span>
<span class="n">subscribe</span><span class="o">/</span><span class="n">u_sftp_f60</span>                     <span class="n">run</span>     <span class="mi">3</span><span class="o">/</span><span class="mi">3</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">9</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">2.69</span><span class="n">s</span>    <span class="mf">1.71</span><span class="n">s</span>  <span class="mf">1.2</span><span class="n">s</span>  <span class="mf">0.2</span><span class="o">%</span>  <span class="mf">2.8</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">3</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="mi">599</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mf">326.6</span> <span class="n">KiB</span>   <span class="mi">421</span> <span class="n">msgs</span>      <span class="mi">1</span> <span class="n">msg</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>   <span class="mf">69.0</span> <span class="n">KiB</span>  <span class="mi">122</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>  <span class="mf">117.93</span><span class="n">s</span>  <span class="mf">126.4</span> <span class="n">MiB</span>  <span class="mf">167.8</span> <span class="n">MiB</span>  <span class="mf">249.2</span> <span class="n">MiB</span>        <span class="mf">2.05</span>       <span class="mf">0.33</span>
<span class="n">watch</span><span class="o">/</span><span class="n">f40</span>                                <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">0.06</span><span class="n">s</span>    <span class="mf">0.02</span><span class="n">s</span>  <span class="mf">1.6</span><span class="n">s</span>  <span class="mf">0.0</span><span class="o">%</span>  <span class="mf">3.0</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">0</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>    <span class="mi">0</span> <span class="n">Bytes</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">74</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>  <span class="mf">169.5</span> <span class="n">KiB</span>   <span class="mi">203</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>   <span class="mf">57.21</span><span class="n">s</span>   <span class="mf">46.3</span> <span class="n">MiB</span>   <span class="mf">65.3</span> <span class="n">MiB</span>  <span class="mf">311.8</span> <span class="n">MiB</span>        <span class="mf">1.95</span>       <span class="mf">0.14</span>
<span class="n">winnow</span><span class="o">/</span><span class="n">t00_f10</span>                           <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">6.38</span><span class="n">s</span>    <span class="mf">3.47</span><span class="n">s</span>  <span class="mf">0.2</span><span class="n">s</span> <span class="mf">51.7</span><span class="o">%</span>  <span class="mf">1.7</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">2</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mf">66.8</span> <span class="n">KiB</span>   <span class="mi">116</span> <span class="n">msgs</span>    <span class="mi">60</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>   <span class="mf">32.3</span> <span class="n">KiB</span>    <span class="mi">56</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>   <span class="mf">57.79</span><span class="n">s</span>   <span class="mf">42.5</span> <span class="n">MiB</span>   <span class="mf">56.2</span> <span class="n">MiB</span>   <span class="mf">83.3</span> <span class="n">MiB</span>        <span class="mf">0.77</span>       <span class="mf">0.12</span>
<span class="n">winnow</span><span class="o">/</span><span class="n">t01_f10</span>                           <span class="n">run</span>     <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">0</span> <span class="mi">100</span><span class="o">%</span>   <span class="mi">0</span><span class="o">%</span>      <span class="mi">0</span>    <span class="mf">9.75</span><span class="n">s</span>    <span class="mf">2.53</span><span class="n">s</span>  <span class="mf">0.1</span><span class="n">s</span> <span class="mf">51.3</span><span class="o">%</span>  <span class="mf">1.8</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span>   <span class="mi">2</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>  <span class="mi">0</span> <span class="n">Bytes</span><span class="o">/</span><span class="n">s</span>   <span class="mf">67.2</span> <span class="n">KiB</span>   <span class="mi">117</span> <span class="n">msgs</span>    <span class="mi">60</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>   <span class="mf">32.8</span> <span class="n">KiB</span>    <span class="mi">57</span> <span class="n">msgs</span>     <span class="mi">0</span> <span class="n">msgs</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>    <span class="mi">0</span> <span class="n">Bytes</span>    <span class="mi">0</span> <span class="n">Files</span>   <span class="mf">56.37</span><span class="n">s</span>   <span class="mf">42.3</span> <span class="n">MiB</span>   <span class="mf">55.7</span> <span class="n">MiB</span>   <span class="mf">83.2</span> <span class="n">MiB</span>        <span class="mf">0.81</span>       <span class="mf">0.12</span>
      <span class="n">Total</span> <span class="n">Running</span> <span class="n">Configs</span><span class="p">:</span>  <span class="mi">25</span> <span class="p">(</span> <span class="n">Processes</span><span class="p">:</span> <span class="mi">64</span> <span class="n">missing</span><span class="p">:</span> <span class="mi">0</span> <span class="n">stray</span><span class="p">:</span> <span class="mi">0</span> <span class="p">)</span>
                     <span class="n">Memory</span><span class="p">:</span> <span class="n">uss</span><span class="p">:</span><span class="mf">2.5</span> <span class="n">GiB</span> <span class="n">rss</span><span class="p">:</span><span class="mf">3.4</span> <span class="n">GiB</span> <span class="n">vms</span><span class="p">:</span><span class="mf">7.4</span> <span class="n">GiB</span>
                   <span class="n">CPU</span> <span class="n">Time</span><span class="p">:</span> <span class="n">User</span><span class="p">:</span><span class="mf">53.06</span><span class="n">s</span> <span class="n">System</span><span class="p">:</span><span class="mf">7.00</span><span class="n">s</span>
       <span class="n">Pub</span><span class="o">/</span><span class="n">Sub</span> <span class="n">Received</span><span class="p">:</span> <span class="mi">99</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="p">(</span><span class="mf">63.2</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="p">),</span> <span class="n">Sent</span><span class="p">:</span>  <span class="mi">53</span> <span class="n">msgs</span><span class="o">/</span><span class="n">s</span> <span class="p">(</span><span class="mf">29.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="p">)</span> <span class="n">Queued</span><span class="p">:</span> <span class="mi">3</span> <span class="n">Retry</span><span class="p">:</span> <span class="mi">523</span><span class="p">,</span> <span class="n">Mean</span> <span class="n">lag</span><span class="p">:</span> <span class="mf">4.54</span><span class="n">s</span>
          <span class="n">Data</span> <span class="n">Received</span><span class="p">:</span> <span class="mi">18</span> <span class="n">Files</span><span class="o">/</span><span class="n">s</span> <span class="p">(</span><span class="mf">9.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="p">),</span> <span class="n">Sent</span><span class="p">:</span> <span class="mi">3</span> <span class="n">Files</span><span class="o">/</span><span class="n">s</span> <span class="p">(</span><span class="mf">1.3</span> <span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>
<span class="n">fractal</span><span class="o">%</span> <span class="n">sr3</span> <span class="o">--</span><span class="n">full</span> <span class="n">status</span>
</pre></div>
</div>
<p>La première rangée catégorise les informations pour les lignes suivantes:</p>
<ul class="simple">
<li><p>Processes (Processus): Indique le nombre d’instances et si il y en manquent.</p></li>
<li><p>Connection (Connexion): Indique l’état de la connexion externe.</p></li>
<li><p>Lag (Délai): Le sévérité du délai expériencé ou la durée de vie des données par le temps que le téléchargement soit complété.</p></li>
<li><p>Last (Dernier): combien de temps a passé depuis le dernier transfert de fichier ou message.</p></li>
<li><p>Rates (Taux): La vitesse des transferts, plusieurs métriques sont communiqués.</p></li>
<li><p>Counters (Compteurs): La base des calculs des taux, se réinitialise à chaque interval de housekeeping.</p></li>
<li><p>Memory (Mémoire): L’utilisation de la mémoire des processus dans une configuration particulière.</p></li>
<li><p>CPU time (temps de traitement): Le temps de traitement des processus dans une configuration particulière.</p></li>
</ul>
<p>Les dernières trois catégories sont seulement listés avec l’option <cite>–full</cite> est fourni.</p>
<p>La deuxième rangée donne des détails sur les en têtes de chacune des catégories.</p>
<p>Les configurations sont répertoriées sur la gauche. Pour chaque configuration, l’état.
sera :</p>
<ul class="simple">
<li><p>hung : les processus semblent bloqués et n’écrivent rien dans les journaux.</p></li>
<li><p>idle : tous les processus en cours d’exécution, mais ne transfert pas depuis trop longtemps (runStateThreshold_idle.)</p></li>
<li><p>lag : tous les processus en cours d’exécution, mais les messages en cours de traitement sont trop anciens ( runStateThreshold_lag )</p></li>
<li><p>part: certains processus sont en cours d’exécution, d’autres manquent à l’appel.</p></li>
<li><p>reje : tous les processus en cours d’exécution, mais un pourcentage trop élevé de messages rejetés (runStateThreshold_reject )</p></li>
<li><p>rtry : tous les processus en cours d’exécution, mais un grand nombre de transferts échouent, causant d’autres tentatives (runStateThreshold_retry )</p></li>
<li><p>run : tous les processus sont en cours d’exécution (et en transfert, et pas en retard, et pas lents… état normal.)</p></li>
<li><p>slow : transfert de moins que le minimum d’octets/seconde ( runStateThreshold_slow )</p></li>
<li><p>stop : aucun processus n’est en cours d’exécution.</p></li>
</ul>
<p>Les colonnes à droite donnent plus d’informations, détaillant le nombre de processus en cours d’exécution à partir du nombre attendu.
Par exemple, 3/3 signifie 3 processus ou instances sont trouvés à partir des 3 attendus.
Expected liste combien de processus devraient être exécutés à partir d’une configuration même si ils sont arrêtés.</p>
<p>La colonne Retry indique le nombre de messages de notifications stockés dans la queue Retry locale. Celle-ci indique quelles chaînes ont de la difficultés à traiter les données.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Entête</p></td>
<td><p>But</p></td>
</tr>
<tr class="row-even"><td><p>State</p></td>
<td><p>Statut d’une configuration particulière: stop|run|disa|part|wVip|fore</p></td>
</tr>
<tr class="row-odd"><td><p>Run</p></td>
<td><p>Nombre de processus ou instances en marche en comparaison au nombre attendu. 3/10 3 processes running of 10 expected.</p></td>
</tr>
<tr class="row-even"><td><p>Retry</p></td>
<td><p>Le nombre de messages dans la queue retry, indiquant des problèmes avec le transfert.</p></td>
</tr>
<tr class="row-odd"><td><p>msg</p></td>
<td><p>Le pourcentage du temps connecté à un broker pour publier ou s’abonner à des messages.</p></td>
</tr>
<tr class="row-even"><td><p>data</p></td>
<td><p>Le pourcentage du temps connecté à une source de données.</p></td>
</tr>
<tr class="row-odd"><td><p>LagQueued</p></td>
<td><p>Le nombre de messages en attente sur le courtier (serveur à distance.)</p></td>
</tr>
<tr class="row-even"><td><p>LagMax</p></td>
<td><p>La durée maximale d’un message à la reception (avant un téléchargement).</p></td>
</tr>
<tr class="row-odd"><td><p>LagAvg</p></td>
<td><p>La durée moyenne d’un message à la reception (avant un téléchargement).</p></td>
</tr>
<tr class="row-even"><td><p>Last</p></td>
<td><p>Combien de temps a passé depuis le dernier téléchargement (ou message.)</p></td>
</tr>
<tr class="row-odd"><td><p>pubsub</p></td>
<td><p>Le débit des messages pub/sub téléchargés en bytes/seconde.</p></td>
</tr>
<tr class="row-even"><td><p>messages</p></td>
<td><p>Le débit des messages pub/sub téléchargés en message/seconde.</p></td>
</tr>
<tr class="row-odd"><td><p>%rej</p></td>
<td><p>Le pourcentage des messages téléchargés rejeté (indication du statut du filtre d’abonnement (subscription).</p></td>
</tr>
<tr class="row-even"><td><p>RxData</p></td>
<td><p>Le montant de données téléchargées (pas en format message)</p></td>
</tr>
<tr class="row-odd"><td><p>TxData</p></td>
<td><p>Le montant de données envoyées (pas en format message)</p></td>
</tr>
<tr class="row-even"><td><p>subBytes</p></td>
<td><p>Compteur d’octets de messages pub/sub reçus.</p></td>
</tr>
<tr class="row-odd"><td><p>Accepted</p></td>
<td><p>Compteur du nombre de messages acceptés.</p></td>
</tr>
<tr class="row-even"><td><p>Rejected</p></td>
<td><p>Compteur du nombre de messages rejetés.</p></td>
</tr>
<tr class="row-odd"><td><p>Malformed</p></td>
<td><p>Compteur de messages qui ont été rejetés parce qu’ils n’ont pas pu être compris.</p></td>
</tr>
<tr class="row-even"><td><p>pubBytes</p></td>
<td><p>Compteur d’octets de messages en cours de publication.</p></td>
</tr>
<tr class="row-odd"><td><p>pubMsgs</p></td>
<td><p>Compteur de messages en cours de publication.</p></td>
</tr>
<tr class="row-even"><td><p>pubMal</p></td>
<td><p>Compteur de messages dont la publication a échoué.</p></td>
</tr>
<tr class="row-odd"><td><p>rxData</p></td>
<td><p>Compteur d’octets de fichiers en cours de téléchargement.</p></td>
</tr>
<tr class="row-even"><td><p>rxFiles</p></td>
<td><p>Compteur de fichiers en cours de téléchargement.</p></td>
</tr>
<tr class="row-odd"><td><p>txData</p></td>
<td><p>Compteur d’octets de fichiers envoyés.</p></td>
</tr>
<tr class="row-even"><td><p>txFiles</p></td>
<td><p>Compteur de fichiers envoyés.</p></td>
</tr>
<tr class="row-odd"><td><p>Since</p></td>
<td><p>Combien de secondes depuis la dernière réinitialisation du compteur (base pour les calculs de taux.)</p></td>
</tr>
<tr class="row-even"><td><p>uss</p></td>
<td><p>unique set size (utilisation de la mémoire des instances.) Mémoire physique unique réelle utilisée par les processus.</p></td>
</tr>
<tr class="row-odd"><td><p>rss</p></td>
<td><p>resident set size (utilisation de la mémoire des instances) Mémoire physique réelle utilisée, y compris partagée.</p></td>
</tr>
<tr class="row-even"><td><p>vms</p></td>
<td><p>taille de la mémoire virtuelle de tous les partages et physiques et swap alloués ensemble.</p></td>
</tr>
<tr class="row-odd"><td><p>user</p></td>
<td><p>temps d’utilisation CPU de l’utilisateur</p></td>
</tr>
<tr class="row-even"><td><p>system</p></td>
<td><p>temps de CPU utilisé par le système</p></td>
</tr>
</tbody>
</table>
<p>À la fin de la liste, nous avons la somme des valeurs mentionnées précédemment.</p>
</section>
</section>
</section>
<section id="la-ceuillette-de-messages">
<h2>La ceuillette de messages<a class="headerlink" href="#la-ceuillette-de-messages" title="Link to this heading"></a></h2>
<p>La plupart des composants Metpx Sarracenia boucle sur la ceuillette et/ou
réception de messages AMQP. Habituellement, les messages d’intérêt sont
dans le format d´une <em>avis</em> <a class="reference external" href="../Reference/sr_post.7.html">sr_post(7)</a>, annonçant la disponibilité
d’un fichier en publiant l’URL pour l´accéder (ou une partie de celle-ci).
Les messages AMQP sont publiés avec un <em>exchange</em> comme destinataire. Sur un courtier (serveur AMQP.) L’exchange
délivre des messages aux files d’attente. Pour recevoir de messages,
on doit fournir les informations d’identification pour se connecter au
courtier (message AMQP).  Une fois connecté, un consommateur doit créer
une fil d’attente pour retenir les messages en attente. Le consommateur
doit ensuite lier la fil d’attente à une ou plusieurs échanges de manière
à ce qu’il mette dans sa fil d’attente.</p>
<p>Une fois les liaisons (anglais: <em>bindings</em>) établies, le programme peut
recevoir des messages. Lorsqu’un message est reçu, un filtrage
supplémentaire est possible en utilisant des expressions régulières sur
les messages AMQP. Après qu’un message a passé avec succès ce processus
de sélection et d’autres validations internes, le processus peut exécuter
un script de plugin <strong>on_message</strong> pour traiter le message davantage
de façon spécialisé. Si ce plugin retourne False comme résultat, le
message est rejeté. Si c’est vrai, le traitement du message se poursuit.</p>
<p>Les sections suivantes expliquent toutes les options pour régler cette
partie “consommateur” de les programmes de Sarracenia.</p>
<section id="reglage-de-broker">
<h3>Réglage de Broker<a class="headerlink" href="#reglage-de-broker" title="Link to this heading"></a></h3>
<p><strong>broker [amqp|mqtt]{s}://&lt;user&gt;:&lt;password&gt;&#64;&lt;brokerhost&gt;[:port]/&lt;vhost&gt;</strong></p>
<p>Un URI AMQP est utilisé pour configurer une connexion à une pompe à messages
(AMQP broker). Certains composants de Sarracenia définissent une valeur par
défaut raisonnable pour cette option. Vous fournissez l’utilisateur normal,
l’hôte, le port des connexions. Dans la plupart des fichiers de configuration,
le mot de passe est manquant. Le mot de passe n’est normalement inclus que dans
le fichier credentials.conf.</p>
<p>L´application Sarracenia n’a pas utilisé vhosts, donc <strong>vhost</strong> devrait toujours être <strong>/</strong>.</p>
<p>pour plus d’informations sur le format URI de l’AMQP : ( <a class="reference external" href="https://www.rabbitmq.com/uri-spec.html">https://www.rabbitmq.com/uri-spec.html</a>))</p>
<p>soit dans le fichier default.conf, soit dans chaque fichier de configuration spécifique.
L’option courtier indique à chaque composante quel courtier contacter.</p>
<p><strong>broker [amqp|mqtt]{s}://&lt;user&gt;:&lt;pw&gt;&#64;&lt;brokerhost&gt;[:port]/&lt;vhost&gt;</strong></p>
<dl class="simple">
<dt>::</dt><dd><p>(par défaut : Aucun et il est obligatoire de le définir)</p>
</dd>
</dl>
<p>Une fois connecté à un courtier AMQP, l’utilisateur doit lier une fil d’attente.
à l´*exchange* et aux thèmes (<em>topics</em>) pour déterminer les messages intérêsseants.</p>
</section>
<section id="configuration-de-fil-d-attente">
<h3>Configuration de fil d´attente<a class="headerlink" href="#configuration-de-fil-d-attente" title="Link to this heading"></a></h3>
<p>Une fois connecté à un courtier AMQP, l’utilisateur doit créer une fil d’attente.</p>
<p>Mise en fil d’attente sur broker :</p>
<ul class="simple">
<li><p><strong>queue &lt;nom&gt; (par défaut : q_&lt;brokerUser&gt;.&lt;programName&gt;.&lt;configName&gt;.&lt;configName&gt;)</strong></p></li>
<li><p><strong>expire &lt;durée&gt; (par défaut : 5m == cinq minutes. À OUTREPASSER)</strong></p></li>
<li><p><strong>message_ttl &lt;durée&gt; (par défaut : Aucun)</strong></p></li>
<li><p><strong>prefetch &lt;N&gt; (par défaut : 1)</strong></p></li>
</ul>
<p>Habituellement, les composants devinent des valeurs par défaut raisonnables pour
toutes ces valeurs et les utilisateurs n’ont pas besoin de les définir.  Pour
les cas moins habituels, l’utilisateur peut avoir besoin a remplacer les valeurs
par défaut. La fil d’attente est l’endroit où les avis sont conservés
sur le serveur pour chaque abonné.</p>
<section id="queue-queue-name-qn-name">
<h4>[ queue|queue_name|qn &lt;name&gt;]<a class="headerlink" href="#queue-queue-name-qn-name" title="Link to this heading"></a></h4>
<p>Par défaut, les composants créent un nom de fil d’attente qui doit être unique. Le
queue_name par défaut créé par les composants et suit la convention suivante :</p>
<blockquote>
<div><p><strong>q_&lt;brokerUser&gt;.&lt;programName&gt;.&lt;configName&gt;.&lt;random&gt;.&lt;random&gt;</strong></p>
</div></blockquote>
<p>Ou:</p>
<ul class="simple">
<li><p><em>brokerUser</em> est le nom d’utilisateur utilisé pour se connecter au courtier (souvent: <em>anonymous</em> )</p></li>
<li><p><em>programName</em> est le composant qui utilise la fil d’attente (par exemple <em>sr_subscribe</em> )</p></li>
<li><p><em>configName</em> est le fichier de configuration utilisé pour régler le comportement des composants</p></li>
<li><p><em>random</em> n’est qu’une série de caractères choisis pour éviter les affrontements de plusieurs
personnes qui utilisent les mêmes configurations</p></li>
</ul>
<p>Les utilisateurs peuvent remplacer la valeur par défaut à condition qu’elle commence par <strong>q_&lt;brokerUser&gt;</strong>.</p>
<p>Lorsque plusieurs instances sont utilisées, elles utilisent toutes la même fil d’attente, pour du multi-tasking simple.
Si plusieurs ordinateurs disposent d’un système de fichiers domestique partagé, le
queue_name est écrit à :</p>
<blockquote>
<div><p>~/.cache/sarra/&lt;programName&gt;/&lt;configName&gt;/&lt;programName&gt;_&lt;configName&gt;_&lt;brokerUser&gt;.qname</p>
</div></blockquote>
<p>Les instances démarrées sur n’importe quel nœud ayant accès au même fichier partagé utiliseront la
même fil d’attente. Certains voudront peut-être utiliser l’option <em>queue_name</em> comme méthode plus explicite
de partager le travail sur plusieurs nœuds.</p>
</section>
</section>
<section id="amqp-queue-bindings">
<h3>AMQP QUEUE BINDINGS<a class="headerlink" href="#amqp-queue-bindings" title="Link to this heading"></a></h3>
<p>Une fois qu’on a une fil d’attente, elle doit être liée à un échange (exchange.)
Les utilisateurs ont presque toujours besoin de définir ces options. Une
fois qu’une fil d’attente existe sur le courtier, il doit être lié (<em>bound</em>) à
une échange. Les liaisons (<em>bindings</em>) définissent ce que l’on entend par
les avis que le programme reçoit. La racine du thème
est fixe, indiquant la version du protocole et le type de l’arborescence.
(mais les développeurs peuvent l’écraser avec le <strong>topic_prefix</strong>.
option.)</p>
<p>Ces options définissent les messages (notifications URL) que le programme reçoit :</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>exchange      &lt;name&gt;         (défaut: xpublic)</strong></p></li>
<li><p><strong>exchangeSuffix      &lt;name&gt;  (défaut: None)</strong></p></li>
<li><p><strong>topic_prefix  &lt;amqp pattern&gt; (défaut: 03 – developer option)</strong></p></li>
<li><p><strong>subtopic      &lt;amqp pattern&gt; (pas de défaut, doit apparaitre apres exchange)</strong></p></li>
</ul>
</div></blockquote>
<section id="subtopic-amqp-pattern-default">
<h4>subtopic &lt;amqp pattern&gt; (default: #)<a class="headerlink" href="#subtopic-amqp-pattern-default" title="Link to this heading"></a></h4>
<p>Dans les publications d’un échange, le paramètre de sous-thème restreint la sélection de produits.
Pour donner une valeur correcte au sous-thème, on a le choix de filtrer en utilisant <strong>subtopic</strong>
avec seulement le wildcard limité d’AMQP et à longueur limitée à 255 octets codés, ou l’expression
régulière la plus puissante basés sur les mécanismes  <strong>accept/reject</strong> décrits ci-dessous.
La différence étant que le Le filtrage AMQP est appliqué par le courtier lui-même, ce qui évite
que les avis ne soient livrés au client du tout. Les modèles <strong>accept/reject</strong> s’appliquent
aux messages envoyés par le courtier à l’abonné. En d’autres termes,  <strong>accept/reject</strong> sont
des filtres côté client, alors que <strong>subtopic</strong> est le filtrage côté serveur.</p>
<p>Il est préférable d’utiliser le filtrage côté serveur pour réduire le nombre
de avis envoyées au client à un petit sur-ensemble de ce qui est pertinent,
et n’effectuer qu’un réglage fin avec l’outil mécanismes côté client, économisant
la bande passante et le traitement pour tous.</p>
<p>topic_prefix est principalement d’intérêt pendant les transitions de version
de protocole, où l’on souhaite spécifier une version sans protocole par défaut
des messages auxquels s’abonner, ou bien pour manipuler des rapports de disposition,
au lieu d’avis.</p>
<p>Habituellement, l’utilisateur spécifie un échange et plusieurs options de sous-thèmes.
<strong>subtopic</strong> est ce qui est normalement utilisé pour indiquer les messages d’intérêt.
Pour utiliser le sous-thème pour filtrer les produits, faites correspondre la
chaîne de sous-thèmes avec le chemin relatif dans l´arborescence de répertoires sur le serveur.</p>
<p>Par exemple, en consommant à partir de DD, pour donner une valeur correcte au sous-thème, on peut
Parcourez notre site Web <strong>http://dd.weather.gc.ca</strong> et notez tous les annuaires.
d’intérêt.  Pour chaque arborescence de répertoires d’intérêt, écrivez un <strong>subtopic</strong>.
comme suit :</p>
<blockquote>
<div><p><strong>subtopic  directory1.*.subdirectory3.*.subdirectory5.#</strong></p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ou</span><span class="p">:</span>
      <span class="o">*</span>                <span class="n">correspond</span> <span class="n">a</span> <span class="n">un</span> <span class="n">seul</span> <span class="n">nom</span> <span class="n">de</span> <span class="n">repertoire</span>
      <span class="c1">#                correspond à toute arborescence de répertoires restante</span>
</pre></div>
</div>
<p>On peut utiliser plusieurs liaisons à plusieurs échanges comme cela:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">exchange</span> <span class="n">A</span>
<span class="n">subtopic</span> <span class="n">directory1</span><span class="o">.*.</span><span class="n">directory2</span><span class="o">.</span><span class="c1">#</span>

<span class="n">exchange</span> <span class="n">B</span>
<span class="n">subtopic</span> <span class="o">*.</span><span class="n">directory4</span><span class="o">.</span><span class="c1">#</span>
</pre></div>
</div>
<p>Cela va déclarer deux liaisons différentes à deux échanges différents et deux arborescences de fichiers différentes.
Alors que la liaison par défaut consiste à se lier à tout, certains courtiers pourraient ne pas permettre aux
clients à définir des liaisons, ou on peut vouloir utiliser des liaisons existantes.
On peut désactiver la liaison de fil d’attente comme cela:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subtopic</span> <span class="kc">None</span>
</pre></div>
</div>
<p>(False, ou off marchera aussi.)</p>
</section>
</section>
<section id="client-side-filtering">
<h3>Client-side Filtering<a class="headerlink" href="#client-side-filtering" title="Link to this heading"></a></h3>
<p>Nous avons sélectionné nos messages via <strong>exchange</strong>, <strong>subtopic</strong> et <strong>subtopic</strong>.
Le courtier met les messages correspondants dans notre fil d’attente (<em>queue</em>).
Le composant télécharge ces messages.</p>
<p>Les clients Sarracenia implémentent un filtrage plus flexible côté client
en utilisant les expressions régulières.</p>
<section id="brief-introduction-to-regular-expressions">
<h4>Brief Introduction to Regular Expressions<a class="headerlink" href="#brief-introduction-to-regular-expressions" title="Link to this heading"></a></h4>
<p>Les expressions régulières sont un moyen très puissant d’exprimer les correspondances de motifs.
Ils offrent une flexibilité extrême, mais dans ces exemples, nous utiliserons seulement un
petit sous-ensemble : Le point (.) est un joker qui correspond à n’importe quel caractère
unique. S’il est suivi d’un nombre d’occurrences, il indique le nombre de lettres
qui correspondent. Le caractère * (astérisque), signifie un nombre quelconque d’occurrences.
alors :</p>
<blockquote>
<div><ul class="simple">
<li><p>.* signifie n’importe quelle séquence de caractères de n’importe quelle longueur.
En d’autres termes, faire correspondre n’importe quoi.</p></li>
<li><p>cap.* signifie toute séquence de caractères commençant par cap.</p></li>
<li><p>.*CAP.* signifie n’importe quelle séquence de caractères avec CAP quelque part dedans.</p></li>
<li><p>.*CAP signifie toute séquence de caractères qui se termine par CAP.</p></li>
<li><p>Dans le cas où plusieurs portions de la chaîne de caractères pourraient correspondre, la plus longue est sélectionnée.</p></li>
<li><p>.*?CAP comme ci-dessus, mais <em>non-greedy</em>, ce qui signifie que le match le plus court est choisi.</p></li>
<li><p>noter que l’implantaions de regexp en C n’inclu pas le <em>greediness</em>, alors certains expressions
ne seront pas interpretés pareilles par les outils implanté en C: sr_cpost, sr_cpump, où libsrshim.</p></li>
</ul>
</div></blockquote>
<p>Veuillez consulter diverses ressources Internet pour obtenir de plus amples renseignements:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/re.html">https://docs.python.org/3/library/re.html</a></p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Regular_expression">https://en.wikipedia.org/wiki/Regular_expression</a></p></li>
<li><p><a class="reference external" href="http://www.regular-expressions.info/">http://www.regular-expressions.info/</a></p></li>
</ul>
</div></blockquote>
</section>
<section id="accept-reject-and-accept-unmatch">
<h4>accept, reject and accept_unmatch<a class="headerlink" href="#accept-reject-and-accept-unmatch" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>accept    &lt;expression régulière (regexp)&gt;  (facultatif)</strong></p></li>
<li><p><strong>reject    &lt;expression régulière (regexp)&gt;  (facultatif)</strong></p></li>
<li><p><strong>acceptUnmatched   &lt;booléen&gt; (par défaut: True)</strong></p></li>
<li><p><strong>baseUrl_relPath   &lt;booléen&gt; (par défaut: False)</strong></p></li>
</ul>
<p>Les options <strong>accept</strong> et <strong>reject</strong> traitent des expressions régulières (regexp).
La regexp est appliquée à l’URL du message pour détecter une correspondance.</p>
<p>Si l’URL du message d’un fichier correspond à un motif <strong>reject</strong>, on informe
le courtier que le message a été consommé et on abandonne son traitement.</p>
<p>Celui qui correspond à un motif <strong>accept</strong> est traité par le composant.</p>
<p>Dans de nombreuses configurations, les options <strong>accept</strong> et <strong>reject</strong>
sont spécifiés ensembles, et avec l’option <strong>directory</strong>.  Ils relient
ensuite les messages acceptés à la valeur <strong>directory</strong> sous laquelle
ils sont spécifiés.</p>
<p>Après que toutes les options <strong>accept</strong> / <strong>reject</strong> sont traitées normalement.
l’accusé de réception du message tel qu’il a été consommé et ignoré. Pour
outrepasser ce comportement de défaut, définissez <strong>accept_unmatch</strong> à True.</p>
<p>Les <strong>accept/rejet</strong> sont interprétés dans l’ordre qu´ils apparaissent
dans le fichier de configuration.  Chaque option est traitée en ordre
de haut en bas.  par exemple :</p>
<p>sequence #1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">reject</span> <span class="o">.*</span>\<span class="o">.</span><span class="n">gif</span>
<span class="n">accept</span> <span class="o">.*</span>
</pre></div>
</div>
<p>sequence #2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">accept</span> <span class="o">.*</span>
<span class="n">reject</span> <span class="o">.*</span>\<span class="o">.</span><span class="n">gif</span>
</pre></div>
</div>
<p>Dans la séquence #1, tous les fichiers se terminant par ‘gif’ sont rejetés.
Dans la séquence #2, l’option accept .* (regexp qui veut dire accepte tout) est
rencontré avant la déclaration de rejet, de sorte que le rejet n’a aucun effet.</p>
<p>Il est préférable d’utiliser le filtrage côté serveur pour réduire le nombre
de avis envoyées au composant à un petit sur-ensemble de ce qui est
pertinent, et n’effectuer qu’un réglage fin avec les mécanismes <em>accept/reject</em>
côté client, économisant la bande passante et le traitement pour tous.</p>
<p>Plus de détails sur la façon d’appliquer les directives suivent:</p>
<p>Normalement, le chemin d’accès relatif (baseUrl_relPath est False, ajouté au répertoire de base) pour
les fichiers téléchargés seront définis en fonction de l’en-tête relPath inclus
dans le message. Toutefois, si <em>baseUrl_relPath</em> est défini, le relPath du message va
être précédé des sous-répertoires du champ baseUrl du message.</p>
</section>
</section>
<section id="convention-d-appellation-de-files-d-attente">
<h3>Convention d´appellation de files d´attente<a class="headerlink" href="#convention-d-appellation-de-files-d-attente" title="Link to this heading"></a></h3>
<p>Alors que dans la plupart des cas, une bonne valeur de nom de fil d´attente (en anglais: queue) est
générée par l’application, dans certains cas, c´est nécessaire de remplacer ces choix par une
spécification utilisateur explicite. Pour ce faire, il faut connaître les règles de nommage des files d’attente :</p>
<ol class="arabic simple">
<li><p>les noms de fil d’attente commencent par q_.</p></li>
<li><p>ceci est suivi de &lt;amqpUserName&gt; (le propriétaire/utilisateur du nom d’utilisateur du courtier de la fil d’attente).</p></li>
<li><p>suivi d’un deuxième tiret de soulignement ( _ )</p></li>
<li><p>suivi d’une chaîne de caractères au choix de l’utilisateur.</p></li>
</ol>
<p>La longueur totale du nom de la fil d’attente est limitée à 255 octets de caractères UTF-8.</p>
</section>
</section>
<section id="publication-post">
<h2>PUBLICATION (POST)<a class="headerlink" href="#publication-post" title="Link to this heading"></a></h2>
<p>Comme de nombreux composants consomment un flux de messages, de nombreux composants
(souvent les mêmes) produisent également un flux de sortie de messages.  Pour créer des fichiers
disponible pour les abonnés, une affiche publie les annonces à un AMQP ou
Serveur MQTT, également appelé broker. L’option post_broker définit toutes les
informations d’identification pour se connecter au courtier de sortie <strong>AMQP</strong>.</p>
<p><strong>post_broker [amqp|mqtt]{s}://&lt;user&gt;:&lt;pw&gt;&#64;&lt;brokerhost&gt;[:port]/&lt;vhost&gt;</strong></p>
<p>Une fois connecté au courtier de source AMQP, le programme génère des notifications après que
le téléchargement d’un fichier a eu lieu. Pour générer la notification et l’envoyer au
courtier au saut suivant, l’utilisateur définit ces options :</p>
<ul class="simple">
<li><p><strong>post_baseDir     &lt;path&gt;    (facultatif)</strong></p></li>
<li><p><strong>post_topicPrefix &lt;pfx&gt; (par défaut: ‘v03’)</strong></p></li>
<li><p><strong>post_exchange    &lt;name&gt;         (par défaut: xpublic)</strong></p></li>
<li><p><strong>post_baseUrl     &lt;url&gt;     (OBLIGATOIRE)</strong></p></li>
</ul>
<p>FIXME : Des exemples de ce à quoi ils servent, de ce qu’ils font…</p>
<section id="convention-d-appellation-des-exchanges">
<h3>Convention d´appellation des EXCHANGES<a class="headerlink" href="#convention-d-appellation-des-exchanges" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Les noms d’échange commencent par x</p></li>
<li><p>Les échanges qui se terminent par <em>public</em> sont accessibles (pour lecture) par tout utilisateur authentifié.</p></li>
<li><p>Les utilisateurs sont autorisés à créer des échanges avec le modèle: xs_&lt;amqpUserName&gt;_&lt;whatever&gt;. ces échanges ne peuvent être écrits que par cet utilisateur.</p></li>
<li><p>Le système (sr_audit ou administrateurs) crée l’échange de xr_&lt;amqpUserName&gt; comme un lieu d’envoi de rapports pour un utilisateur. Il n’est lisible que par cet utilisateur.</p></li>
<li><p>Les utilisateurs administratifs (rôles d’administrateur ou de feeder) peuvent publier ou s’abonner n’importe où.</p></li>
</ol>
<p>Par exemple, xpublic n’a pas xs_ et un modèle de nom d’utilisateur, de sorte qu’il ne peut être publié que par les utilisateurs administrateurs ou feeder.
Puisqu’il se termine en public, tout utilisateur peut s’y lier pour s’abonner aux messages publiés.
Les utilisateurs peuvent créer des échanges tels que xs_&lt;amqpUserName&gt;_public qui peuvent être écrits par cet utilisateur (selon la règle 3),
et lu par d’autres (selon la règle 2.) Une description du flux conventionnel de messages à travers les échanges sur une pompe.
Les abonnés se lient généralement à l’échange xpublic pour obtenir le flux de données principal. Il s’agit de la valeur par défaut dans sr_subscribe.</p>
<p>Un autre exemple, un utilisateur nommé Alice aura au moins deux échanges :</p>
<blockquote>
<div><ul class="simple">
<li><p>xs_Alice l’exhange où Alice poste ses notifications de fichiers et signale les messages (via de nombreux outils).</p></li>
<li><p>xr_Alice l’échange d’où Alice lit ses messages de rapport (via sr_shovel).</p></li>
<li><p>Alice peut créer un nouvel échange en publiant simplement dessus (avec sr3_post ou sr_cpost) s’il répond aux règles de nommage.</p></li>
</ul>
</div></blockquote>
<p>Habituellement, un sr_sarra exécuté par un administrateur de pompe lira à partir d’un échange tel que xs_Alice_mydata
pour récupérer les données correspondant au message <em>post</em> d’Alice, et les rendre disponibles sur la pompe,
en le ré-annonçant sur l’échange xpublic.</p>
</section>
</section>
<section id="sondage-polling">
<h2>SONDAGE (POLLING)<a class="headerlink" href="#sondage-polling" title="Link to this heading"></a></h2>
<p>On peut faire le même travail que post, sauf que les fichiers sont sur un serveur distant.
Dans le cas d’un sondage (en anglais: poll), l’URL de la publication sera générée à partir de l´option <em>pollUrl</em>,
avec le chemin d’accès du produit (<em>path</em> « fichier correspondant »).  Il y en a une publication
par fichier. La taille du fichier est prise dans le répertoire « ls »… mais sa somme
de contrôle ne peut pas être déterminée, alors la stratégie de calcul de est ¨cod¨ qui signifie
que ca devrait être calculé lors du transfert.</p>
<p>Pour définir la fréquence de sondage, on se sert de <em>scheduled_</em>, tel que:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scheduled_interal</span> <span class="mi">30</span><span class="n">m</span>
</pre></div>
</div>
<p>pour sonder à toute les trente minutes, ou bien:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scheduled_hour</span> <span class="mi">1</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">19</span>
<span class="n">scheduled_minute</span> <span class="mi">27</span>
</pre></div>
</div>
<p>pour sonder trois fois par jour à 1h27, 13h27 et 19h27.</p>
<p>Par défaut, sr_poll envoie son message de publication au courtier avec l’échange par défaut
(le préfixe <em>xs_</em> suivi du nom d’utilisateur du courtier). Le <em>post_broker</em> est obligatoire.
Il peut être incomplet s’il est bien défini dans le fichier credentials.conf.</p>
<p>Référez <a class="reference external" href="../Reference/sr3_post.1.html">sr3_post(1)</a> - pour comprendre l’ensemble du processus de notification.
Référez <a class="reference external" href="../Reference/sr3_post.7.html">sr3_post(7)</a> - pour comprendre le format complet de notification.</p>
<dl class="simple">
<dt>Ces options définissent les fichiers pour lesquels l’utilisateur souhaite être averti et où</dt><dd><p>il sera placé, et sous quel nom.</p>
</dd>
</dl>
<ul class="simple">
<li><p><strong>path &lt;path&gt;           (par défaut: .)</strong></p></li>
<li><p><strong>accept    &lt;regexp pattern&gt; [rename=] (doit être défini)</strong></p></li>
<li><p><strong>reject    &lt;regexp pattern&gt; (facultatif)</strong></p></li>
<li><p><strong>permDefault     &lt;integer&gt;        (par défaut: 0o400)</strong></p></li>
<li><p><strong>fileAgeMax &lt;duration&gt;   (par défaut 30d)</strong></p></li>
</ul>
<p>fileAgeMax doit être inférieur à nodupe_ttl lors de l’utilisation de la suppression des doublons,
pour éviter la réingestion de fichiers obsolètes une fois partie du cache nodupe.</p>
<p>L’option <em>path</em> définit où obtenir les fichiers sur le serveur.
Combiné avec les options <strong>accept</strong> / <strong>reject</strong>, l’utilisateur peut sélectionner
les fichiers d’intérêt et leurs répertoires de résidence.</p>
<p>Les options <strong>accept</strong> et <strong>reject</strong> utilisent des expressions régulières (regexp) pour trouver
une correspondance avec l’URL.
Ces options sont traitées séquentiellement.
L’URL d’un fichier qui correspond à un modèle <strong>reject</strong> n’est pas publiée.
Les fichiers correspondant à un modèle <strong>accept</strong> sont publiés.</p>
<p>Le répertoire peut avoir des modèles. Ces modèles pris en charge concernent la date/l’heure.
Ils sont fixes…</p>
<p><strong>${YYYY}         année actuelle</strong>
<strong>${MM}           mois actuel</strong>
<strong>${JJJ}          julian actuelle</strong>
<strong>${YYYYMMDD}     date actuelle</strong></p>
<p><strong>${YYYY-1D}      année actuelle   - 1 jour</strong>
<strong>${MM-1D}        mois actuel - 1 jour</strong>
<strong>${JJJ-1D}       julian actuelle - 1 jour</strong>
<strong>${YYYYMMDD-1D}  date actuelle   - 1 jour</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ex.   path /mylocaldirectory/myradars
      path /mylocaldirectory/mygribs
      path /mylocaldirectory/${YYYYMMDD}/mydailies


      accept    .*RADAR.*
      reject    .*Reg.*
      accept    .*GRIB.*
      accept    .*observations.*
</pre></div>
</div>
<p>L’option <strong>permDefault</strong> permet aux utilisateurs de spécifier un masque d’autorisation octal numérique
de style Linux:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">permDefault</span> <span class="mi">040</span>
</pre></div>
</div>
<p>signifie qu’un fichier ne sera pas publié à moins que le groupe ait l’autorisation de lecture
(sur une sortie ls qui ressemble à : —r—–, comme une commande chmod 040 &lt;fichier&gt; ).
Les options <strong>permDefault</strong> spécifient un masque, c’est-à-dire que les autorisations doivent être
au moins ce qui est spécifié.</p>
<p>Comme pour tous les autres composants, l’option <strong>vip</strong> peut être utilisée pour indiquer
qu’un poll doit être actif sur seulement un seul nœud d’un cluster.</p>
<p>Les fichiers qui sont plus vieux que fileAgeMax sont ignorés. Cela
peut être modifié à n’importe quelle limite de temps spécifiée dans les configurations en utilisant
l’option <em>fileAgeMax &lt;duration&gt;</em>. Par défaut, dans les composants
autre que poll, cette option est désactivé en étant défini à zéro (0). Comme il s’agit d’une
option de durée, les unités sont en secondes par défaut, mais il est possible de definir l’option
en utilisant des minutes, heures, jours ou des semaines. Dans la composante de poll, fileAgeMax
est défini à 30 jours par défaut.</p>
<section id="sondage-avance-advanced-polling">
<h3>Sondage avancé (Advanced Polling)<a class="headerlink" href="#sondage-avance-advanced-polling" title="Link to this heading"></a></h3>
<p>Le poll intégré liste les répertoires distants et analyse les lignes renvoyées par les structures
paramiko.SFTPAttributes (similaires à os.stat) pour chaque fichier répertorié.
Il existe une grande variété de personnalisations disponibles car les ressources à poller
très différentes :</p>
<ul class="simple">
<li><p>on peut implémenter un rappel <em>sarracenia.flowcb</em> avec une routine <em>poll</em>
pour prendre en charge ces services, ce qui remplace le poll par défaut.</p></li>
<li><p>Certains serveurs ont des résultats non standard quand ils listent des fichiers, de sorte que l’on peut
sur-classer un rappel sarracenia.flowcb.poll avec le point d’entrée <strong>on_line</strong> pour normaliser leurs
réponses en utilisant quand même le flux de poll intégré.</p></li>
<li><p>Il existe de nombreux serveurs http qui fournissent des formats très différents quand ils
listent de fichiers, donc parfois, au lieu de reformater individuellement chaque ligne
ligne, il faut refaire l’analyse de la page au complet. Le point d’entrée <strong>on_html_page</strong>
dans sarracenia.flowcb.poll peut être modifié en la sur-classant également.</p></li>
<li><p>Il existe d’autres serveurs qui fournissent des services différents qui ne sont pas inclus
dans le poll par défaut. On peut implémenter une classe <em>sarracenia.transfer</em> supplémentaire
pour mieux comprendre le poll.</p></li>
</ul>
<p>La sortie d’un poll est une liste de messages créés à partir des noms de fichiers
et les enregistrements SFTPAttributes, qui peuvent ensuite être filtrés par éléments
après <em>gather</em> dans l’algorithme.</p>
</section>
</section>
<section id="composants">
<h2>COMPOSANTS<a class="headerlink" href="#composants" title="Link to this heading"></a></h2>
<p>Tous les composants effectuent une combinaison de poll, de consommation et de publication.
avec des variations qui permettent soit la transmission d’annonces, ou soit aux
transferts de données. Les composants appliquent tous le seul même algorithme,
il suffit de commencer à partir de différents paramètres par défaut pour correspondre
à un cas d’utilisation commun.</p>
<section id="cpump">
<h3>CPUMP<a class="headerlink" href="#cpump" title="Link to this heading"></a></h3>
<p><em>cpump*</em> est une implémentation du composant <a class="reference internal" href="#shovel">shovel</a> en C.
Sur une base individuelle, il devrait être plus rapide qu’un seul téléchargeur python,
avec certaines limitations.</p>
<blockquote>
<div><ul class="simple">
<li><p>ne télécharge pas de données, ne fait que diffuser des messages. (pelle, et non abonné)</p></li>
<li><p>s’exécute en tant qu’instance unique (pas d’instances multiples).</p></li>
<li><p>ne prend en charge aucun plugin.</p></li>
<li><p>ne prend pas en charge vip pour la haute disponibilité.</p></li>
<li><p>différentes bibliothèques d’expressions régulières : POSIX vs python.</p></li>
<li><p>ne supporte pas regex pour la commande strip (pas de regex non-greedy).</p></li>
</ul>
</div></blockquote>
<p>Cela peut donc généralement, mais pas toujours, servir de substitution à l`shovel`_  et à <a class="reference internal" href="#winnow">winnow</a>.</p>
<p>L’implémentation C peut être plus facile à mettre à disposition dans des environnements spécialisés,
comme l’informatique de haute performance, car il y a beaucoup moins de dépendances que la version python.
Cela utilise également beaucoup moins de mémoire pour un rôle donné.  Normalement la version python
est recommandé, mais il y a des cas où l’utilisation de l’implémentation C est raisonnable.</p>
<p><strong>sr_cpump</strong> se connecte à un <em>broker</em> (souvent le même que le courtier de post)
et s’abonne aux notifications d’intérêt. Si _suppress_duplicates_ est actif,
à la réception d’un message, il recherche le champ <strong>integity</strong> du message dans la cache.  Si le message est
trouvé, le fichier est déjà passé, de sorte que la notification est ignorée. Si ce n’est pas le cas, alors
le fichier est nouveau, et la <strong>sum</strong> est ajoutée à la cache et la notification est publiée.</p>
</section>
<section id="flow">
<h3>FLOW<a class="headerlink" href="#flow" title="Link to this heading"></a></h3>
<p>Flow est la classe parent à partir de laquelle tous les autres composants, à l’exception de cpost et cpump, sont construits.
Flow n’a pas de comportement intégré. Les paramètres peuvent le faire agir comme n’importe quel autre composant python,
ou il peut être utilisé pour créer des composants définis par l’utilisateur. Généralement utilisé avec l’option <em>flowMain</em>
pour exécuter une sous-classe de flux définie par l’utilisateur.</p>
</section>
<section id="poll">
<h3>POLL<a class="headerlink" href="#poll" title="Link to this heading"></a></h3>
<p><strong>poll</strong> est un composant qui se connecte à un serveur distant pour
vérifier divers répertoires pour certains fichiers. Lorsqu’un fichier est
présent, modifié, ou créé dans le répertoire distant, le programme
informe qu’il y a nouveau produit.</p>
<p>Le protocle de notification est défini ici <a class="reference external" href="../Reference/sr3_post.7.html">sr3_post(7)</a></p>
<p><strong>poll</strong> se connecte à un <em>broker</em>. À toutes les secondes de <em>scheduled_interval</em> (où bien
à des moment spécifié par <em>scheduled_hour</em> et <em>scheduled_minute</em>), il se connecte à</p>
<p>une <em>pollUrl</em> (sftp, ftp, ftps). Pour chacun des <em>path</em> définis, les contenus sont listés.</p>
<p>Le poll est seulement destinée à être utilisée pour les fichiers récemment modifiés.
L’option <em>fileAgeMax</em> élimine les fichiers trop anciens. Lorsqu’un fichier correspondant
à un modèle donné est trouvé by <em>accept</em>, <strong>poll</strong> crée un message de notification pour ce produit.</p>
<p>Le message est ensuite verifié dans la cache dupliqué (limité en temps par l’option
nodupe_ttl) pour empêcher la publication de fichiers qui ont déjà été vus.</p>
<p><strong>poll</strong> peut être utilisé pour acquérir des fichiers distants en conjonction avec un <a class="reference internal" href="#sarra">sarra</a> qui est
abonné aux notifications d’un post, pour les télécharger et les republier à partir d’une pompe de données.</p>
<p>L’option de pollUrl spécifie ce qui est nécessaire pour se connecter au serveur distant</p>
<p><strong>pollUrl protocol://&lt;user&gt;&#64;&lt;server&gt;[:port]</strong></p>
<dl class="simple">
<dt>::</dt><dd><p>(par défaut : Aucun et il est obligatoire de le définir )</p>
</dd>
</dl>
<p>La <em>pollUrl</em> doit être définie avec le minimum d’informations requises…
<strong>sr_poll</strong> utilise le paramètre <em>pollUrl</em> non seulement lors du poll, mais aussi
dans messages sr3_post produits.</p>
<p>Par exemple, l’utilisateur peut définir :</p>
<p><strong>pollUrl ftp://myself&#64;myserver</strong></p>
<p>Et compléter les informations nécessaires dans le fichier d’informations d’identification (credentials) avec la ligne :</p>
<p><strong>ftp://myself:mypassword&#64;myserver:2121  passive,binary</strong></p>
<p>Poll rassemble des informations sur les fichiers distants, pour créer des messages à leur sujet.
La méthode gather intégrée utilise les protocoles sarracenia.transfer. Actuellement sftp, ftp et http
sont implémentés.</p>
<section id="scans-repetes-et-vip">
<h4>Scans répétés et VIP<a class="headerlink" href="#scans-repetes-et-vip" title="Link to this heading"></a></h4>
<p>Lorsque plusieurs serveurs coopèrent pour polller un serveur distant,
le paramètre <em>vip</em> est utilisé pour décider quel serveur il faut réellement poller.
Tous les serveurs participants s’abonnent à l’endroit où <strong>poll</strong> est publié,
et utilisent les résultats pour remplir la cache de suppression des doublons, afin que
que si l’adresse VIP se déplace, les serveurs alternatifs ont des indications actuelles
de ce qui a été affiché.</p>
</section>
</section>
<section id="post-or-watch">
<h3>POST or WATCH<a class="headerlink" href="#post-or-watch" title="Link to this heading"></a></h3>
<p><strong>sr3_post</strong> affiche la disponibilité d’un fichier en créant une annonce.
Contrairement à la plupart des autres composants de sarracenia qui agissent comme des démons,
sr3_post est une invocation qui poste et se termine en une seul fois.
Pour mettre les fichiers à la disposition des abonnés, <strong>sr3_post</strong> envoie les annonces
à un serveur AMQP ou MQTT, également appelé broker.</p>
<p>Il existe de nombreuses options pour la détection des modifications dans les répertoires, pour
une discussion détaillée des options dans Sarracenia, voir <a class="reference external" href="DetectFileReady.html">DetectFileReady.html</a></p>
<p>Cette page de manuel concerne principalement l’implémentation de python,
mais il y a aussi une implémentation en C, qui fonctionne presque pareille.
Différences:</p>
<blockquote>
<div><ul class="simple">
<li><p>les plugins ne sont pas pris en charge dans l’implémentation C.</p></li>
<li><p>L’implémentation C utilise des expressions régulières POSIX, la grammaire python3 est légèrement différente.</p></li>
<li><p>lorsque l’option <em>sleep</em> (utilisée uniquement dans l’implémentation C) est définie sur &gt; 0,
cela transforme sr_cpost en un démon qui fonctionne comme un <a class="reference external" href="../Reference/sr3.1.html">watch</a>.</p></li>
</ul>
</div></blockquote>
<p>Le composant <em>watch</em> est utilisé pour surveiller les répertoires à la recherche de nouveaux fichiers.
Cela est équivalent à poster (ou cpost) avec l’option <em>sleep</em> réglée sur &gt;0.</p>
<p>L’option [<em>-pbu|–post_baseUrl url,url,…</em>] spécifie l’emplacement a partir d’ou
les abonnés pourront télécharger.  Il y a généralement un message par fichier.
Format de l’argument de l’option <em>post_baseUrl</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ftp</span><span class="o">|</span><span class="n">http</span><span class="o">|</span><span class="n">sftp</span><span class="p">]:</span><span class="o">//</span><span class="p">[</span><span class="n">user</span><span class="p">[:</span><span class="n">password</span><span class="p">]</span><span class="o">@</span><span class="p">]</span><span class="n">host</span><span class="p">[:</span><span class="n">port</span><span class="p">]</span><span class="o">/</span>
<span class="ow">or</span>
<span class="n">file</span><span class="p">:</span>
</pre></div>
</div>
<p>Lorsque plusieurs URL sont données sous forme de liste séparée par des virgules à <em>post_baseUrl</em>, les
url fournies sont utilisées dans le style round-robin, pour fournir une forme d’équilibrage de charge.</p>
<p>L’option [<em>-p|–path path1 path2 .. pathN</em>] spécifie le chemin d’accès des fichiers
à annoncer. Il y a généralement un message par fichier.
Format de l’argument de l’option <em>path</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">absolute_path_to_the</span><span class="o">/</span><span class="n">filename</span>
<span class="ow">or</span>
<span class="n">relative_path_to_the</span><span class="o">/</span><span class="n">filename</span>
</pre></div>
</div>
<p>L’option <em>-pipe</em> peut être spécifiée pour que sr3_post lise les noms de chemin d’accès à partir de la norme
d’entrée également.</p>
<p>Exemple d’invocation de <em>sr3_post</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sr3_post</span> <span class="o">-</span><span class="n">pb</span> <span class="n">amqp</span><span class="p">:</span><span class="o">//</span><span class="n">broker</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">pbu</span> <span class="n">sftp</span><span class="p">:</span><span class="o">//</span><span class="n">stanley</span><span class="nd">@mysftpserver</span><span class="o">.</span><span class="n">com</span><span class="o">/</span> <span class="o">-</span><span class="n">p</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">shared</span><span class="o">/</span><span class="n">products</span><span class="o">/</span><span class="n">foo</span>
</pre></div>
</div>
<p>Par défaut, sr3_post lit le fichier /data/shared/products/foo et calcule sa somme de contrôle.
Il crée ensuite un message de publication, se connecte à broker.com en tant qu’utilisateur « invité »
(informations d’identification par défaut) et envoie la publication aux vhost ‘/’ par défaut et à
l’échange par défaut. L’échange par défaut est le préfixe <em>xs_</em> suivi du nom d’utilisateur du courtier,
où la valeur par défaut ‘xs_guest’. Un abonné peut télécharger le fichier /data/shared/products/foo en
s’authentifiant en tant qu’utilisateur stanley sur mysftpserver.com en utilisant le protocole sftp pour
broker.com en supposant qu’il dispose des informations d’identification appropriées.
La sortie de la commande est la suivante</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">Published</span> <span class="n">xs_guest</span> <span class="n">v03</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">products</span><span class="o">.</span><span class="n">foo</span> <span class="s1">&#39;20150813161959.854 sftp://stanley@mysftpserver.com/ /data/shared/products/foo&#39;</span> <span class="nb">sum</span><span class="o">=</span><span class="n">d</span><span class="p">,</span><span class="mi">82</span><span class="n">edc8eb735fd99598a1fe04541f558d</span> <span class="n">parts</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">4574</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
</pre></div>
</div>
<p>Dans MetPX-Sarracenia, chaque article est publié sous un certain thème.
La ligne du journal commence par ‘[INFO]’, suivie du <strong>topic</strong> du post.
Les thèmes dans <em>AMQP</em> sont des champs séparés par un point. Notez que les thèmes MQTT utilisent
une barre oblique (/) comme séparateur de thème.  Le thème complet commence par
a topicPrefix (voir option), version <em>v03</em>, suivi d’un sous-thème (voir option)
ici la valeur par défaut, et le chemin du fichier séparé par des points
<em>data.shared.products.foo</em>.</p>
<p>Le deuxième champ de la ligne du journal est l’avis de message.  Il se compose d’un horodatage
<em>20150813161959.854</em> et l’URL source du fichier dans les 2 derniers champs.</p>
<p>Le reste des informations est stocké dans des en-têtes de message AMQP, constitués de paires clé=valeur.
L’en-tête <em>sum=d,82edc8eb735fd99598a1fe04541f558d</em> donne l’empreinte du fichier (ou somme de contrôle).
Ici, <em>d</em> signifie la somme de contrôle md5 effectuée sur les données et <em>82edc8eb735fd99598a1fe04541f558d</em>
est la valeur de la somme de contrôle. Le <em>parts=1,4574,1,0,0</em> indique que le fichier est disponible en 1 partie de 4574 octets
(la taille du fichier.)  Le <em>1,0,0</em> restant n’est pas utilisé pour les transferts de fichiers avec une seule partie.</p>
<p>un autre exemple:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sr3_post</span> <span class="o">-</span><span class="n">pb</span> <span class="n">amqp</span><span class="p">:</span><span class="o">//</span><span class="n">broker</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">pbd</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">web</span><span class="o">/</span><span class="n">public_data</span> <span class="o">-</span><span class="n">pbu</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">dd</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">gc</span><span class="o">.</span><span class="n">ca</span><span class="o">/</span> <span class="o">-</span><span class="n">p</span> <span class="n">bulletins</span><span class="o">/</span><span class="n">alphanumeric</span><span class="o">/</span><span class="n">SACN32_CWAO_123456</span>
</pre></div>
</div>
<p>Par défaut, sr3_post lit le fichier /data/web/public_data/bulletins/alphanumeric/SACN32_CWAO_123456
(concaténation du chemin d’accès post_baseDir et relatif de l’URL source pour obtenir le chemin d’accès au fichier local)
et calcule sa somme de contrôle. Il crée ensuite un message de publication, se connecte à broker.com en tant qu’utilisateur « invité »
(informations d’identification par défaut) et envoie la publication aux hôtes par défaut ‘/’ et échange ‘xs_guest’.</p>
<p>Un abonné peut télécharger le fichier <a class="reference external" href="http://dd.weather.gc.ca/bulletins/alphanumeric/SACN32_CWAO_123456">http://dd.weather.gc.ca/bulletins/alphanumeric/SACN32_CWAO_123456</a> à l’aide de http
sans authentification sur dd.weather.gc.ca.</p>
<section id="partitionnement-de-fichiers">
<h4>Partitionnement de fichiers<a class="headerlink" href="#partitionnement-de-fichiers" title="Link to this heading"></a></h4>
<p>l’utilisation de l’option <em>blocksize</em> n’a aucun effet dans sr3.  Il est utilisé pour faire le partitionnement de fichiers,
et il redeviendra efficace à l’avenir, avec la même sémantique.</p>
</section>
</section>
<section id="sarra">
<h3>SARRA<a class="headerlink" href="#sarra" title="Link to this heading"></a></h3>
<p><strong>sarra</strong> est un programme qui s’abonne aux notifications de fichiers,
acquiert les fichiers, et les réannonce à leurs nouveaux emplacements.
Le protocole de notification est défini ici <a class="reference external" href="../Reference/sr3_post.7.html">sr3_post(7)</a></p>
<p><strong>sarra</strong> se connecte à un <em>broker</em> (souvent le même que le serveur de fichiers distant)
et s’abonne aux notifications d’intérêt. Il utilise les informations de la notification
permettant de télécharger le fichier sur le serveur local sur lequel il s’exécute.
Il publie ensuite une notification pour les fichiers téléchargés sur un courtier (généralement sur le serveur local).</p>
<p><strong>sarra</strong> peut être utilisé pour acquérir des fichiers auprès de <a class="reference external" href="../Reference/sr3_post.1.html">sr3_post(1)</a>
ou <a class="reference external" href="../Reference/sr3.1.html">watch</a> ou pour reproduire un dossier accessible sur le Web (WAF),
qui annoncent ses produits.</p>
<p><strong>sr_sarra</strong> est un <a class="reference internal" href="#subscribe"><span class="std std-ref">sr_subscribe(1)</span></a>  aves les préréglages suivants:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mirror</span> <span class="kc">True</span>
</pre></div>
</div>
<section id="exigences-specifiques-de-consommation">
<h4>Exigences spécifiques de consommation<a class="headerlink" href="#exigences-specifiques-de-consommation" title="Link to this heading"></a></h4>
<p>Si les messages sont postés directement à partir d’une source  l’échange utilisé est ‘xs_&lt;brokerSourceUsername&gt;’.
Pour se protéger contre les utilisateurs malveillants, les administrateurs doivent définir <em>sourceFromExchange</em> à <strong>True</strong>.
Ces messages ne peuvent pas contenir un champ cluster ou source d’origine
ou un utilisateur malveillant peut définir les valeurs de manière incorrecte.</p>
<ul class="simple">
<li><p><strong>sourceFromExchange  &lt;booléan&gt; (défaut: False)</strong></p></li>
</ul>
<p>À la réception, le programme définira ces valeurs dans la classe parente (ici
cluster est la valeur de l’option <strong>cluster</strong> tirée de default.conf) :</p>
<p>msg[‘source’]       = &lt;brokerUser&gt;
msg[‘from_cluster’] = cluster</p>
<p>remplacer toutes les valeurs présentes dans le message. Ce paramètre
doit toujours être utilisé lors de l’ingestion de données provenant d’un
échange d’utilisateurs.</p>
</section>
</section>
<section id="sender">
<h3>SENDER<a class="headerlink" href="#sender" title="Link to this heading"></a></h3>
<p><strong>sender</strong> est un composant dérivé de <a class="reference internal" href="#subscribe">subscribe</a>
utilisé pour envoyer des fichiers locaux à un serveur distant à l’aide d’un protocole de transfert de fichiers, principalement SFTP.
<strong>sender</strong> est un consommateur standard, utilisant tous les paramètres AMQP normaux pour les courtiers, les échanges,
et toutes les files d’attente, et tout les filtres standard côté client avec accept, reject et after_accept.</p>
<p>Souvent, un courtier annoncera des fichiers à l’aide d’un protocole distant tel que HTTP,
mais pour l’expéditeur, il s’agit en fait d’un fichier local.  Dans de tels cas, on
voir un message : <strong>ERROR: The file to send is not local.</strong>
Un plugin after_accept convertira l’URL Web en un fichier local:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">baseDir</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">httpd</span><span class="o">/</span><span class="n">www</span>
<span class="n">flowcb</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">flowcb</span><span class="o">.</span><span class="n">tolocalfile</span><span class="o">.</span><span class="n">ToLocalFile</span>
</pre></div>
</div>
<p>Ce plugin after_accept fait partie des paramètres par défaut pour les expéditeurs, mais
doit encore spécifier baseDir pour qu’il fonctionne.</p>
<p>Si un <strong>post_broker</strong> est défini, <strong>sender</strong> vérifie si le nom du cluster est donné
par l’option <strong>to</strong> si elle se trouve dans l’un des clusters de destination du message.
Si ce n’est pas le cas, le message est ignoré.</p>
<section id="configuration-1-replication-pompe-a-pompe">
<h4>CONFIGURATION 1 : RÉPLICATION POMPE À POMPE<a class="headerlink" href="#configuration-1-replication-pompe-a-pompe" title="Link to this heading"></a></h4>
<p>Pour la réplication de la pompe, <strong>mirror</strong> est défini sur True (valeur par défaut).</p>
<p><strong>baseDir</strong> fournit le chemin d’accès au répertoire qui, lorsqu’il est combiné avec le chemin relatif
dans la notification sélectionnée, donne le chemin absolu du fichier à envoyer.
La valeur par défaut est Aucun, ce qui signifie que le chemin d’accès dans la notification est le chemin absolu.</p>
<p>Dans un subscriber, baseDir représente le préfixe du chemin relatif en amont,
et est utilisé comme modèle pour se faire remplacer dans le répertoire de base actuellement sélectionné
(à partir d’une option <em>baseDir</em> ou <em>directory</em>) dans les champs de message : ‘fileOp’,
qui sont utilisés lors de la mise en miroir de liens symboliques ou de fichiers renommés.</p>
<p>La <strong>sendTo</strong> définit le protocole et le serveur à utiliser pour livrer les produits.
Sa forme est un url partiel, par exemple : <strong>ftp://myuser&#64;myhost</strong>.
Le programme utilise le fichier ~/.conf/sarra/credentials.conf pour obtenir les détails restants
(mot de passe et options de connexion).  Les protocoles pris en charge sont ftp, ftps et sftp.
Si l’utilisateur doit implémenter un autre mécanisme d’envoi, il fournirait le script du plugin
par l’option <strong>do_send</strong>.</p>
<p>Sur le site distant, le <strong>post_baseDir</strong> sert à la même chose que le
<strong>baseDir</strong> sur ce serveur.  La valeur par défaut est None, ce qui signifie que le chemin d’accès livré
est l’absolu.</p>
<p>Maintenant, nous sommes prêts à envoyer le produit… par exemple, si la notification sélectionnée ressemble à ceci :</p>
<p><strong>20150813161959.854 http://this.pump.com/ relative/path/to/IMPORTANT_product</strong></p>
<p><strong>sr_sender</strong>  effectue la pseudo-livraison suivante :</p>
<p>Envoie le fichier locale [<strong>baseDir</strong>]/relative/path/to/IMPORTANT_product
à    <strong>sendTo</strong>/[<strong>post_baseDir</strong>]/relative/path/to/IMPORTANT_product
(<strong>kbytes_ps</strong> est supérieur à 0, le processus tente de respecter
cette vitesse de livraison… ftp,ftps,ou sftp)</p>
<p>À ce stade, une configuration de pompe à pompe doit envoyer la notification à distance…
(Si la post_broker n’est pas définie, il n’y aura pas d’affichage… juste la réplication des produits)</p>
<p>La notification sélectionnée contiennent toutes les bonnes informations
(attributs de thème et d’en-tête) à l’exception du champ url dans l’avis… dans notre exemple : <strong>http://this.pump.com/</strong></p>
<p>Par défaut, <strong>sr_sender</strong> place la <strong>sendTo</strong> dans ce champ.
L’utilisateur peut l’écraser en spécifiant l’option <strong>post_baseUrl</strong>. Par exemple:</p>
<p><strong>post_baseUrl http://remote.apache.com</strong></p>
<p>L’utilisateur peut fournir un script <strong>on_post</strong>. Juste avant que le message ne soit
publié sur les <strong>post_broker</strong> et <strong>post_exchange</strong>, le
<strong>on_post</strong> script s’appelle… avec l’instance de classe <strong>sr_sender</strong> comme argument.
Le script peut effectuer ce que vous voulez… s’il renvoie False, le message ne sera pas
publié. Si la valeur est True, le programme poursuivra le traitement à partir de là.</p>
<p>FIXME : Exemple de configuration manquant.</p>
</section>
<section id="configuration-de-destination-2-diffusion-de-type-metpx-sundew">
<h4>CONFIGURATION DE DESTINATION 2 : DIFFUSION DE TYPE METPX-SUNDEW<a class="headerlink" href="#configuration-de-destination-2-diffusion-de-type-metpx-sundew" title="Link to this heading"></a></h4>
<p>Dans ce type d’utilisation, nous n’aurions généralement pas reposté… mais si le
<strong>post_broker</strong> et <strong>post_exchange</strong> (<strong>url</strong>,**on_post**) sont définis,
le produit sera annoncé (avec son éventuel nouvel emplacement et son nouveau nom).
Réintroduisons les options dans un ordre différent
avec quelques nouveaux pour faciliter l’explication.</p>
<p>Il y a 2 différences avec le cas précédent :
les options <strong>directory</strong> et <strong>filename</strong>.</p>
<p>Le <strong>baseDir</strong> est le même, tout comme la
<strong>sendTo</strong> et les options <strong>post_baseDir</strong>.</p>
<p>L’option <strong>répertoire</strong> définit un autre « chemin relatif » pour le produit
à destination.  Il est marqué aux options <strong>accept</strong> définies après lui.
Si une autre séquence de <strong>directory</strong>/<strong>accept</strong> suit dans le fichier de configuration,
le deuxième répertoire est marqué pour les acceptations suivantes et ainsi de suite.</p>
<p>Les modèles <strong>accept/reject</strong> s’appliquent à l’URL de notification du message comme ci-dessus.
Voici un exemple, voici quelques options de configuration ordonnées :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">directory</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">new</span><span class="o">/</span><span class="n">important_location</span>

<span class="n">accept</span> <span class="o">.*</span><span class="n">IMPORTANT</span><span class="o">.*</span>

<span class="n">directory</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">new</span><span class="o">/</span><span class="n">location</span><span class="o">/</span><span class="n">for_others</span>

<span class="n">accept</span> <span class="o">.*</span>
</pre></div>
</div>
<p>Si la notification sélectionnée est, comme ci-dessus, ceci :</p>
<p><strong>20150813161959.854 http://this.pump.com/ relative/path/to/IMPORTANT_product</strong></p>
<p>Il a été sélectionné par la première option <strong>accept</strong>. Le chemin relatif distant devient
<strong>/my/new/important_location</strong> … et <strong>sr_sender</strong>  effectue la pseudo-livraison suivante :</p>
<p>envoie le fichier local [<strong>baseDir</strong>]/relative/path/to/IMPORTANT_product
à    <strong>destination</strong>/[<strong>post_baseDir</strong>]/my/new/important_location/IMPORTANT_product</p>
<p>Habituellement, cette façon d’utiliser <strong>sr_sender</strong> n’exigerait pas l’affichage du produit.
Mais si <strong>post_broker</strong> and <strong>post_exchange</strong> sont fournis, et <strong>url</strong> , comme ci-dessus, est défini sur
<strong>http://remote.apache.com</strong>,  alors <strong>sr_sender</strong> reconstruirait :</p>
<p>Thème: <strong>v03.my.new.important_location.IMPORTANT_product</strong></p>
<p>Notice: <strong>20150813161959.854 http://remote.apache.com/ my/new/important_location/IMPORTANT_product</strong></p>
</section>
</section>
<section id="shovel">
<h3>SHOVEL<a class="headerlink" href="#shovel" title="Link to this heading"></a></h3>
<p>shovel copie les messages sur un courtier (donné par l’option <em>broker</em>) à
un autre (donné par l’option <em>post_broker</em>) soumis au filtrage
par (<em>exchange</em>, <em>subtopic</em>, et éventuellement, <em>accept</em>/<em>reject</em>.)</p>
<p>L’option <em>topicPrefix</em> doit être définie sur :</p>
<blockquote>
<div><ul class="simple">
<li><p>pour pelleter les messages <a class="reference external" href="../Reference/sr3_post.7.html">sr3_post(7)</a></p></li>
</ul>
</div></blockquote>
<p>shovel est un flux avec les préréglages suivants :</p>
<blockquote>
<div><p>no-download True
suppress_duplicates off</p>
</div></blockquote>
</section>
<section id="subscribe">
<h3>SUBSCRIBE<a class="headerlink" href="#subscribe" title="Link to this heading"></a></h3>
<p>Subscribe est le composant de flux de téléchargement normal, qui se connectera à un courtier, télécharger
les fichiers configurés, puis transférer les messages avec une baseUrl modifiée.</p>
</section>
<section id="watch">
<h3>WATCH<a class="headerlink" href="#watch" title="Link to this heading"></a></h3>
<p>Surveille un répertoire et publie des messages lorsque les fichiers dans le répertoire changent.
Ses arguments sont très similaires à <a class="reference external" href="../Reference/sr_post.1.html">sr_post &lt;sr_post</a>.
Dans la suite MetPX-Sarracenia, l’objectif principal est d’afficher la disponibilité et modifications
de ses dossiers. Les abonnés utilisent <em>sr_subscribe</em> pour consommer le message et télécharger les fichiers changés.</p>
<p>Les messages sont envoyés à un serveur AMQP, également appelé courtier, spécifié avec l’option [ <em>-pb|–post_broker broker_url</em> ].</p>
<p>The [<em>-post_baseUrl|–pbu|–url url</em>] option specifies the protocol, credentials, host and port to which subscribers
will connect to get the file.</p>
<p>Format of argument to the <em>url</em> option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ftp</span><span class="o">|</span><span class="n">http</span><span class="o">|</span><span class="n">sftp</span><span class="p">]:</span><span class="o">//</span><span class="p">[</span><span class="n">user</span><span class="p">[:</span><span class="n">password</span><span class="p">]</span><span class="o">@</span><span class="p">]</span><span class="n">host</span><span class="p">[:</span><span class="n">port</span><span class="p">]</span><span class="o">/</span>
<span class="ow">or</span>
<span class="p">[</span><span class="n">ftp</span><span class="o">|</span><span class="n">http</span><span class="o">|</span><span class="n">sftp</span><span class="p">]:</span><span class="o">//</span><span class="p">[</span><span class="n">user</span><span class="p">[:</span><span class="n">password</span><span class="p">]</span><span class="o">@</span><span class="p">]</span><span class="n">host</span><span class="p">[:</span><span class="n">port</span><span class="p">]</span><span class="o">/</span>
<span class="ow">or</span>
<span class="n">file</span><span class="p">:</span>
</pre></div>
</div>
<p>L’option[<em>-p|–chemin</em>] indique à <em>sr_watch</em> ce qu’il faut chercher.
Si le <em>path</em> spécifie un répertoire, <em>sr_watches</em> crée un message quand
un fichier dans ce répertoire qui est créé, modifié ou supprimé.
Si le <em>path</em> spécifie un fichier, <em>sr_watch</em> surveille uniquement ce fichier.
Dans l’avis, il est spécifié avec le <em>chemin</em> du produit.
Il y a généralement un message par fichier.</p>
<p>Un exemple d’une excution de <em>sr_watch</em> vérifiant un fichier:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sr3</span> <span class="o">--</span><span class="n">post_baseUrl</span> <span class="n">sftp</span><span class="p">:</span><span class="o">//</span><span class="n">stanley</span><span class="nd">@mysftpserver</span><span class="o">.</span><span class="n">com</span><span class="o">/</span> <span class="o">--</span><span class="n">path</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">shared</span><span class="o">/</span><span class="n">products</span><span class="o">/</span><span class="n">foo</span> <span class="o">--</span><span class="n">post_broker</span> <span class="n">amqp</span><span class="p">:</span><span class="o">//</span><span class="n">broker</span><span class="o">.</span><span class="n">com</span> <span class="n">start</span> <span class="n">watch</span><span class="o">/</span><span class="n">myflow</span>
</pre></div>
</div>
<p>Ici, <em>sr_watch</em> vérifie les événements sur le fichier /data/shared/products/foo.
Les paramètres par défaut des rapports d’événements si le fichier le fichier est modifié ou supprimé.
Lorsque le fichier est modifié, <em>sr_watch</em> lit le fichier /data/shared/products/foo.
et calcule sa somme de contrôle.  Il construit ensuite un message, se connecte à broker.com
en tant qu’utilisateur’guest’ (informations d’identification par défaut).
et envoie le message aux valeurs par défaut vhost ‘/’ et échange ‘xs_stanley’ (échange par défaut)</p>
<p>Un abonné peut télécharger le fichier /data/shared/products/foo en se connectant en tant qu’utilisateur stanley.
sur mysftpserver.com en utilisant le protocole sftp à broker.com en supposant qu’il a les informations d’identification appropriées.</p>
<p>La sortie de la commande est la suivante:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">v03</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">products</span><span class="o">.</span><span class="n">foo</span> <span class="s1">&#39;20150813161959.854 sftp://stanley@mysftpserver.com/ /data/shared/products/foo&#39;</span>
      <span class="n">source</span><span class="o">=</span><span class="n">guest</span> <span class="n">parts</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">256</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span> <span class="nb">sum</span><span class="o">=</span><span class="n">d</span><span class="p">,</span><span class="n">fc473c7a2801babbd3818260f50859de</span>
</pre></div>
</div>
<p>Dans MetPX-Sarracenia, chaque article est publié sous un certain thème.
Après le ‘[INFO]’, l’information suivante donne le fBtopic* du fichier
publié. Les thèmes dans <em>AMQP</em> sont un champ hierarchique, avec chaque sous-thème séparé par une points. Dans
MetPX-Sarracénie il est constitué d’un <em>topic_prefix</em> par défaut : version <em>V02</em>, d’une action <em>post</em>..,
suivi par <em>subtopic</em> par défaut : le chemin du fichier séparé par des points, ici, <em>data.shared.products.foo</em>.</p>
<p>Après la hiérarchie des thèmes vient le corps de l’avis.  Il se compose d’un temps <em>20150813161959.854</em>,
et l’url source du fichier dans les 2 derniers champs.</p>
<p>La ligne restante donne des informations qui sont placées dans l’en-tête du message amqp.
Ici, il se compose de <em>source=guest</em>, qui est l’utilisateur amqp, <em>parts=1,256,0,0,0,1</em>..,
qui proposent de télécharger le fichier en 1 partie de 256 octets (la taille réelle du fichier), suivi de 1,0,0,0.
donne le nombre de blocs, le nombre d’octets restants et le nombre d’octets actuel.
bloc.  <em>sum=d,fc473c7a2801babbd3818260f50859de</em> mentionne les informations de la somme de contrôle,
ici, <em>d</em> signifie la somme de contrôle md5 effectuée sur les données, et <em>fc473c7a2801babbd3818260f50859de</em>.
est la valeur de la somme de contrôle.  Lorsque l’événement sur un fichier est une suppression, sum=R,0 R
signifie de supprimer un fichier.</p>
<p>Un autre exemple avec un fichier:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sr3</span> <span class="o">--</span><span class="n">post_baseDir</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">web</span><span class="o">/</span><span class="n">public_data</span> <span class="o">--</span><span class="n">post_baseUrl</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">dd</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">gc</span><span class="o">.</span><span class="n">ca</span><span class="o">/</span> <span class="o">--</span><span class="n">path</span> <span class="n">bulletins</span><span class="o">/</span><span class="n">alphanumeric</span><span class="o">/</span><span class="n">SACN32_CWAO_123456</span> <span class="o">-</span><span class="n">post_broker</span> <span class="n">amqp</span><span class="p">:</span><span class="o">//</span><span class="n">broker</span><span class="o">.</span><span class="n">com</span> <span class="n">start</span> <span class="n">watch</span><span class="o">/</span><span class="n">myflow</span>
</pre></div>
</div>
<p>Par défaut, sr3_watch vérifie le fichier /data/web/public_data/bulletins/alphanumériques/SACN32_CWAO_123456
(concaténer le répertoire base_dir et le chemin relatif de l’url source pour obtenir le chemin du fichier local).
Si le fichier change, il calcule sa somme de contrôle. Il construit ensuite un message, se connecte à broker.com en tant qu’utilisateur’guest’.
(informations d’identification par défaut) et envoie le message aux valeurs par défaut vhost’/’ et exchange’sx_guest’ (échange par défaut)</p>
<p>Un abonné peut télécharger le fichier <a class="reference external" href="http://dd.weather.gc.ca/bulletins/alphanumeric/SACN32_CWAO_CWAO_123456">http://dd.weather.gc.ca/bulletins/alphanumeric/SACN32_CWAO_CWAO_123456</a> en utilisant http.
sans authentification sur dd.weather.gc.ca.</p>
<p>Un exemple de vérification d’un répertoire:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sr3</span> <span class="o">-</span><span class="n">post_baseDir</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">web</span><span class="o">/</span><span class="n">public_data</span> <span class="o">-</span><span class="n">post_baseUrl</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">dd</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">gc</span><span class="o">.</span><span class="n">ca</span><span class="o">/</span> <span class="o">--</span><span class="n">path</span> <span class="n">bulletins</span><span class="o">/</span><span class="n">alphanumeric</span> <span class="o">--</span><span class="n">post_broker</span> <span class="n">amqp</span><span class="p">:</span><span class="o">//</span><span class="n">broker</span><span class="o">.</span><span class="n">com</span> <span class="n">start</span> <span class="n">watch</span><span class="o">/</span><span class="n">myflow</span>
</pre></div>
</div>
<p>Ici, sr3_watch vérifie la création de fichiers (modification) dans /data/web/public_data/bulletins/alphanumérique.
(concaténer le répertoire base_dir et le chemin relatif de l’url source pour obtenir le chemin du répertoire).
Si le fichier SACN32_CWAO_123456 est créé dans ce répertoire, sr3_watch calcule sa somme de contrôle.
Il construit ensuite un message, se connecte à broker.com en tant qu’utilisateur’guest’.
(informations d’identification par défaut) et envoie le message à exchange’amq.topic’ (échange par défaut)</p>
<p>Un abonné peut télécharger le fichier créé/modifié <a class="reference external" href="http://dd.weather.gc.ca/bulletins/alphanumeric/SACN32_CWAO_CWAO_123456">http://dd.weather.gc.ca/bulletins/alphanumeric/SACN32_CWAO_CWAO_123456</a> en utilisant http.
sans authentification sur dd.weather.gc.ca.</p>
</section>
<section id="winnow">
<h3>WINNOW<a class="headerlink" href="#winnow" title="Link to this heading"></a></h3>
<p><strong>winnow</strong> est un programme qui s’abonne aux notifications de fichiers,
et réenregistre les notifications, en supprimant les notifications redondantes.</p>
<p>La méthode de décider quels messages d´annonce sont redondants varient selon le cas d´usage.
Normalement, les messages comprenned un champs <em>Identity</em> qui avec une somme de contrôle
du ficher, tel que décrit dans <a class="reference external" href="../Reference/sr_post.7.html">sr_post(7)</a>
Il y bien d´autres cas d´usage discutés dans <a class="reference external" href="SupprimerLesDoublons.html">Supprimer les doublons</a></p>
<p><strong>winnow</strong> a les options suivante forcés:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">no</span><span class="o">-</span><span class="n">download</span> <span class="kc">True</span>
<span class="n">suppress_duplicates</span> <span class="n">on</span>
<span class="n">accept_unmatch</span> <span class="kc">True</span>
</pre></div>
</div>
<p>La durée de vie des suppress_duplicates peut être ajustée, mais elle est toujours active.</p>
<p><strong>winnow</strong> se connecte à un <em>broker</em> (souvent le même que le courtier d’affichage).
et souscrit aux notifications d’intérêt. Sur réception d´un avis, il cherche sa <strong>sum</strong>
dans son cache. s’il est trouvé, le fichier est déjà passé, de sorte que la notification
est ignorée. Si ce n’est pas le cas, le fichier est nouveau, et le <strong>sum</strong> est ajouté.
dans le cache et l’avis est affiché.</p>
<p><strong>winnow</strong> peut être utilisé pour couper les messages de <a class="reference external" href="../Reference/sr3_post.1.html">sr3_post</a>,
<a class="reference external" href="sr_poll.1.html">sr_poll(1)</a> ou <a class="reference external" href="sr_watch.1.html">sr_watch(1)</a> etc….. C’est
utilisé lorsqu’il y a plusieurs sources de données identiques, de sorte que les
clients ne téléchargent que le fichier une seule fois, à partir de la première
source qui les a publié.</p>
<p><strong>winnow</strong> peut être utilisé pour couper les messages de post, <a class="reference external" href="../Reference/sr3_post.1.html">sr3_post</a>,
<a class="reference external" href="../Reference/sr3_cpost.1.html">sr3_cpost</a>, <a class="reference external" href="../Reference/sr3_cpump.1.html">sr3_cpump</a>,
<a class="reference external" href="../Reference/sr3.1.html">poll</a> ou <a class="reference external" href="../Reference/sr3.1.html">watch</a> etc…
C’est utilisé lorsqu’il y a plusieurs sources de données identiques, de sorte que
les clients ne téléchargent que le fichier une seule fois, à partir de la première
source qui les a publié.</p>
</section>
</section>
<section id="configurations">
<h2>Configurations<a class="headerlink" href="#configurations" title="Link to this heading"></a></h2>
<p>Si on a une configuration prête à l’emploi appelée <em>q_f71.conf</em>, elle peut être
ajoutée à la liste des noms connus avec</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subscribe</span> <span class="n">add</span> <span class="n">q_f71</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>Dans ce cas-ci, q_f71.conf est inclus avec les exemples fournis, donc <em>add</em> le trouve
dans les exemples et le copie dans le répertoire des configurations actives.
Chaque fichier de configuration gère les consommateurs pour une seule file
d’attente sur le courtier. Pour visualiser les configurations disponibles,
utilisez:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ subscribe list

  configuration examples: ( /usr/lib/python3/dist-packages/sarra/examples/subscribe )
            all.conf     all_but_cap.conf            amis.conf            aqhi.conf             cap.conf      cclean_f91.conf
      cdnld_f21.conf       cfile_f44.conf        citypage.conf       clean_f90.conf            cmml.conf cscn22_bulletins.conf
        ftp_f70.conf            gdps.conf         ninjo-a.conf           q_f71.conf           radar.conf            rdps.conf
           swob.conf           t_f30.conf      u_sftp_f60.conf

  user plugins: ( /home/peter/.config/sarra/plugins )
        destfn_am.py         destfn_nz.py       msg_tarpush.py

  general: ( /home/peter/.config/sarra )
          admin.conf     credentials.conf         default.conf

  user configurations: ( /home/peter/.config/sarra/subscribe )
     cclean_f91.conf       cdnld_f21.conf       cfile_f44.conf       clean_f90.conf         ftp_f70.conf           q_f71.conf
          t_f30.conf      u_sftp_f60.conf
</pre></div>
</div>
<p>On peut ensuite le modifier à l’aide de</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ subscribe edit q_f71.conf
</pre></div>
</div>
<p>(La commande d’édition utilise la variable d’environnement EDITOR, si elle est présente.
Une fois les changements complétés, on peut démarrer la configuration avec</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ subscibe foreground q_f71.conf
</pre></div>
</div>
<p>Que contiennent les fichiers ? Voir la section suivante :</p>
<ul class="simple">
<li><p>La barre oblique (/) est utilisée comme séparateur de chemin dans les fichiers de configuration Sarracenia sur tous les
systèmes d’exploitation. L’utilisation de la barre oblique inverse comme séparateur () (tel qu’utilisé dans la
cmd shell de Windows) risque de ne pas fonctionner correctement. Lorsque des fichiers sont lu dans Windows, le chemin d’accès
est immédiatement converti en utilisant la barre oblique. Ceci est pour s’assurer que les options <em>reject</em>, <em>accept</em>, et
<em>strip</em> peuvent filtrer des expressions correctement. C’est pour cela qu’il est toujours important d’utiliser la barre
oblique (/) quand un séparateur est nécessaire.</p></li>
</ul>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">directory</span> <span class="n">A</span>
<span class="n">accept</span> <span class="n">X</span>
</pre></div>
</div>
<p>Place les fichiers correspondant à X dans le répertoire A.</p>
<dl class="simple">
<dt>au lieu::</dt><dd><p>accept X
directory A</p>
</dd>
</dl>
<p>Place les fichiers correspondant à X dans le répertoire de travail actuel,
et le paramètre <em>directory A</em> ne fait rien par rapport à X.</p>
<p>Pour fournir une description non fonctionnelle de la configuration ou des
commentaires, utilisez des lignes commençant par <strong>#</strong>.  Toutes les options
sont sensibles aux majuscules et minuscules. <strong>Debug</strong> n’est pas le même
que <strong>debug</strong> ou <strong>DEBUG</strong>. Il s’agit de trois options différentes (dont deux
n’existent pas et n’auront aucun effet, mais devrait générer une
avertissement ´unknown option´).</p>
<p>Les options et les paramètres de ligne de commande sont équivalents.  Chaque
paramètre de ligne de commande a une version longue correspondante commençant
par’–’.  Par exemple, <em>-u</em> est la forme courte de <em>–url</em>. On peut
aussi spécifier cette option dans un fichier de configuration. Pour ce faire,
utilisez la forme longue sans le’–’, suivi de sa valeur séparée par un
espace. Les éléments suivants sont tous équivalents :</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>url &lt;url&gt;</strong></p></li>
<li><p><strong>-u &lt;url&gt;</strong></p></li>
<li><p><strong>–url &lt;url&gt;</strong></p></li>
</ul>
</div></blockquote>
<p>Les réglages sont interprétés dans l’ordre.  Chaque fichier est lu de haut en bas.
par exemple :</p>
<p>sequence #1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">reject</span> <span class="o">.*</span>\<span class="o">.</span><span class="n">gif</span>
<span class="n">accept</span> <span class="o">.*</span>
</pre></div>
</div>
<p>sequence #2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">accept</span> <span class="o">.*</span>
<span class="n">reject</span> <span class="o">.*</span>\<span class="o">.</span><span class="n">gif</span>
</pre></div>
</div>
<p>Dans la séquence #1, tous les fichiers se terminant par ‘gif’ sont rejetés. Dans la séquence #2, le
accept .* (qui accepte tout) est lu avant la déclaration du rejet,
donc le rejet n’a aucun effet. Certaines options ont une portée globale, plutôt que d’être
interprété dans l’ordre. Dans ces cas, la dernière déclaration remplace celle qu’il y avait plus tôt dans le fichier..</p>
<p>Les options qui doivent être réutilié dans de fichier de config différents peuvent
être groupés dans des fichiers <em>include</em>:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>–include &lt;includeConfigPath&gt;</strong></p></li>
</ul>
</div></blockquote>
<p>The includeConfigPath would normally reside under the same config dir of its
master configs. If a URL is supplied as an includeConfigPATH, then a remote
configuraiton will be downloaded and cached (used until an update on the server
is detected.) See <a class="reference internal" href="#remote-configurations">Remote Configurations</a> for details.</p>
<p>Environment variables, and some built-in variables can also be put on the
right hand side to be evaluated, surrounded by ${..} The built-in variables are:</p>
<blockquote>
<div><ul class="simple">
<li><p>${BROKER_USER} - le nom d’utilisateur pour l’authentification auprès du courtier (par exemple, anonyme)</p></li>
<li><p>${PROGRAM}     - le nom du composant (subscribe, shovel, etc…)</p></li>
<li><p>${CONFIG}      - le nom du fichier de configuration en cours d’exécution.</p></li>
<li><p>${HOSTNAME}    - le hostname qui exécute le client.</p></li>
<li><p>${RANDID}      - Un ID aléatoire qui va être consistant pendant la duration d’une seule invocation.</p></li>
</ul>
</div></blockquote>
</section>
<section id="flowcallbacks">
<h2>flowCallbacks<a class="headerlink" href="#flowcallbacks" title="Link to this heading"></a></h2>
<p>Sarracenia utilise largement de petits extraits de code python qui personnalisent le
traitement appelé <em>flowCallback</em>. Flow_callbacks définit et utiliser des paramètres supplémentaires</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flowCallback</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">flowcb</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">Log</span>
</pre></div>
</div>
<p>Il existe également une forme plus courte pour exprimer la même chose:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">callback</span> <span class="n">log</span>
</pre></div>
</div>
<p>Quoi qu’il en soit, le module fait référence au fichier sarracenia/flowcb/msg/log.py dans le
package installé. Dans ce fichier, la classe Log est celle qui a été recherchée pour le point d’entré.
Le fichier log.py inclus dans le package est le suivant:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sarracenia.flowcb</span> <span class="kn">import</span> <span class="n">FlowCB</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span> <span class="vm">__name__</span> <span class="p">)</span>

<span class="k">class</span> <span class="nc">Log</span><span class="p">(</span><span class="n">Plugin</span><span class="p">):</span>

  <span class="k">def</span> <span class="nf">after_accept</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">worklist</span><span class="p">):</span>
      <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">worklist</span><span class="o">.</span><span class="n">incoming</span><span class="p">:</span>
          <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span> <span class="s2">&quot;msg/log received: </span><span class="si">%s</span><span class="s2"> &quot;</span> <span class="o">%</span> <span class="n">msg</span> <span class="p">)</span>
      <span class="k">return</span> <span class="n">worklist</span>
</pre></div>
</div>
<p>C’est une classe python normale, déclarée comme enfant de la classe sarracenia.flowcb.FlowCB.
Les méthodes (noms de fonction) dans le plugin décrivent quand
ces routines seront appelées. Pour plus de détails, consultez le
<a class="reference external" href="../Explanation/SarraPluginDev.html">Programmer’s Guide</a></p>
<p>Pour ajouter un traitement spécial des messages, créez un module en python
et faites-le inclure des points d’entrée.</p>
<p>Il existe également <em>flowCallbackPrepend</em> qui ajoute une classe flowCallback à l’avant
de la liste (qui détermine l’ordre d’exécution relatif entre les classes flowCallback.)</p>
<section id="options-callback">
<h3>Options callback<a class="headerlink" href="#options-callback" title="Link to this heading"></a></h3>
<p>les rappels livrés avec metpx-sr3 suivent la convention suivante :</p>
<ul class="simple">
<li><p>ils sont placés dans l’arborescence du répertoire sarracenia/flowcb.</p></li>
<li><p>le nom de la classe principale est le même que le nom du fichier qui la contient.</p></li>
</ul>
<p>nous fournissons donc le sucre syntaxique suivant:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">callback</span> <span class="n">log</span>    <span class="p">(</span><span class="ow">is</span> <span class="n">equivalent</span> <span class="n">to</span> <span class="o">*</span><span class="n">flowCallback</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">flowcb</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">Log</span><span class="o">*</span> <span class="p">)</span>
</pre></div>
</div>
<p>Il y a de même un <em>callback_prepend</em> à remplir.</p>
</section>
<section id="importation-dextensions">
<h3>Importation d’extensions<a class="headerlink" href="#importation-dextensions" title="Link to this heading"></a></h3>
<p>L’option <em>import</em> fonctionne d’une manière familière aux développeurs Python,
qui les rends disponibles pour une utilisation par le noyau Sarracenia, ou flowCallback.
Les développeurs peuvent ajouter des protocoles supplémentaires pour les messages ou
transfert de fichiers.  Par exemple:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">torr</span>
</pre></div>
</div>
<p>serait un nom raisonnable pour un protocole de transfert pour récupérer des
ressources avec le protocole bittorrent. Un squelette d’une telle chose
ressemblerait à ceci</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">sarracenia.transfer</span>

<span class="k">class</span> <span class="nc">torr</span><span class="p">(</span><span class="n">sarracenia</span><span class="o">.</span><span class="n">transfer</span><span class="o">.</span><span class="n">Transfer</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;loading&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Pour plus de détails sur la mise en œuvre des prolongations, consultez le
<a class="reference external" href="../Explanation/SarraPluginDev.html">Programmer’s Guide</a></p>
</section>
<section id="plugins-v2-obsoletes">
<h3>Plugins v2 Obsolètes<a class="headerlink" href="#plugins-v2-obsoletes" title="Link to this heading"></a></h3>
<p>Il existe également un style de plugins plus ancien (v2). Qui sont généralement
précédé du nom du plugin</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">msg_to_clusters</span> <span class="n">DDI</span>
<span class="n">msg_to_clusters</span> <span class="n">DD</span>

<span class="n">on_message</span> <span class="n">msg_to_clusters</span>
</pre></div>
</div>
<p>Un paramètre ‘msg_to_clusters’ est nécessaire par le plugin <em>msg_to_clusters</em>
référencés dans le <em>on_message</em> les plugins v2 sont un peu plus
encombrant à écrire. Ils sont inclus ici pour être complets, mais
les utilisateurs doivent utiliser la version 3 (flowCallback ou extensions)
discuté ensuite) lorsque cela est possible.</p>
<p>Raisons d’utiliser des plugins de style plus récents:</p>
<ul class="simple">
<li><p>La prise en charge de l’exécution des plugins v2 est réalisée à l’aide d’un flowcb
appelé v2wrapper. Il effectue beaucoup de traitement pour conclure
les structures de données v3 pour ressembler à celles de la v2, puis a
pour propager les modifications. C’est un peu cher.</p></li>
<li><p>les extensions de style plus récentes sont des modules python ordinaires, contrairement à
v2 qui nécessitent des incantations magiques mineures.</p></li>
<li><p>lorsqu’un module v3 (flowCallback ou importé) présente une erreur de syntaxe,
tous les outils de l’interpréteur python s’appliquent, ce qui donne
beaucoup plus de commentaires au codeur. Avec la v2, il
dit seulement qu’il y a quelque chose qui ne va pas, beaucoup plus difficile à déboguer.</p></li>
<li><p>l’api v3 est strictement plus puissante que la v2, car elle fonctionne
sur des groupes de messages, plutôt que sur des messages individuels.</p></li>
</ul>
</section>
<section id="environment-variables">
<h3>Environment Variables<a class="headerlink" href="#environment-variables" title="Link to this heading"></a></h3>
<p>On peut aussi utiliser des variables d´environnement avec la syntax
<em>${ENV}</em> ou <em>ENV</em> est le nom d´une variable d´environnement. S´il faut
définir une variable d´environnement pour une utilisation par Sarracenia,
on peut l´indiquer dans un fichier de configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">declare</span> <span class="n">env</span> <span class="n">HTTP_PROXY</span><span class="o">=</span><span class="n">localhost</span>
</pre></div>
</div>
</section>
<section id="fichiers-journal-et-suivi">
<h3>Fichiers journal et Suivi<a class="headerlink" href="#fichiers-journal-et-suivi" title="Link to this heading"></a></h3>
<ul>
<li><dl class="simple">
<dt>debug</dt><dd><p>L’option de déboggage <strong>debug</strong> est identique à l’utilisation de <strong>loglevel debug</strong>.</p>
</dd>
</dl>
</li>
<li><p>logMessageDump  (défaut: off) booléen flag
s’il est défini, tous les champs d’un message sont imprimés, plutôt qu’une simple référence url/chemin.</p></li>
<li><dl class="simple">
<dt>logEvents ( défaut after_accept,after_work,on_housekeeping )</dt><dd><p>émettre des messages de journal standard aux points donnés du traitement des messages.
autres valeurs : on_start, on_stop, post, gather, … etc…</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>loglevel ( défaut: info )</dt><dd><p>Le niveau de journalisation exprimé par la journalisation de python. Les valeurs possibles sont : critical, error, info, warning, debug.</p>
</dd>
</dl>
</li>
<li><p>–logStdout ( défaut: False )  CAS D’UTILISATION EXPÉRIMENTAL POUR DOCKER</p>
<blockquote>
<div><p><em>logStdout</em> désactive la gestion des journaux. Mieux utilisé sur la ligne de commande, car il y a
certains risques de créer des fichiers stub avant que les configurations ne soient complètement analysées</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sr3</span> <span class="o">--</span><span class="n">logStdout</span> <span class="n">start</span>
</pre></div>
</div>
<p>Tous les processus lancés héritent de leurs descripteurs de fichier du parent, donc toutes les sorties sont comme une session interactive.</p>
<p>Cela contraste avec le cas normal, où chaque instance prend soin de ses journaux, en tournant et en purgeant périodiquement.
Dans certains cas, on veut que d’autres logiciels s’occupent des logs, comme dans docker, où c’est préférable pour tous
que la journalisation soie en sortie standard.</p>
<p>Il n’a pas été mesuré, mais il y a une probabilité raisonnable que l’utilisation de <em>logStdout</em> avec de grandes configurations (des dizaines
d’instances/processus configurés) entraînera soit une corruption des journaux, soit limitera la vitesse d’exécution de tous les processus
à écrire à stdout.</p>
</div></blockquote>
</li>
<li><dl class="simple">
<dt>log_reject &lt;True|False&gt; ( défaut: False )</dt><dd><p>afficher un ligne de journal pour chaque message rejeté.  Ceci peut produire des journeaux énorme.
D’habitude utilisé uniquement lors du debogage.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>log &lt;dir&gt; ( défaut: ~/.cache/sarra/log ) (sur Linux)</dt><dd><p>Répertoire dans lequel stocker les fichiers journaux.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>statehost &lt;False|True&gt; ( défaut: False )</dt><dd><p>Dans les grands centres de données, l’annuaire de base peut être partagé entre des milliers de
Nœuds. Statehost ajoute le nom du nœud après le répertoire de cache pour le rendre
unique à chaque nœud. Ainsi, chaque nœud a ses propres fichiers d’état et journaux.
Par exemple, sur un nœud nommé goofy, ~/.cache/sarra/log/ devient ~/.cache/sarra/goofy/log.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>logRotateCount &lt;max_logs&gt; ( défaut: 5 )</dt><dd><p>Nombre maximal de journaux archivés.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>logRotateInterval &lt;duration&gt;[&lt;time_unit&gt;] ( défaut: 1 jour == 86,400 secondes )</dt><dd><p>La durée de l’intervalle avec une unité de temps optionnelle (c’est-à-dire 5m, 2h, 3d)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>permLog ( défaut: 0600 )</dt><dd><p>Bits d’autorisation à définir sur les fichiers journaux.</p>
</dd>
</dl>
</li>
</ul>
<p>Voir le <cite>Subscriber Guide &lt;../How2Guides/subscriber.html&gt;</cite> pour une discussion plus détaillée sur les
options de journalisations et de techniques.</p>
</section>
<section id="identification-credentials">
<h3>IDENTIFICATION (CREDENTIALS)<a class="headerlink" href="#identification-credentials" title="Link to this heading"></a></h3>
<p>Normalement, on ne spécifie pas de mots de passe dans les fichiers de
configuration. Ils sont plutôt placés dans le fichier d´information d´identifcation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">edit</span> <span class="o">~/.</span><span class="n">config</span><span class="o">/</span><span class="n">sr3</span><span class="o">/</span><span class="n">credentials</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>Pour chaque url spécifié qui nécessite un mot de passe, on place une entrée
correspondante dans <em>credentials.conf</em>. L’option broker définit toutes les
informations d’identification pour se connecter au serveur <strong>RabbitMQ</strong>.</p>
<ul class="simple">
<li><p><strong>broker amqp{s}://&lt;user&gt;:&lt;pw&gt;&#64;&lt;brokerhost&gt;[:port]/&lt;vhost&gt;</strong></p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">par</span> <span class="n">défaut</span><span class="p">:</span> <span class="n">amqps</span><span class="p">:</span><span class="o">//</span><span class="n">anonymous</span><span class="p">:</span><span class="n">anonymous</span><span class="nd">@dd</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">gc</span><span class="o">.</span><span class="n">ca</span><span class="o">/</span> <span class="p">)</span>
</pre></div>
</div>
<p>Pour tous les programmes de <strong>sarracenia</strong>, les parties confidentielles
des justificatifs d’identité sont stockées uniquement dans
~/.config/sarra/credentials.conf. Cela comprend les mots de passe pour la destination
et le courtier ainsi que les paramètres requis par les composants.  Une entrée par ligne.  Exemples :</p>
<ul class="simple">
<li><p><strong>amqp://user1:password1&#64;host/</strong></p></li>
<li><p><strong>amqps://user2:password2&#64;host:5671/dev</strong></p></li>
<li><p><strong>amqps://usern:passwd&#64;host/ login_method=PLAIN</strong></p></li>
<li><p><strong>sftp://user5:password5&#64;host</strong></p></li>
<li><p><strong>sftp://user6:password6&#64;host:22  ssh_keyfile=/users/local/.ssh/id_dsa</strong></p></li>
<li><p><strong>ftp://user7:password7&#64;host  passive,binary</strong></p></li>
<li><p><strong>ftp://user8:password8&#64;host:2121  active,ascii</strong></p></li>
<li><p><strong>ftps://user7:De%3Aize&#64;host  passive,binary,tls</strong></p></li>
<li><p><strong>ftps://user8:%2fdot8&#64;host:2121  active,ascii,tls,prot_p</strong></p></li>
<li><p><strong>https://ladsweb.modaps.eosdis.nasa.gov/ bearer_token=89APCBF0-FEBE-11EA-A705-B0QR41911BF4</strong></p></li>
</ul>
<p>Dans d’autres fichiers de configuration ou sur la ligne de commande, l’url
n’inclut pas le mot de passe ou spécification de clé.  L’url donné dans les
autres fichiers est utilisé comme clé de recherche pour credentials.conf.</p>
<section id="details-d-identifiants">
<h4>Details d’Identifiants<a class="headerlink" href="#details-d-identifiants" title="Link to this heading"></a></h4>
<p>Vous devrez peut-être spécifier des options supplémentaires pour des entrées d’informations d’identification spécifiques.
Ces détails peuvent être ajoutés après la fin de l’URL, avec plusieurs détails séparés par des virgules (voir les exemples ci-dessus).</p>
<p>Détails pris en charge</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- ``ssh_keyfile=&lt;path&gt;`` - (SFTP) Chemin d’accès au fichier de clés SSH
- ``passive`` - (FTP) Utiliser le mode passif
- ``active`` - (FTP) Utiliser le mode actif
- ``binary`` - (FTP) Utiliser le mode binaire
- ``ascii`` - (FTP) Utiliser le mode ASCII
- ``ssl`` - (FTP) Utiliser SSL/FTP standard
- ``tls`` - (FTP) Utiliser FTPS avec TLS
- ``prot_p`` - (FTPS) Utiliser une connexion de données sécurisée pour les connexions TLS (sinon, du texte clair est utilisé)
- ``bearer_token=&lt;token&gt;`` (or ``bt=&lt;token&gt;``) - (HTTP) Jeton de porteur pour l’authentification
- ``login_method=&lt;PLAIN|AMQPLAIN|EXTERNAL|GSSAPI&gt;`` - (AMQP) Par défaut, la méthode de connexion sera automatiquement déterminée. Cela peut être remplacé en spécifiant explicitement une méthode de connexion, ce qui peut être nécessaire si un courtier prend en charge plusieurs méthodes et qu’une méthode incorrecte est automatiquement sélectionnée.
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Les informations d’identification SFTP sont facultatives, car sarracenia cherchera dans le répertoire .ssh
et utilisera les informations d’identification SSH normales qui s’y trouvent.</p>
<p>Ces chaînes sont codées en URL, donc si un compte a un mot de passe avec un caractère spécial,
son équivalent codé par l’URL peut être fourni.  Dans le dernier exemple ci-dessus,
<strong>%2f</strong> signifie que le mot de passe réel est: <strong>/dot8</strong>
L’avant-dernier mot de passe est : <strong>De:olonize</strong>. ( %3a étant la valeur codée url pour un caractère deux-points. )</p>
</div>
</section>
</section>
</section>
<section id="traitement-periodique">
<h2>TRAITEMENT PÉRIODIQUE<a class="headerlink" href="#traitement-periodique" title="Link to this heading"></a></h2>
<p>La plupart des traitements ont lieu à la réception d’un message, mais il y a une maintenance périodique
qui se produit à chaque intervalle <em>housekeeping</em> (la valeur par défaut est de 5 minutes.)  À chaque <em>housekeeping</em> tous les
les plugins <em>on_housekeeping</em> configurés sont exécutés. Par défaut, trois sont présents :</p>
<ul class="simple">
<li><p>log - imprime « housekeeping » dans le journal.</p></li>
<li><p>nodupe - vieillit les anciennes entrées dans le cache de réception, afin de minimiser sa taille.</p></li>
<li><p>memory - vérifie l’utilisation de la mémoire du processus et redémarre si elle est trop grande.</p></li>
</ul>
<p>Le journal contiendra des messages des trois plugins à chaque intervalle de housekeeping, et
si un traitement périodique supplémentaire est nécessaire, l’utilisateur peut configurer d’autres
plugins à exécuter avec l’option <em>on_housekeeping</em>.</p>
<section id="sanity-log-dead-interval-defaut-1-5-housekeeping">
<h3>sanity_log_dead &lt;interval&gt; (défaut: 1.5*housekeeping)<a class="headerlink" href="#sanity-log-dead-interval-defaut-1-5-housekeeping" title="Link to this heading"></a></h3>
<p>L’option <strong>sanity_log_dead</strong> définit la durée à prendre en compte avant de redémarrer
un composant.</p>
</section>
<section id="nodup-ttl-off-on-999-defaut-off">
<h3>nodup_ttl &lt;off|on|999&gt; (défaut: off)<a class="headerlink" href="#nodup-ttl-off-on-999-defaut-off" title="Link to this heading"></a></h3>
<p>Le nettoyage des éléments expirés dans la store de suppression des doublons se produit à chaque housekeeping.</p>
</section>
</section>
<section id="recuperation-derreur">
<h2>RÉCUPÉRATION D’ERREUR<a class="headerlink" href="#recuperation-derreur" title="Link to this heading"></a></h2>
<p>Les outils sont conçus pour fonctionner bien sans surveillance, et donc lorsque des erreurs transitoires se produisent, ils
essayent de récupérer élégamment.  Il y a des délais d’attente sur toutes les opérations, et en cas de défaillance
détectée, le problème est noté pour une nouvelle tentative.  Des erreurs peuvent se produire à plusieurs reprises :</p>
<ul class="simple">
<li><p>Établir une connexion avec le courtier.</p></li>
<li><p>perte d’une connexion avec le courtier</p></li>
<li><p>établir une connexion au serveur de fichiers pour un fichier (à télécharger).</p></li>
<li><p>perte d’une connexion au serveur.</p></li>
<li><p>pendant le transfert de données.</p></li>
</ul>
<p>Initialement, les programmes essaient de télécharger (ou d’envoyer) un fichier un nombre de fois fixe (<em>tentatives</em>, par défaut: 3).
Si les trois tentatives de traitement du fichier échouent, le fichier est placé dans “réessayer”.
Le programme poursuit ensuite le traitement des nouveaux éléments. Lorsqu’il n’y a pas de nouveaux éléments,
le programme recherche un fichier à traiter dans la fil d’attente de nouvelles tentatives. Il vérifie ensuite si le fichier
est vieux, au-delà du <em>retry_expire</em> (par défaut : 2 jours). Si le fichier n’a pas expiré, alors
il déclenche une nouvelle série de tentatives de traitement du fichier. Si les tentatives échouent, il revient en arrière
dans la fil d’attente de nouvelles tentatives.</p>
<p>Cet algorithme garantit que les programmes ne restent pas bloqués sur un seul mauvais produit qui empêche
le reste de la fil d’attente en cours de traitement, et permet une récupération raisonnable et progressive,
permettant aux nouvelles données de circuler et en envoyant les anciennes données de manière opportuniste
lorsqu’il y a des lacunes.</p>
<p>Bien qu’un traitement rapide de bonnes données soit très souhaitable, il est important de ralentir en cas d’erreur.
Souvent, les erreurs sont liées à la charge, et une nouvelle tentative rapide ne fera qu’empirer les choses.
Sarracenia utilise le back-off exponentiel à de nombreux endroits pour éviter de surcharger un serveur lorsqu’il y a
des erreurs. Le back-off peut s’accumuler au point où les nouvelles tentatives peuvent être séparées d’une minute
ou deux. Une fois que le serveur recommence à répondre normalement, les programmes reviendront à la
vitesse normale de traitement.</p>
</section>
<section id="exemples">
<h2>EXEMPLES<a class="headerlink" href="#exemples" title="Link to this heading"></a></h2>
<p>Voici un court exemple complet de fichier de configuration</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">broker</span> <span class="n">amqps</span><span class="p">:</span><span class="o">//</span><span class="n">dd</span><span class="o">.</span><span class="n">weather</span><span class="o">.</span><span class="n">gc</span><span class="o">.</span><span class="n">ca</span><span class="o">/</span>

<span class="n">subtopic</span> <span class="n">model_gem_global</span><span class="mf">.25</span><span class="n">km</span><span class="o">.</span><span class="n">grib2</span><span class="o">.</span><span class="c1">#</span>
<span class="n">accept</span> <span class="o">.*</span>
</pre></div>
</div>
<p>Ce fichier ci-dessus se connectera au courtier dd.weather.gc.ca, se connectant en tant qu’anonyme
avec mot de passe anonyme (par défaut) pour obtenir des annonces a propos de fichiers dans le
répertoire <a class="reference external" href="http://dd.weather.gc.ca/model_gem_global/25km/grib2">http://dd.weather.gc.ca/model_gem_global/25km/grib2</a>.
Tous les fichiers qui arrivent dans ce répertoire ou en dessous seront téléchargés
dans le répertoire actif (ou simplement imprimé en sortie standard si l’option -n
a été spécifié.)</p>
<p>Divers exemples de fichiers de configuration sont disponibles ici :</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/MetPX/sarracenia/tree/main/sarra/examples">https://github.com/MetPX/sarracenia/tree/main/sarra/examples</a></p>
</div></blockquote>
<section id="queues-and-multiple-streams">
<h3>QUEUES and MULTIPLE STREAMS<a class="headerlink" href="#queues-and-multiple-streams" title="Link to this heading"></a></h3>
<p>Lorsqu’il est exécuté, <strong>subscribe</strong> choisit un nom de fil d’attente, ou il écrit
à un fichier nommé d’après le fichier de configuration donné comme argument pour <strong>subscribe</strong>
avec un suffixe .queue ( .”configfile”.queue).
Si l’abonnement est arrêté, les messages publiés continuent de s’accumuler sur le
broker dans la fil d’attente.  Lorsque le programme est redémarré, il utilise le nom de la fil d’attente
stocké dans ce fichier pour se connecter à la même fil d’attente et ne perd aucun message.</p>
<p>Les téléchargements de fichiers peuvent être parallélisés en exécutant plusieurs abonnements à l’aide de
la même fil d’attente.  Les processus partageront la fil d’attente et téléchargerons
une partie de ce qui a été sélectionné.  Il suffit de lancer plusieurs instances
d’abonnement dans le même utilisateur/répertoire à l’aide du même fichier de configuration.</p>
<p>Vous pouvez également exécuter plusieurs abonnements avec différents fichiers de configuration pour
avoir plusieurs flux de téléchargement dans le même répertoire,
et ce flux de téléchargement peut également être multi-flux.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Alors que les courtiers gardent les files d’attente disponibles pendant un certain temps, les files d’attente prennent des ressources sur
les courtiers, et sont nettoyés de temps en temps.  Une fil d’attente à laquelle on n’accède pas pour
une longue période (dépendante de la mise en œuvre) sera détruite.  Une fil d’attente qui n’est pas
accédé et ayant trop de fichiers (définis par l’implémentation) en fil d’attente seront détruits.
Les processus qui meurent doivent être redémarrés dans un délai raisonnable pour éviter la
perte de notifications.</p>
</div>
</section>
<section id="report-et-report-exchange">
<h3>report et report_exchange<a class="headerlink" href="#report-et-report-exchange" title="Link to this heading"></a></h3>
<p>Pour chaque téléchargement, par défaut, un message de rapport amqp est renvoyé au broker.
Cela se fait avec l’option :</p>
<ul class="simple">
<li><p><strong>report &lt;booléen&gt;        (défaut: True)</strong></p></li>
<li><p><strong>report_exchange &lt;report_exchangename&gt; (défaut: xreport|xs_*username* )</strong></p></li>
</ul>
<p>Lorsqu’un rapport est généré, il est envoyé au <em>report_exchange</em> configuré. Les composants administratifs
publient directement sur <em>xreport</em>, tandis que les composants d’utilisateur publient sur le leur
échanges (xs_*nom d’utilisateur*). Les démons de rapport copient ensuite les messages dans <em>xreport</em> après validation.</p>
<p>Ces rapports sont utilisés pour le réglage de la livraison et pour les sources de données afin de générer des informations statistiques.
Définissez cette option sur <strong>False</strong>, pour empêcher la génération de rapports.</p>
</section>
<section id="instances">
<h3>INSTANCES<a class="headerlink" href="#instances" title="Link to this heading"></a></h3>
<p>Parfois, une instance d’un composant et d’une configuration ne suffit pas pour traiter et envoyer toutes les notifications disponibles.</p>
<p><strong>instances      &lt;integer&gt;     (défaut:1)</strong></p>
<p>L’option d’instance permet de lancer plusieurs instances d’un composant et d’une configuration.
Lors de l’exécution de sender par exemple, un certain nombre de fichiers d’exécution sont créés.
Dans le répertoire ~/.cache/sarra/sender/configName</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>A .sender_configname.state         est créé, contenant le nombre d’instances.
A .sender_configname_$instance.pid est créé, contenant le PID du processus $instance.
</pre></div>
</div>
<p>Dans le répertoire ~/.cache/sarra/log:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Un .sender_configname_$instance.log  est créé en tant que journal du processus $instance.
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Un bug connu dans l’interface de gestion ‘<cite>sr &lt;sr.8.html&gt;_</cite> signifie que l’instance doit
toujours être dans le fichier .conf (pas un .inc) et doit toujours être un nombre
(pas une variable substituée ou une autre valeur plus complexe.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FIXME: indiquez également l’emplacement de Windows… fichiers dot sur Windows?</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Alors que les courtiers gardent les files d’attente disponibles pendant un certain temps, les files d’attente prennent des ressources sur les
courtiers, et sont nettoyés de temps en temps.  Une fil d’attente qui n’est pas
accédé et ayant trop de fichiers en fil d’attente (définis par l’implémentation) seront détruits.
Les processus qui meurent doivent être redémarrés dans un délai raisonnable pour éviter la
perte de notifications.  Une fil d’attente à laquelle on n’accède pas pendant une longue période (dépendant de l’implémentation)
sera détruite.</p>
</div>
<section id="vip-active-passive-options">
<h4>vip - ACTIVE/PASSIVE OPTIONS<a class="headerlink" href="#vip-active-passive-options" title="Link to this heading"></a></h4>
<p><strong>sr3</strong> peut être utilisé sur un seul nœud de serveur ou sur plusieurs nœuds.
pourrait partager la responsabilité. D’autres, configurés séparément, haute disponibilité
présente un <strong>vip</strong> (ip virtuel) sur le serveur actif. Si
le serveur tombe en panne, le <strong>vip</strong> est déplacé sur un autre serveur.
Les deux serveurs fonctionneraient <strong>sr3</strong>. Les options suivants contrôle
ce genre de comportement:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>vip          &lt;string&gt;          (None)</strong></p></li>
</ul>
</div></blockquote>
<p>Lorsque vous n’exécutez qu’un seul <strong>sr3</strong> sur un serveur, ces options ne
sont pas définies et sr3 fonctionnera en mode ‘standalone’.</p>
<p>Dans le cas des courtiers en grappe, vous devez définir les options pour l’option
vip en mouvement.</p>
<p><strong>vip 153.14.126.3</strong></p>
<p>Lorsque <strong>sr3</strong> ne trouve pas le vip, il dort pendant 5 secondes et réessaie.
S´il possède le vip, il consomme et traite un message, puis revérifie le vip.
lorque plus qu´une addresse est setté commen vip, la possesion de n´importe laquelle
dans la liste est suffisante.</p>
</section>
<section id="blocksize-value-default-0-auto">
<h4>[–blocksize &lt;value&gt;] (default: 0 (auto))<a class="headerlink" href="#blocksize-value-default-0-auto" title="Link to this heading"></a></h4>
<p>This <strong>blocksize</strong> option controls the partitioning strategy used to post files.
The value should be one of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span> <span class="o">-</span> <span class="n">calcul</span> <span class="n">automatique</span> <span class="n">d</span><span class="s1">&#39;une stratégie de partitionnement appropriée (par défaut)</span>
<span class="mi">1</span> <span class="o">-</span> <span class="n">toujours</span> <span class="n">envoyer</span> <span class="n">des</span> <span class="n">fichiers</span> <span class="n">entiers</span> <span class="n">en</span> <span class="n">une</span> <span class="n">seule</span> <span class="n">partie</span><span class="o">.</span>
<span class="o">&lt;</span><span class="n">blocksize</span><span class="o">&gt;</span> <span class="o">-</span> <span class="n">utilisation</span> <span class="n">d</span><span class="s1">&#39;une taille de partition fixe (exemple : 1M)</span>
</pre></div>
</div>
<p>Les fichiers peuvent être publiés en plusieurs parties.  Chaque partie
a une somme de contrôle séparée. Les pièces et leurs sommes de contrôle sont
stockées dans le cache. Les cloisons peuvent traverser le réseau séparément,
et en parallèle.  Lorsque les fichiers changent, les transferts sont
optimisé en n’envoyant que des portions qui ont changé.</p>
<p>L’option <em>outlet</em>  permet la sortie finale d’être autre chose qu’un post.
Voir <a class="reference external" href="sr3_cpump.1.html">sr3_cpump(1)</a> pour plus de détails.</p>
</section>
<section id="pbd-post-basedir-path-facultatif">
<h4>[-pbd|–post_baseDir &lt;path&gt;] (facultatif)<a class="headerlink" href="#pbd-post-basedir-path-facultatif" title="Link to this heading"></a></h4>
<p>L’option <em>post_baseDir</em> fournit le chemin du répertoire qui, lorsqu’il est
combiné (ou trouvé) dans le chemin d’accès donné, donne le chemin absolu local
vers le fichier de données à enregistrer. La <em>post_baseDir</em> du chemin sera
supprimée du avis. Pour sftp : url’s il peut être approprié de spécifier un
chemin relatif à un compte utilisateur.  Un exemple de cette utilisation
serait :  -pbd ~user -url sftp:user&#64;host
pour file : url’s, baseDir n’est généralement pas approprié.  Pour publier
un chemin absolu, omettez le paramètre -pbd, et spécifiez simplement le chemin
complet en argument.</p>
</section>
<section id="post-baseurl-url-obligatoire">
<h4>post_baseUrl &lt;url&gt; (OBLIGATOIRE)<a class="headerlink" href="#post-baseurl-url-obligatoire" title="Link to this heading"></a></h4>
<p>L’option <strong>post_baseUrl</strong> définit comment obtenir le fichier…. il définit
le protocole, hôte, port, et optionnellement, l’utilisateur.  C’est une
bonne pratique de ne pas inclure les mots de passe dans l´URL.</p>
</section>
<section id="post-exchange-name-default-xpublic">
<h4>post_exchange &lt;name&gt; (default: xpublic)<a class="headerlink" href="#post-exchange-name-default-xpublic" title="Link to this heading"></a></h4>
<p>L’option <strong>post_exchange</strong>, qui permet d’échanger la nouvelle notification.
sera publié.  Dans la plupart des cas, il s’agit d’un’xpublic’.</p>
<p>Chaque fois qu’une avis se produit pour un produit, un utilisateur peut
définir de déclencher un script. L’option <strong>on_post</strong> serait utilisée pour faire
une telle configuration.</p>
</section>
<section id="post-exchangesplit-number-defaut-0">
<h4>post_exchangeSplit   &lt;number&gt;   (défaut: 0)<a class="headerlink" href="#post-exchangesplit-number-defaut-0" title="Link to this heading"></a></h4>
<p>L’option <strong>post_exchangeSplit</strong> ajoute un suffixe à deux chiffres résultant d’une
division entière du dernier digit de la somme de contrôle, afin de répartir les
avis entre un certain nombre d’échanges, selon la valeur de leur somme de contrôle.
C’est utilisé dans les pompes à trafic élevé pour permettre des instances
multiples de winnow, ce qui ne peut pas être instancié de la manière normale. exemple:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">post_exchangeSplit</span> <span class="mi">5</span>
<span class="n">post_exchange</span> <span class="n">xwinnow</span>
</pre></div>
</div>
<p>se traduira par l’envoi de messages à cinq échanges nommées xwinnow00, xwinnow01,
xwinnow02, xwinnow03 et xwinnow04, où chaque échange ne recevra qu’un cinquième du flux total.
xinnow01 recevra tous les messages dont la reste quand sa somme de contrôle est divisé par 5
est 1.</p>
</section>
</section>
<section id="remote-configurations">
<h3>Remote Configurations<a class="headerlink" href="#remote-configurations" title="Link to this heading"></a></h3>
<p>On peut spécifier des URI comme fichiers de configuration, plutôt que des fichiers locaux. Exemple :</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>–config http://dd.weather.gc.ca/alerts/doc/cap.conf</strong></p></li>
</ul>
</div></blockquote>
<p>Au démarrage, sr3 vérifie si le fichier local cap.conf existe dans le répertoire
répertoire de configuration local.  Si c’est le cas, alors le fichier sera lu pour trouver
une ligne comme ça :</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>–remote_config_url http://dd.weather.gc.ca/alerts/doc/cap.conf</strong></p></li>
</ul>
</div></blockquote>
<p>Dans ce cas, il vérifiera l’URL distante et comparera le temps de modification.
du fichier distant contre le fichier local. Le fichier distant n’est pas plus récent ou ne peut pas être modifié.
est atteint, alors le composant continuera avec le fichier local.</p>
<p>Si le fichier distant est plus récent ou s’il n’y a pas de fichier local, il sera téléchargé,
et la ligne remote_config_url_config_url y sera pré-pendue, de façon à ce qu’elle continue
pour se mettre à jour à l’avenir.</p>
</section>
<section id="extensions">
<h3>Extensions<a class="headerlink" href="#extensions" title="Link to this heading"></a></h3>
<p>On peut remplacer ou ajouter des fonctionnalités avec des scripts python.</p>
<p>Sarracenia est livré avec une variété d’exemples de plugins, et en utilise certains pour implémenter des fonctionnalités de base,
tels que la journalisation (implémentée par défaut en utilisant des plugins msg_log, file_log post_log):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sr3 list fcb
Provided callback classes: ( /home/peter/Sarracenia/sr3/sarracenia )
flowcb/filter/deleteflowfiles.py flowcb/filter/fdelay.py          flowcb/filter/pclean_f90.py      flowcb/filter/pclean_f92.py
flowcb/gather/file.py            flowcb/gather/message.py         flowcb/line_log.py               flowcb/line_mode.py
flowcb/log.py                    flowcb/nodupe.py                 flowcb/pclean.py                 flowcb/post/message.py
flowcb/retry.py                  flowcb/sample.py                 flowcb/script.py                 flowcb/v2wrapper.py
flowcb/work/rxpipe.py
$
</pre></div>
</div>
<p>Les utilisateurs peuvent placer leurs propres scripts dans le sous-répertoire de script dans leur répertoire de configuration
( sur Linux, le ~/.config/sarra/plugins).</p>
<section id="flowcallback-et-flowcallbackprepend-class">
<h4>flowCallback et flowCallbackPrepend &lt;class&gt;<a class="headerlink" href="#flowcallback-et-flowcallbackprepend-class" title="Link to this heading"></a></h4>
<p>La directive flowCallback prend une classe à charger et peut analyser les points d’entrée comme argument</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flowCallback</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">flowcb</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">Log</span>
</pre></div>
</div>
<p>Avec cette directive dans un fichier de configuration, la classe Log trouvée dans le package installé sera utilisée.
Ce module enregistre les messages <em>after_accept</em> (après que les messages sont passé par les masques d’accept/reject)
et le <em>after_work</em> (après le téléchargement ou l’envoi du fichier). Voici le code source
pour cette classe de rappel</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">sarracenia.flowcb</span> <span class="kn">import</span> <span class="n">FlowCB</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Log</span><span class="p">(</span><span class="n">FlowCB</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">options</span><span class="p">):</span>

      <span class="c1"># FIXME: should a logging module have a logLevel setting?</span>
      <span class="c1">#        just put in a cookie cutter for now...</span>
      <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="s1">&#39;logLevel&#39;</span><span class="p">):</span>
          <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">logging</span><span class="p">,</span> <span class="n">options</span><span class="o">.</span><span class="n">logLevel</span><span class="o">.</span><span class="n">upper</span><span class="p">()))</span>
      <span class="k">else</span><span class="p">:</span>
          <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">after_accept</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">worklist</span><span class="p">):</span>
      <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">worklist</span><span class="o">.</span><span class="n">incoming</span><span class="p">:</span>
          <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;accepted: </span><span class="si">%s</span><span class="s2"> &quot;</span> <span class="o">%</span> <span class="n">msg_dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="p">)</span>

  <span class="k">def</span> <span class="nf">after_work</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">worklist</span><span class="p">):</span>
      <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">worklist</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
          <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;worked successfully: </span><span class="si">%s</span><span class="s2"> &quot;</span> <span class="o">%</span> <span class="n">msg</span><span class="o">.</span><span class="n">dumps</span><span class="p">()</span> <span class="p">)</span>
</pre></div>
</div>
<p>Si vous avez plusieurs rappels configurés, ils seront appelés dans le même ordre que dans
fichier de configuration. Les composants de sr3 sont souvent différenciés par les rappels configurés.
Par exemple, un <em>watch</em> est un flux avec la classe sarracenia.flowcb.gather.file.File qui
est utilisé pour analyser les répertoires. Un besoin courant lorsqu’une source de données n’est pas facilement accessible
avec les scripts python est d’utiliser le rappel de script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flowCallbackPrepend</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">flowcb</span><span class="o">.</span><span class="n">script</span><span class="o">.</span><span class="n">Script</span>

<span class="n">script_gather</span> <span class="n">get_weird_data</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>En utilisant la variante <em>_prepend</em> de l’option <em>flowCallback</em>, le rappel de script aura le
point d’entrée de la classe, avant le rappel de fichier… Donc, un script sera exécuté, puis
le répertoire sera vérifié pour les nouveaux fichiers.  Voici une partie de la classe de rappel Script</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">sarracenia.flowcb</span> <span class="kn">import</span> <span class="n">FlowCB</span>
<span class="kn">import</span> <span class="nn">subprocess</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Script</span><span class="p">(</span><span class="n">FlowCB</span><span class="p">):</span>

   <span class="o">.</span>
   <span class="o">.</span>
   <span class="o">.</span>

    <span class="k">def</span> <span class="nf">run_script</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">script</span> <span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">o</span><span class="o">.</span><span class="n">script_gather</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;subprocess.run failed err=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exception details:&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">gather</span><span class="p">(</span><span class="bp">self</span> <span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">o</span><span class="p">,</span> <span class="s1">&#39;script_gather&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">o</span><span class="o">.</span><span class="n">script_gather</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">run_script</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">o</span><span class="o">.</span><span class="n">script_gather</span> <span class="p">)</span>
        <span class="k">return</span> <span class="p">[]</span>
</pre></div>
</div>
</section>
</section>
<section id="identity">
<h3>Identity<a class="headerlink" href="#identity" title="Link to this heading"></a></h3>
<p>On peut utiliser la directive <em>import</em> pour ajouter de nouveaux algorithmes de somme de contrôle en sous-classant
sarracenia.identity.Identity.</p>
</section>
<section id="transfer">
<h3>Transfer<a class="headerlink" href="#transfer" title="Link to this heading"></a></h3>
<p>On peut ajouter la prise en charge de méthodes supplémentaires de téléchargement de données par sous-classification
sarracenia.transfer.Transfer.</p>
<p>Les scripts de protocole de transfert doivent être déclarés à l’aide de l’option <strong>import</strong>.
sauf pour les fonctions intégrées ciblées, un module <strong>registered_as</strong> qui définit
une liste des protocoles fournis par ces fonctions.  Exemple:</p>
<dl class="simple">
<dt>def registered_as(self) :</dt><dd><p>return [‘ftp’,’ftps’]</p>
</dd>
</dl>
<p>Voir le <a class="reference external" href="../Explanation/SarraPluginDev.html">Programming Guide</a> pour plus d’informations sur le développement d’extensions.</p>
</section>
<section id="roles-feeder-admin-declare">
<h3>ROLES - feeder/admin/declare<a class="headerlink" href="#roles-feeder-admin-declare" title="Link to this heading"></a></h3>
<p><em>d’intérêt que pour les administrateurs</em></p>
<p>Les options d’administration sont définies à l’aide de:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">edit</span> <span class="o">~/.</span><span class="n">config</span><span class="o">/</span><span class="n">sr3</span><span class="o">/</span><span class="n">admin</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>L’option <em>feeder</em> spécifie le compte utilisé par défaut pour les transferts
système pour les composants tels que sr_shovel, sr_sarra et sr_sender (lors de publication).</p>
<p>– <strong>feeder amqp{s}://&lt;user&gt;:&lt;pw&gt;&#64;&lt;post_brokerhost&gt;[:port]/&lt;vhost&gt;</strong> (valeur par défaut : Aucun)
– <strong>admin &lt;nom&gt; (par défaut : Aucun)</strong></p>
<p>L’utilisateur administrateur est utilisé pour effectuer des opérations de maintenance sur la pompe, telles que la définition
des autres utilisateurs. La plupart des utilisateurs sont définis à l’aide de l’option <em>declare</em>. Le chargeur peut également être déclaré de cette
manière.</p>
<ul class="simple">
<li><p><strong>declare &lt;role&gt; &lt;name&gt;   (pas de défaut)</strong></p></li>
</ul>
<section id="subscriber">
<h4>subscriber<a class="headerlink" href="#subscriber" title="Link to this heading"></a></h4>
<blockquote>
<div><p>Un <em>subscriber</em> (abonné) est un utilisateur qui ne peut s’abonner qu’aux données
et renvoyer des messages de rapport. Les abonnés ne sont pas autorisés à injecter des données.
Chaque abonné a un central xs_&lt;user&gt;nommé sur la pompe, où si un utilisateur est
nommé <em>Acme</em>, l’échange correspondant sera <em>xs_Acme</em>.  Cet échange
est l’endroit où un processus sr_subscribe enverra ses messages de rapport.</p>
<p>Par convention/défaut, l’utilisateur <em>anonyme</em> est créé sur toutes les pompes pour
permettre l’abonnement sans un compte spécifique.</p>
</div></blockquote>
</section>
<section id="source">
<h4>source<a class="headerlink" href="#source" title="Link to this heading"></a></h4>
<blockquote>
<div><p>Un utilisateur autorisé à s’abonner ou à générer des données. Une source ne représente pas nécessairement
une personne ou un type de données, mais plutôt une organisation responsable des données produites.
Donc, si une organisation recueille et met à disposition dix types de données avec un seul contact,
e-mail, ou numéro de téléphone, toute question sur les données et leur disponibilité par rapport aux
activités de collecte peuvent alors utiliser un seul compte “source”.</p>
<p>Chaque source reçoit un échange xs_&lt;utilisateur&gt; pour l’injection de publications de données. Cela est comme un abonné
pour envoyer des messages de rapport sur le traitement et la réception des données. La source peut également avoir
un échange xl_&lt;utilisateur&gt; où, selon les configurations de routage des rapports, les messages de rapport des
consommateurs seront envoyés.</p>
</div></blockquote>
</section>
<section id="feeder">
<h4>feeder<a class="headerlink" href="#feeder" title="Link to this heading"></a></h4>
<blockquote>
<div><p>Un utilisateur autorisé à écrire à n’importe quel échange. Une sorte d’utilisateur de flux administratif, destiné à pomper
des messages lorsque aucune source ou abonné ordinaire n’est approprié pour le faire. Doit être utilisé de
préférence au lieu de comptes d’administrateur pour exécuter des flux.</p>
</div></blockquote>
<p>Les informations d’identification de l’utilisateur sont placées dans le <a class="reference external" href="sr3_credentials.7.html">credentials.conf</a>
et <em>sr3 –users declare</em> mettra à jour le courtier pour accepter ce qui est spécifié dans ce fichier, tant que le
mot de passe de l’administrateur est déjà correct.</p>
</section>
</section>
<section id="fichiers-de-configuration">
<h3>FICHIERS DE CONFIGURATION<a class="headerlink" href="#fichiers-de-configuration" title="Link to this heading"></a></h3>
<p>Alors qu’on peut gérer les fichiers de configuration à l’aide de la fonction <em>add</em>, <em>remove</em>,
<em>list</em>, <em>edit</em>, <em>disable</em>, et <em>enable</em> actions, on peut aussi tout faire.
des mêmes activités manuellement en manipulant les fichiers dans les paramètres.
dans l’annuaire de l’entreprise.  Les fichiers de configuration pour une configuration sr_subscribe.
appelé <em>myflow</em> serait ici :</p>
<blockquote>
<div><ul class="simple">
<li><p>linux : ~/.config/sarra/subscribe/myflow.conf (selon : <a class="reference external" href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-0.6.html">XDG Open Directory Specication</a> )</p></li>
<li><p>Windows : %AppDir%/science.gc.ca/sarra/myflow.conf, cela pourrait être :
C:UserspeterAppDataLocalscience.gc.casarrasarramyflow.conf</p></li>
<li><p>MAC : FIXME.</p></li>
</ul>
</div></blockquote>
<p>Le sommet de l’arborescence a <em>~/.config/sarra/default.conf</em> qui contient les paramètres suivants
sont lus par défaut pour tout composant au démarrage. Dans le même répertoire,
<em>~/.config/sarra/credentials.conf</em> contient des informations d’identification
(mots de passe) à utiliser par sarracenia (<a class="reference internal" href="#identification-credentials">IDENTIFICATION (CREDENTIALS)</a> pour plus de détails. ).</p>
<p>On peut également définir la variable d’environnement XDG_CONFIG_HOME pour remplacer
le placement par défaut, ou bien Les fichiers de configuration individuels peuvent
être placés dans n’importe quel répertoire et invoqués avec la commande chemin complet.
Lorsque des composants sont invoqués, le fichier fourni est interprété comme un fichier
(avec un suffixe.conf conf supposé.) S’il n’est pas trouvé comme chemin d’accès au
fichier, alors l’option recherchera dans le répertoire de configuration du
composant ( <strong>config_dir</strong> / <strong>component</strong>) pour un fichier.conf correspondant.</p>
<p>S’il n’est toujours pas trouvé, il le recherchera dans le répertoire de configuration du site.
(linux : /usr/share/default/sarra/<strong>component</strong>).</p>
<p>Enfin, si l’utilisateur a défini l’option <strong>remote_config</strong> sur True et s’il
dispose de sites web configurés où l’on peut trouver des configurations
(option <strong>remote_config_config_url</strong>), Le programme essaiera de télécharger
le fichier nommé à partir de chaque site jusqu’à ce qu’il en trouve un.
En cas de succès, le fichier est téléchargé dans <strong>config_dir/Downloads</strong> et
interprété par le programme à partir de là.  Il y a un processus similaire
pour tous les <em>plugins</em> qui peuvent être interprété et exécuté à l’intérieur
des composantes de la Sarracenia.  Les composants chercheront en premier lieu
dans le répertoire <em>plugins</em> dans l’arbre de configuration des
utilisateurs, puis dans le site, puis dans le paquet sarracenia lui-même,
et finalement il regardera à distance.</p>
</section>
<section id="options-de-compatibilite-sundew">
<h3>OPTIONS DE COMPATIBILITÉ SUNDEW<a class="headerlink" href="#options-de-compatibilite-sundew" title="Link to this heading"></a></h3>
<p>Pour la compatibilité avec Sundew, il existe des options de livraison supplémentaires qui peuvent être spécifiées.</p>
<section id="destfn-script-script-defaut-none">
<h4>destfn_script &lt;script&gt; (défaut:None)<a class="headerlink" href="#destfn-script-script-defaut-none" title="Link to this heading"></a></h4>
<p>Cette option définit un script à exécuter lorsque tout est prêt
pour la livraison du produit. Le script reçoit une instance de la classe sender.
Le script prends le parent comme argument, et par exemple, une
modification de <strong>parent.msg.new_file</strong> changera le nom du fichier écrit localement.</p>
</section>
<section id="filename-mots-cle-defaut-none">
<h4>filename &lt;mots-clé&gt; (défaut:None)<a class="headerlink" href="#filename-mots-cle-defaut-none" title="Link to this heading"></a></h4>
<p>De <strong>MetPX Sundew</strong>, le support de cette option donne toutes sortes de possibilités
pour définir le nom de fichier distant. Certains <strong>keywords</strong> sont basés sur le fait que
les noms de fichiers <strong>MetPX Sundew</strong> ont cinq (à six) champs de chaîne de caractères séparés par des deux-points.</p>
<p>La valeur par défaut sur Sundew est NONESENDER, mais dans l’intérêt de décourager l’utilisation
de la séparation par des deux-points dans les fichiers, le défaut dans Sarracenia est WHATFN.</p>
<p>Les mots-clés possibles sont :</p>
<dl class="simple">
<dt><strong>None</strong></dt><dd><ul class="simple">
<li><p>Aucune modification du nom de fichier (enlever toute interprétation de style Sundew)
N.B. différent de NONE décrit plus loin.</p></li>
</ul>
</dd>
<dt><strong>WHATFN</strong></dt><dd><ul class="simple">
<li><p>la première partie du nom de fichier Sundew (chaîne de caractères avant le premier : )</p></li>
</ul>
</dd>
<dt><strong>HEADFN</strong></dt><dd><ul class="simple">
<li><p>Partie EN-TETE du nom de fichier Sundew</p></li>
</ul>
</dd>
<dt><strong>SENDER</strong></dt><dd><ul class="simple">
<li><p>le nom de fichier Sundew peut se terminer par une chaîne SENDER=&lt;string&gt; dans ce cas,
la &lt;string&gt; sera le nom de fichier distant</p></li>
</ul>
</dd>
<dt><strong>NONE</strong></dt><dd><ul class="simple">
<li><p>livrer avec le nom du fichier Sundew complet (sans :SENDER=…)</p></li>
</ul>
</dd>
<dt><strong>NONESENDER</strong></dt><dd><ul class="simple">
<li><p>livrer avec le nom de fichier Sundew complet (avec :SENDER=…)</p></li>
</ul>
</dd>
<dt><strong>TIME</strong></dt><dd><ul class="simple">
<li><p>horodatage ajouté au nom de fichier. Exemple d’utilisation : WHATFN:TIME</p></li>
</ul>
</dd>
<dt><strong>DESTFN=str</strong></dt><dd><ul class="simple">
<li><p>déclaration str direct du nom de fichier</p></li>
</ul>
</dd>
<dt><strong>SATNET=1,2,3,A</strong></dt><dd><ul class="simple">
<li><p>Paramètres d’application satnet interne cmc</p></li>
</ul>
</dd>
<dt><strong>DESTFNSCRIPT=script.py</strong></dt><dd><ul class="simple">
<li><p>appeler un script (identique à destfn_script) pour générer le nom du fichier à écrire</p></li>
</ul>
</dd>
</dl>
<p><strong>accept &lt;regexp pattern&gt; [&lt;keyword&gt;]</strong></p>
<p>Keyword peut être ajouté à l’option <strong>accept</strong>. Le keyword est une des options <strong>filename</strong>.
Un message qui correspond au modèle accept regexp aura son remote_file
appliqué à cette option de mot-clé. Ce mot-clé a la priorité sur le précédent <strong>nom de fichier</strong>.</p>
<p>Le <strong>regexp pattern</strong> peut être utilisé pour définir des parties du répertoire si une partie du message est placée
entre parenthèses. <strong>sender</strong> peut utiliser ces parties pour générer le nom du répertoire.
Les chaînes de parenthèses entre les guillemets rst remplaceront le mot-clé <strong>${0}</strong> dans le nom du répertoire…
le second <strong>{1} $</strong> etc.</p>
<p>Exemple d’utilisation</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>filename NONE

directory /this/first/target/directory

accept .*file.*type1.*

directory /this/target/directory

accept .*file.*type2.*

accept .*file.*type3.*  DESTFN=file_of_type3

directory /this/${0}/pattern/${1}/directory

accept .*(2016....).*(RAW.*GRIB).*
</pre></div>
</div>
<p>Un message sélectionné par le premier <em>accept</em> sera remis inaltérée dans le premier répertoire.</p>
<p>Un message sélectionné par le deuxième <em>accept</em> sera remis inaltérée dans deuxième répertoire.</p>
<p>Un message sélectionné par le troisième <em>accept</em> sera renommé « fichier_de_type3 » dans le deuxième répertoire.</p>
<p>Un message sélectionné par le quatrième <em>accept</em> sera remis inaltérée à un répertoire.</p>
<p>Ça sera appelé  <em>/ce/20160123/modèle/RAW_MERGER_GRIB/répertoire</em> si la notice du message ressemble à cela:</p>
<p><strong>20150813161959.854 http://this.pump.com/ relative/path/to/20160123_product_RAW_MERGER_GRIB_from_CMC</strong></p>
</section>
<section id="field-replacements">
<h4>Field Replacements<a class="headerlink" href="#field-replacements" title="Link to this heading"></a></h4>
<p>Dans MetPX Sundew, le format de la nomination de fichier est beaucoup plus
stricte, et est spécialisée pour une utilisation aves les données du World Meteorological Organization (WMO).
Notez que la convention du format des fichiers est antérieure, et n’a aucun rapport avec la convention de
dénomination des fichiers de WMO actuellement approuvée, et est utilisé strictement comme format interne. Les fichiers sont
séparés en six champs avec deux points. Le premier champ, DESTFN, est le “Abbreviated Header Line (AHL)” de WMO
(style 386) ou les blancs sont remplacé avec des traits de soulignement</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TTAAii</span> <span class="n">CCCC</span> <span class="n">YYGGGg</span> <span class="n">BBB</span> <span class="o">...</span>
</pre></div>
</div>
<p>(voir le manuel de WMO pour plus de détails) suivis de chiffres pour rendre le produit unique (cela est vrai en
théorie, mais pas en pratique vu qu’il existe un grand nombre de produits qui ont les mêmes identifiants).
La signification du cinquième champ est une priorité, et le dernier champ est un horodatage.
La signification des autres champs varie en fonction du contexte. Exemple de nom de fichier</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SACN43_CWAO_012000_AAA_41613</span><span class="p">:</span><span class="n">ncp1</span><span class="p">:</span><span class="n">CWAO</span><span class="p">:</span><span class="n">SA</span><span class="p">:</span><span class="mf">3.</span><span class="n">A</span><span class="o">.</span><span class="n">I</span><span class="o">.</span><span class="n">E</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span><span class="mi">20050201200339</span>
</pre></div>
</div>
<p>Si un fichier est envoyé à Sarracenia et qu’il est nommé selon les conventions de Sundew,
les champs de substitution suivants seront disponibles:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>${T1}    remplacer par le bulletin T1
${T2}    remplacer par le bulletin T2
${A1}    remplacer par le bulletin A1
${A2}    remplacer par le bulletin A2
${ii}    remplacer par le bulletin ii
${CCCC}  remplacer par le bulletin CCCC
${YY}    remplacer par le bulletin YY   (obs. jour)
${GG}    remplacer par le bulletin GG   (obs. heure)
${Gg}    remplacer par le bulletin Gg   (obs. minute)
${BBB}   remplacer par le bulletin bbb
${RYYYY} remplacer par l&#39;année de réception
${RMM}   remplacer par le mois de réception
${RDD}   remplacer par le jour de réception
${RHH}   remplacer par l&#39;heure de réception
${RMN}   remplacer par la minute de réception
${RSS}   remplacer par la seconde de réception
</pre></div>
</div>
<p>Les champs ‘R’ proviennent du sixième champ, et les autres viennent du premier champ.
Lorsque des données sont injectées dans Sarracenia à partir de Sundew, l’en-tête du message <em>sundew_extension</em>
fournira la source de ces substitions même si ces champs ont été supprimés des fichiers livrés.</p>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Concepts.html" class="btn btn-neutral float-left" title="Concepts généraux de Sarracenia" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="StrategieDetectionFichiers.html" class="btn btn-neutral float-right" title="File Detection Strategies" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Shared Services Canada, Government of Canada, GPLv2.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>