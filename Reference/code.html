

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Code Reference &mdash; Sarracenia 3.00.56rc2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=7ab3649f" />

  
    <link rel="shortcut icon" href="../_static/sarra_horror_culture_favicon.png"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8b8faa11"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contributing" href="../Contribution/index.html" />
    <link rel="prev" title="FlowCallback Reference" href="flowcb.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Sarracenia
              <img src="../_static/sarra_horror_culture_w200.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Explanation/Overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../How2Guides/index.html">HOWTOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Explanation/index.html">Explanation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="sr3_options.7.html">SR3 OPTIONS</a></li>
<li class="toctree-l2"><a class="reference internal" href="sr3_credentials.7.html">SR3 CREDENTIALS</a></li>
<li class="toctree-l2"><a class="reference internal" href="sr3.1.html">SR3</a></li>
<li class="toctree-l2"><a class="reference internal" href="sr3_post.1.html">sr3_post CLI poster</a></li>
<li class="toctree-l2"><a class="reference internal" href="sr3_cpump.1.html">Sr3_cpump C Manual Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="sr_post.7.html">Posting Message Format Man page</a></li>
<li class="toctree-l2"><a class="reference internal" href="flowcb.html">FlowCallback Reference</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Code Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia">sarracenia</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.Message"><code class="docutils literal notranslate"><span class="pre">Message</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.Sarracenia"><code class="docutils literal notranslate"><span class="pre">Sarracenia</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.TimeConversions"><code class="docutils literal notranslate"><span class="pre">TimeConversions</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.durationToSeconds"><code class="docutils literal notranslate"><span class="pre">durationToSeconds()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.durationToString"><code class="docutils literal notranslate"><span class="pre">durationToString()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.stat"><code class="docutils literal notranslate"><span class="pre">stat()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.timeflt2str"><code class="docutils literal notranslate"><span class="pre">timeflt2str()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.config">sarracenia.config</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.config.Config"><code class="docutils literal notranslate"><span class="pre">Config</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.config.config_path"><code class="docutils literal notranslate"><span class="pre">config_path()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.config.get_log_filename"><code class="docutils literal notranslate"><span class="pre">get_log_filename()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.config.get_metrics_filename"><code class="docutils literal notranslate"><span class="pre">get_metrics_filename()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.config.get_pid_filename"><code class="docutils literal notranslate"><span class="pre">get_pid_filename()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.config.get_user_cache_dir"><code class="docutils literal notranslate"><span class="pre">get_user_cache_dir()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.config.logger"><code class="docutils literal notranslate"><span class="pre">logger</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.config.no_file_config"><code class="docutils literal notranslate"><span class="pre">no_file_config()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.config.octal_number"><code class="docutils literal notranslate"><span class="pre">octal_number</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.config.one_config"><code class="docutils literal notranslate"><span class="pre">one_config()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.config.parse_count"><code class="docutils literal notranslate"><span class="pre">parse_count()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.config.parse_float"><code class="docutils literal notranslate"><span class="pre">parse_float()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.config.str_options"><code class="docutils literal notranslate"><span class="pre">str_options</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sarracenia-credentials">sarracenia.credentials</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.diskqueue">sarracenia.diskqueue</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.diskqueue.DiskQueue"><code class="docutils literal notranslate"><span class="pre">DiskQueue</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.filemetadata">sarracenia.filemetadata</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.filemetadata.FileMetadata"><code class="docutils literal notranslate"><span class="pre">FileMetadata</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.flow">sarracenia.flow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.flow.Flow"><code class="docutils literal notranslate"><span class="pre">Flow</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.flow.poll">sarracenia.flow.poll</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.flow.poll.Poll"><code class="docutils literal notranslate"><span class="pre">Poll</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.flow.post">sarracenia.flow.post</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.flow.post.Post"><code class="docutils literal notranslate"><span class="pre">Post</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.flow.report">sarracenia.flow.report</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.flow.report.Report"><code class="docutils literal notranslate"><span class="pre">Report</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.flow.sarra">sarracenia.flow.sarra</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.flow.sarra.Sarra"><code class="docutils literal notranslate"><span class="pre">Sarra</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.flow.sender">sarracenia.flow.sender</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.flow.sender.Sender"><code class="docutils literal notranslate"><span class="pre">Sender</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.flow.shovel">sarracenia.flow.shovel</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.flow.shovel.Shovel"><code class="docutils literal notranslate"><span class="pre">Shovel</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.flow.subscribe">sarracenia.flow.subscribe</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.flow.subscribe.Subscribe"><code class="docutils literal notranslate"><span class="pre">Subscribe</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.flow.watch">sarracenia.flow.watch</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.flow.watch.Watch"><code class="docutils literal notranslate"><span class="pre">Watch</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.flow.winnow">sarracenia.flow.winnow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.flow.winnow.Winnow"><code class="docutils literal notranslate"><span class="pre">Winnow</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.instance">sarracenia.instance</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.instance.RedirectedTimedRotatingFileHandler"><code class="docutils literal notranslate"><span class="pre">RedirectedTimedRotatingFileHandler</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.instance.instance"><code class="docutils literal notranslate"><span class="pre">instance</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.identity">sarracenia.identity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.identity.Identity"><code class="docutils literal notranslate"><span class="pre">Identity</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.identity.arbitrary">sarracenia.identity.arbitrary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.identity.arbitrary.Arbitrary"><code class="docutils literal notranslate"><span class="pre">Arbitrary</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.identity.sha512">sarracenia.identity.sha512</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.identity.sha512.Sha512"><code class="docutils literal notranslate"><span class="pre">Sha512</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.identity.md5">sarracenia.identity.md5</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.identity.md5.Md5"><code class="docutils literal notranslate"><span class="pre">Md5</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.identity.random">sarracenia.identity.random</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.identity.random.Random"><code class="docutils literal notranslate"><span class="pre">Random</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.moth">sarracenia.moth</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.moth.Moth"><code class="docutils literal notranslate"><span class="pre">Moth</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.moth.amqp">sarracenia.moth.amqp</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.moth.amqp.AMQP"><code class="docutils literal notranslate"><span class="pre">AMQP</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.moth.amqp.logger"><code class="docutils literal notranslate"><span class="pre">logger</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.moth.pika">sarracenia.moth.pika</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.moth.pika.PIKA"><code class="docutils literal notranslate"><span class="pre">PIKA</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sarracenia-moth-mqtt">sarracenia.moth.mqtt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.moth.amq1">sarracenia.moth.amq1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.moth.amq1.AMQ1"><code class="docutils literal notranslate"><span class="pre">AMQ1</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.rabbitmq_admin">sarracenia.rabbitmq_admin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.rabbitmq_admin.add_user"><code class="docutils literal notranslate"><span class="pre">add_user()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.rabbitmq_admin.broker_get_exchanges"><code class="docutils literal notranslate"><span class="pre">broker_get_exchanges()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.rabbitmq_admin.del_user"><code class="docutils literal notranslate"><span class="pre">del_user()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.rabbitmq_admin.exec_rabbitmqadmin"><code class="docutils literal notranslate"><span class="pre">exec_rabbitmqadmin()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.rabbitmq_admin.get_exchanges"><code class="docutils literal notranslate"><span class="pre">get_exchanges()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.rabbitmq_admin.get_queues"><code class="docutils literal notranslate"><span class="pre">get_queues()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.rabbitmq_admin.get_users"><code class="docutils literal notranslate"><span class="pre">get_users()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.rabbitmq_admin.run_rabbitmqadmin"><code class="docutils literal notranslate"><span class="pre">run_rabbitmqadmin()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.rabbitmq_admin.user_access"><code class="docutils literal notranslate"><span class="pre">user_access()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.transfer">sarracenia.transfer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.transfer.TimeoutException"><code class="docutils literal notranslate"><span class="pre">TimeoutException</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.transfer.Transfer"><code class="docutils literal notranslate"><span class="pre">Transfer</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.transfer.alarm_set"><code class="docutils literal notranslate"><span class="pre">alarm_set()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.transfer.file">sarracenia.transfer.file</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.transfer.file.File"><code class="docutils literal notranslate"><span class="pre">File</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.transfer.https">sarracenia.transfer.https</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.transfer.https.HTTPRedirectHandlerSameMethod"><code class="docutils literal notranslate"><span class="pre">HTTPRedirectHandlerSameMethod</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.transfer.https.Https"><code class="docutils literal notranslate"><span class="pre">Https</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.transfer.ftp">sarracenia.transfer.ftp</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.transfer.ftp.Ftp"><code class="docutils literal notranslate"><span class="pre">Ftp</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.transfer.ftp.IMPLICIT_FTP_TLS"><code class="docutils literal notranslate"><span class="pre">IMPLICIT_FTP_TLS</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-sarracenia.transfer.sftp">sarracenia.transfer.sftp</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sarracenia.transfer.sftp.Sftp"><code class="docutils literal notranslate"><span class="pre">Sftp</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Contribution/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api-documentation.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fr/index.html">En français</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Sarracenia</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Reference</a></li>
      <li class="breadcrumb-item active">Code Reference</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Reference/code.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="code-reference">
<span id="id1"></span><h1><a class="toc-backref" href="#id2" role="doc-backlink">Code Reference</a><a class="headerlink" href="#code-reference" title="Link to this heading"></a></h1>
<p>Internal Documentation on the full source of sr3
Not an API. subject to change without notice.
What is missing:</p>
<ul class="simple">
<li><p>All flowcallbacks are here: <a class="reference external" href="flowcb.html">flowcb</a></p></li>
<li><p>the entry points are excluded (not compatible with sphinx/autodoc.)</p></li>
</ul>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#code-reference" id="id2">Code Reference</a></p>
<ul>
<li><p><a class="reference internal" href="#module-sarracenia" id="id3">sarracenia</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.config" id="id4">sarracenia.config</a></p></li>
<li><p><a class="reference internal" href="#sarracenia-credentials" id="id5">sarracenia.credentials</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.diskqueue" id="id6">sarracenia.diskqueue</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.filemetadata" id="id7">sarracenia.filemetadata</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.flow" id="id8">sarracenia.flow</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.flow.poll" id="id9">sarracenia.flow.poll</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.flow.post" id="id10">sarracenia.flow.post</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.flow.report" id="id11">sarracenia.flow.report</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.flow.sarra" id="id12">sarracenia.flow.sarra</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.flow.sender" id="id13">sarracenia.flow.sender</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.flow.shovel" id="id14">sarracenia.flow.shovel</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.flow.subscribe" id="id15">sarracenia.flow.subscribe</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.flow.watch" id="id16">sarracenia.flow.watch</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.flow.winnow" id="id17">sarracenia.flow.winnow</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.instance" id="id18">sarracenia.instance</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.identity" id="id19">sarracenia.identity</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.identity.arbitrary" id="id20">sarracenia.identity.arbitrary</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.identity.sha512" id="id21">sarracenia.identity.sha512</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.identity.md5" id="id22">sarracenia.identity.md5</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.identity.random" id="id23">sarracenia.identity.random</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.moth" id="id24">sarracenia.moth</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.moth.amqp" id="id25">sarracenia.moth.amqp</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.moth.pika" id="id26">sarracenia.moth.pika</a></p></li>
<li><p><a class="reference internal" href="#sarracenia-moth-mqtt" id="id27">sarracenia.moth.mqtt</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.moth.amq1" id="id28">sarracenia.moth.amq1</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.rabbitmq_admin" id="id29">sarracenia.rabbitmq_admin</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.transfer" id="id30">sarracenia.transfer</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.transfer.file" id="id31">sarracenia.transfer.file</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.transfer.https" id="id32">sarracenia.transfer.https</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.transfer.ftp" id="id33">sarracenia.transfer.ftp</a></p></li>
<li><p><a class="reference internal" href="#module-sarracenia.transfer.sftp" id="id34">sarracenia.transfer.sftp</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="module-sarracenia">
<span id="sarracenia"></span><h2><a class="toc-backref" href="#id3" role="doc-backlink">sarracenia</a><a class="headerlink" href="#module-sarracenia" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.Message">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.</span></span><span class="sig-name descname"><span class="pre">Message</span></span><a class="reference internal" href="../_modules/sarracenia.html#Message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.Message" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
<p>A notification message in Sarracenia is stored as a python dictionary, with a few extra management functions.</p>
<p>The internal representation is very close to the v03 format defined here: <a class="reference external" href="https://metpx.github.io/sarracenia/Reference/sr_post.7.html">https://metpx.github.io/sarracenia/Reference/sr_post.7.html</a></p>
<p>Unfortunately, sub-classing of dict means that to copy it from a dict will mean losing the type,
and hence the need for the copyDict member.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.Message.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia.html#Message.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.Message.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sarracenia.Message.__weakref__">
<span class="sig-name descname"><span class="pre">__weakref__</span></span><a class="headerlink" href="#sarracenia.Message.__weakref__" title="Link to this definition"></a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.Message.computeIdentity">
<span class="sig-name descname"><span class="pre">computeIdentity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">o</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/sarracenia.html#Message.computeIdentity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.Message.computeIdentity" title="Link to this definition"></a></dt>
<dd><p>check extended attributes for a cached identity sum calculation.
if extended attributes are present, and
* the file mtime is not too new, and
* the cached sum us using the same method
then use the cached value.</p>
<p>otherwise, calculate a checksum.
If the data is provided, use that as the file content, otherwise
read the file form the file system.</p>
<p>Once the checksum is determined,
set the file’s extended attributes for the new value.
the method of checksum calculation is from options.identity.</p>
<p>sets the message ‘identity’ field if appropriate.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.Message.copyDict">
<span class="sig-name descname"><span class="pre">copyDict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia.html#Message.copyDict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.Message.copyDict" title="Link to this definition"></a></dt>
<dd><p>copy dictionary into message.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.Message.deriveSource">
<span class="sig-name descname"><span class="pre">deriveSource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">o</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia.html#Message.deriveSource"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.Message.deriveSource" title="Link to this definition"></a></dt>
<dd><p>set msg[‘source’] field as appropriate for given message and options (o)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.Message.deriveTopics">
<span class="sig-name descname"><span class="pre">deriveTopics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">o</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">topic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">separator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia.html#Message.deriveTopics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.Message.deriveTopics" title="Link to this definition"></a></dt>
<dd><p>derive subtopic, topicPrefix, and topic fields based on message and options.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.Message.dumps">
<span class="sig-name descname"><span class="pre">dumps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/sarracenia.html#Message.dumps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.Message.dumps" title="Link to this definition"></a></dt>
<dd><p>FIXME: used to be msg_dumps.
print a message in a compact but relatively compact way.
msg is a python dictionary. if there is a field longer than maximum_field_length,
truncate.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.Message.fromFileData">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fromFileData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">o</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lstat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia.html#Message.fromFileData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.Message.fromFileData" title="Link to this definition"></a></dt>
<dd><p>create a message based on a given file, calculating the checksum.
returns a well-formed message, or none.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.Message.fromFileInfo">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fromFileInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">o</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lstat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia.html#Message.fromFileInfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.Message.fromFileInfo" title="Link to this definition"></a></dt>
<dd><p>based on the fiven information about the file (it’s name and a stat record if available)
and a configuration options object (sarracenia.config.Config)
return an sarracenia.Message suitable for placement on a worklist.</p>
<p>A message is a specialized python dictionary with a certain set of fields in it.
The message returned will have the necessary fields for processing and posting.</p>
<p>The message is built for a file is based on the given path, options (o), and lstat (output of os.stat)</p>
<p>The lstat record is used to build ‘atime’, ‘mtime’ and ‘mode’ fields if
timeCopy and permCopy options are set.</p>
<p>if no lstat record is supplied, then those fields will not be set.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.Message.fromStream">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fromStream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">o</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia.html#Message.fromStream"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.Message.fromStream" title="Link to this definition"></a></dt>
<dd><p>Create a file and message for the given path.
The file will be created or overwritten with the provided data.
then invoke fromFileData() for the resulting file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.Message.getContent">
<span class="sig-name descname"><span class="pre">getContent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia.html#Message.getContent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.Message.getContent" title="Link to this definition"></a></dt>
<dd><p>Retrieve the data referred to by a message.  The data may be embedded
in the messate, or this routine may resolve a link to an external server
and download the data.</p>
<p>does not handle authentication.
This routine is meant to be used with small files. using it to download
large files may be very inefficient. Untested in that use-case.</p>
<p>Return value is the data.</p>
<p>often on server where one is publishing data, the file is available as
a local file, and one can avoid the network usage by using a options.baseDir setting.
this behaviour can be disabled by not providing the options or not setting baseDir.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.Message.getIDStr">
<span class="sig-name descname"><span class="pre">getIDStr</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/sarracenia.html#Message.getIDStr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.Message.getIDStr" title="Link to this definition"></a></dt>
<dd><p>return some descriptive tag string to identify the message being processed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.Message.new_pathWrite">
<span class="sig-name descname"><span class="pre">new_pathWrite</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia.html#Message.new_pathWrite"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.Message.new_pathWrite" title="Link to this definition"></a></dt>
<dd><p>expects: msg[‘new_dir’] and msg[‘new_file’] to be set.
given the byte stream of data.</p>
<p>write the local file based on the given message, options and data.
update the message to match same (recalculating checksum.)</p>
<p>in future:
If the data field is a file, then that is taken as an open file object
which can be read sequentially, and the bytes write to the path indicated
by other message fields.</p>
<p>currently, if data is a buffer, then it’s contents is written to the file.</p>
<p>if data is None, then look for the ‘content’ header in the message.
and use the data from that.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.Message.setReport">
<span class="sig-name descname"><span class="pre">setReport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia.html#Message.setReport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.Message.setReport" title="Link to this definition"></a></dt>
<dd><p>FIXME: used to be msg_set_report
set message fields to indicate result of action so reports can be generated.</p>
<p>set is supposed to indicate final message dispositions, so in the case
of putting a message on worklist.failed… no report is generated, since
it will be retried later.  FIXME: should we publish an interim failure report?</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.Message.updatePaths">
<span class="sig-name descname"><span class="pre">updatePaths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia.html#Message.updatePaths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.Message.updatePaths" title="Link to this definition"></a></dt>
<dd><p>set the new_* fields in the message based on changed file placement.
if new_* options are ommitted updaste the rest of the fields in
the message based on their current values.</p>
<p>If you change file placement in a flow callback, for example.
One would change new_dir and new_file in the message.
This routines updates other fields in the message (e.g. relPath,
baseUrl, topic ) to match new_dir/new_file.</p>
<p>msg[‘post_baseUrl’] defaults to msg[‘baseUrl’]</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.Message.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia.html#Message.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.Message.validate" title="Link to this definition"></a></dt>
<dd><p>FIXME: used to be msg_validate
return True if message format seems ok, return True, else return False, log some reasons.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.Sarracenia">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.</span></span><span class="sig-name descname"><span class="pre">Sarracenia</span></span><a class="reference internal" href="../_modules/sarracenia.html#Sarracenia"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.Sarracenia" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Core utilities of Sarracenia. The main class here is sarracenia.Message.
a Sarracenia.Message is subclassed from a dict, so for most uses, it works like the
python built-in, but also we have a few major entry points some factoryies:</p>
<p><strong>Building a message from a file</strong></p>
<p>m = sarracenia.Message.fromFileData( path, options, lstat )</p>
<p>builds a notification message from a given existing file, consulting <em>options</em>, a parsed
in memory version of the configuration settings that are applicable</p>
<p><strong>Options</strong></p>
<p>see the sarracenia.config.Config class for functions to parse configuration files
and create corresponding python option dictionaries. One can supply small
dictionaries for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">options</span><span class="p">[</span><span class="s1">&#39;topicPrefix&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;v02&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span> <span class="p">]</span>
<span class="n">options</span><span class="p">[</span><span class="s1">&#39;bindings&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="s1">&#39;xpublic&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="s1">&#39;v02&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">]</span> <span class="p">,</span> <span class="p">[</span> <span class="s1">&#39;#&#39;</span> <span class="p">]</span> <span class="p">)]</span>
<span class="n">options</span><span class="p">[</span><span class="s1">&#39;queueName&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;q_anonymous_&#39;</span> <span class="o">+</span> <span class="n">socket</span><span class="o">.</span><span class="n">getfqdn</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;_SomethingHelpfulToYou&#39;</span>
</pre></div>
</div>
<p>Above is an example of a minimal options dictionary taken from the tutorial
example called moth_api_consumer.py. often</p>
<p><strong>If you don’t have a file</strong></p>
<p>If you don’t have a local file, then build your notification message with:</p>
<p>m = sarracenia.Message.fromFileInfo( path, options, lstat )</p>
<p>where you can make up the lstat values to fill in some fields in the message.
You can make a fake lstat structure to provide these values using sarracenia.filemetadata
class which is either an alias for paramiko.SFTPAttributes
( <a class="reference external" href="https://docs.paramiko.org/en/latest/api/sftp.html#paramiko.sftp_attr.SFTPAttributes">https://docs.paramiko.org/en/latest/api/sftp.html#paramiko.sftp_attr.SFTPAttributes</a> )
if paramiko is installed, or a simple emulation if not.</p>
<p>from  sarracenia.filemetadata import FmdStat</p>
<p>lstat = FmdStat()
lstat.st_mtime= utcinteger second count in UTC (numeric version of a Sarracenia timestamp.)
lstat.st_atime=
lstat.st_mode=0o644
lstat.st_size= size_in_bytes</p>
<p>optional fields that may be of interest:
lstat.filename= “nameOfTheFile”
lstat.longname= ‘lrwxrwxrwx    1 peter    peter          20 Oct 11 20:28 nameOfTheFile’</p>
<p>that you can then provide as an <em>lstat</em> argument to the above <em>fromFileInfo()</em>
call. However the notification message returned will lack an identity checksum field.
once you get the file, you can add the Identity field with:</p>
<p>m.computeIdentity(path, o):</p>
<p>In terms of consuming notification messages, the fields in the dictionary provide metadata
for the announced resource. The anounced data could be embedded in the notification message itself,
or available by a URL.</p>
<p>Messages are generally gathered from a source such as the Message Queueing Protocol wrapper
class: moth… sarracenia.moth.</p>
<p>data = m.getContent()</p>
<p>will return the content of the announced resource as raw data.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="sarracenia.Sarracenia.__weakref__">
<span class="sig-name descname"><span class="pre">__weakref__</span></span><a class="headerlink" href="#sarracenia.Sarracenia.__weakref__" title="Link to this definition"></a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.TimeConversions">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.</span></span><span class="sig-name descname"><span class="pre">TimeConversions</span></span><a class="reference internal" href="../_modules/sarracenia.html#TimeConversions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.TimeConversions" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Time conversion routines.</p>
<ul class="simple">
<li><p>os.stat, and time.now() return floating point</p></li>
<li><p>The floating point representation is a count of seconds since the beginning of the epoch.</p></li>
<li><p>beginning of epoch is platform dependent, and conversion to actual date is fraught (leap seconds, etc…)</p></li>
<li><p>Entire SR_* formats are text, no floats are sent over the protocol
(avoids byte order issues, null byte / encoding issues, and enhances readability.)</p></li>
<li><p>str format: YYYYMMDDHHMMSS.msec goal of this representation is that a naive
conversion to floats yields comparable numbers.</p></li>
<li><p>but the number that results is not useful for anything else, so need these
special routines to get a proper epochal time.</p></li>
<li><p>also OK for year 2032 or whatever (rollover of time_t on 32 bits.)</p></li>
<li><p>string representation is forced to UTC timezone to avoid having to communicate timezone.</p></li>
</ul>
<p>timestr2flt() - accepts a string and returns a float.</p>
<p>caveat</p>
<p>FIXME: this encoding will break in the year 10000 (assumes four digit year)
and requires leading zeroes prior to 1000. One will have to add detection of
the decimal point, and change the offsets at that point.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="sarracenia.TimeConversions.__weakref__">
<span class="sig-name descname"><span class="pre">__weakref__</span></span><a class="headerlink" href="#sarracenia.TimeConversions.__weakref__" title="Link to this definition"></a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.durationToSeconds">
<span class="sig-prename descclassname"><span class="pre">sarracenia.</span></span><span class="sig-name descname"><span class="pre">durationToSeconds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="../_modules/sarracenia.html#durationToSeconds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.durationToSeconds" title="Link to this definition"></a></dt>
<dd><p>this function converts duration to seconds.
str_value should be a number followed by a unit [s,m,h,d,w] ex. 1w, 4d, 12h
return 0.0 for invalid string.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.durationToString">
<span class="sig-prename descclassname"><span class="pre">sarracenia.</span></span><span class="sig-name descname"><span class="pre">durationToString</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/sarracenia.html#durationToString"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.durationToString" title="Link to this definition"></a></dt>
<dd><p>given a numbner of seconds, return a short, human readable string.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.stat">
<span class="sig-prename descclassname"><span class="pre">sarracenia.</span></span><span class="sig-name descname"><span class="pre">stat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">SFTPAttributes</span></span></span><a class="reference internal" href="../_modules/sarracenia.html#stat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.stat" title="Link to this definition"></a></dt>
<dd><p>os.stat call replacement which improves on it by returning
and SFTPAttributes structure, in place of the OS stat one,
featuring:</p>
<ul class="simple">
<li><p>mtime and ctime with subsecond accuracy</p></li>
<li><p>fields that can be overridden (not immutable.)</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.timeflt2str">
<span class="sig-prename descclassname"><span class="pre">sarracenia.</span></span><span class="sig-name descname"><span class="pre">timeflt2str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia.html#timeflt2str"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.timeflt2str" title="Link to this definition"></a></dt>
<dd><p>timeflt2str - accepts a float and returns a string.</p>
<p>flow is a floating point number such as returned by time.now()
(number of seconds since beginning of epoch.)</p>
<p>the str is YYYYMMDDTHHMMSS.sssss</p>
<p>20210921T011331.0123</p>
<p>translates to: Sept. 21st, 2021 at 01:13 and 31.0123 seconds.
always UTC timezone.</p>
</dd></dl>

</section>
<section id="module-sarracenia.config">
<span id="sarracenia-config"></span><h2><a class="toc-backref" href="#id4" role="doc-backlink">sarracenia.config</a><a class="headerlink" href="#module-sarracenia.config" title="Link to this heading"></a></h2>
<p>Second version configuration parser</p>
<p>FIXME: pas 2023/02/05…  missing options from v2: max_queue_size, outlet, pipe</p>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.config.Config">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.config.</span></span><span class="sig-name descname"><span class="pre">Config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The option parser to produce a single configuration.</p>
<p>it can be instantiated with one of:</p>
<ul class="simple">
<li><p>one_config(component, config, action, isPost=False, hostdir=None) – read the options  for
a given component an configuration,  (all in one call.)</p></li>
</ul>
<p>On the other hand, a configu can be built up from the following constructors:</p>
<ul class="simple">
<li><p>default_config() – returns an empty configuration, given a config file tree.</p></li>
<li><p>no_file_config() – returns an empty config without any config file tree.</p></li>
</ul>
<p>Then just add settings manually:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cfg</span> <span class="o">=</span> <span class="n">no_file_config</span><span class="p">()</span>

<span class="n">cfg</span><span class="o">.</span><span class="n">broker</span> <span class="o">=</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">credentials</span><span class="o">.</span><span class="n">Credential</span><span class="p">(</span><span class="s1">&#39;amqps://anonymous:anonymous@hpfx.collab.science.gc.ca&#39;</span><span class="p">)</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">topicPrefix</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;v02&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">]</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="s1">&#39;subscribe&#39;</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="s1">&#39;flow_demo&#39;</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;start&#39;</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">bindings</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="s1">&#39;xpublic&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;v02&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;WXO-DD&#39;</span><span class="p">,</span> <span class="s1">&#39;observations&#39;</span><span class="p">,</span> <span class="s1">&#39;swob-ml&#39;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span> <span class="p">])</span> <span class="p">]</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">queueName</span><span class="o">=</span><span class="s1">&#39;q_anonymous.subscriber_test2&#39;</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">download</span><span class="o">=</span><span class="kc">True</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">batch</span><span class="o">=</span><span class="mi">1</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">messageCountMax</span><span class="o">=</span><span class="mi">5</span>

<span class="c1"># set the instance number for the flow class.</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">no</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
<p># and at the end call finalize</p>
<p>cfg.finalize()</p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config.__deepcopy__">
<span class="sig-name descname"><span class="pre">__deepcopy__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">memo</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Configuration</span></span></span><a class="reference internal" href="../_modules/sarracenia/config.html#Config.__deepcopy__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config.__deepcopy__" title="Link to this definition"></a></dt>
<dd><p>code for this from here: <a class="reference external" href="https://stackoverflow.com/questions/1500718/how-to-override-the-copy-deepcopy-operations-for-a-python-object">https://stackoverflow.com/questions/1500718/how-to-override-the-copy-deepcopy-operations-for-a-python-object</a>
Needed for python &lt; 3.7ish? (ubuntu 18) found this bug: <a class="reference external" href="https://bugs.python.org/issue10076">https://bugs.python.org/issue10076</a>
deepcopy fails for objects with re’s in them?
ok on ubuntu 20.04</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sarracenia.config.Config" title="sarracenia.config.Config"><span class="pre">Config</span></a></span></span><a class="reference internal" href="../_modules/sarracenia/config.html#Config.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config.__init__" title="Link to this definition"></a></dt>
<dd><p>instantiate an empty Configuration</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sarracenia.config.Config.__weakref__">
<span class="sig-name descname"><span class="pre">__weakref__</span></span><a class="headerlink" href="#sarracenia.config.Config.__weakref__" title="Link to this definition"></a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config._build_mask">
<span class="sig-name descname"><span class="pre">_build_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arguments</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config._build_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config._build_mask" title="Link to this definition"></a></dt>
<dd><p>return new entry to be appended to list of masks</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config._parse_binding">
<span class="sig-name descname"><span class="pre">_parse_binding</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subtopic_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config._parse_binding"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config._parse_binding" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>FIXME: see original parse, with substitions for url encoding.</dt><dd><p>also should sqwawk about error if no exchange or topicPrefix defined.
also None to reset to empty, not done.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config._parse_set_string">
<span class="sig-name descname"><span class="pre">_parse_set_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">old_value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">set</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">set</span></span></span><a class="reference internal" href="../_modules/sarracenia/config.html#Config._parse_set_string"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config._parse_set_string" title="Link to this definition"></a></dt>
<dd><p>given a set string, return a python set.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config._parse_setting">
<span class="sig-name descname"><span class="pre">_parse_setting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">opt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config._parse_setting"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config._parse_setting" title="Link to this definition"></a></dt>
<dd><p>v3 plugin accept options for specific modules.</p>
<p>parsed from:
set sarracenia.flowcb.log.filter.Log.level debug</p>
<p>example:
opt= sarracenia.flowcb.log.filter.Log.level  value = debug</p>
<p>results in:
self.settings[ sarracenia.flowcb.log.filter.Log ][level] = debug</p>
<p>options should be fed to plugin class on instantiation.
stripped of class…
* options = { ‘level’ : ‘debug’ }</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config._parse_v2plugin">
<span class="sig-name descname"><span class="pre">_parse_v2plugin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entryPoint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config._parse_v2plugin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config._parse_v2plugin" title="Link to this definition"></a></dt>
<dd><p>config file parsing for a v2 plugin.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config._resolve_exchange">
<span class="sig-name descname"><span class="pre">_resolve_exchange</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config._resolve_exchange"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config._resolve_exchange" title="Link to this definition"></a></dt>
<dd><p>based on the given configuration, fill in with defaults or guesses.
sets self.exchange.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config._sundew_basename_parts">
<span class="sig-name descname"><span class="pre">_sundew_basename_parts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config._sundew_basename_parts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config._sundew_basename_parts" title="Link to this definition"></a></dt>
<dd><p>modified from metpx SenderFTP</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config._varsub">
<span class="sig-name descname"><span class="pre">_varsub</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">word</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config._varsub"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config._varsub" title="Link to this definition"></a></dt>
<dd><p>substitute variable values from options</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.config.Config.addBinding">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">addBinding</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option_strings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">const</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">choices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metavar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config.addBinding"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config.addBinding" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Action</span></code></p>
<p>called by argparse to deal with queue bindings.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config.addBinding.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">namespace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">option_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config.addBinding.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config.addBinding.__call__" title="Link to this definition"></a></dt>
<dd><p>Call self as a function.</p>
</dd></dl>

</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config.add_option">
<span class="sig-name descname"><span class="pre">add_option</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'list'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config.add_option"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config.add_option" title="Link to this definition"></a></dt>
<dd><p>options can be declared in any plugin. There are various <em>kind</em> of options, where the declared type modifies the parsing.</p>
<ul class="simple">
<li><p>‘count’      integer count type.</p></li>
<li><p>‘octal’      base-8 (octal) integer type.</p></li>
<li><dl class="simple">
<dt>‘duration’   a floating point number indicating a quantity of seconds (0.001 is 1 milisecond)</dt><dd><p>modified by a unit suffix ( m-minute, h-hour, w-week )</p>
</dd>
</dl>
</li>
<li><p>‘flag’       boolean (True/False) option.</p></li>
<li><p>‘float’      a simple floating point number.</p></li>
<li><dl class="simple">
<dt>‘list’       a list of string values, each succeeding occurrence catenates to the total.</dt><dd><p>all v2 plugin options are declared of type list.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>‘set’        a set of string values, each succeeding occurrence is unioned to the total.</dt><dd><p>if all_values is provided, then constrain set to that.</p>
</dd>
</dl>
</li>
<li><p>‘size’       integer size. Suffixes k, m, and g for kilo, mega, and giga (base 2) multipliers.</p></li>
<li><dl class="simple">
<dt>‘str’        an arbitrary string value, as will all of the above types, each</dt><dd><p>succeeding occurrence overrides the previous one.</p>
</dd>
</dl>
</li>
</ul>
<p>If a value is set to None, that could mean that it has not been set.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config.applyComponentDefaults">
<span class="sig-name descname"><span class="pre">applyComponentDefaults</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">component</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config.applyComponentDefaults"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config.applyComponentDefaults" title="Link to this definition"></a></dt>
<dd><p>overlay defaults options for the given component to the given configuration.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config.dictify">
<span class="sig-name descname"><span class="pre">dictify</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config.dictify"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config.dictify" title="Link to this definition"></a></dt>
<dd><p>return a dict version of the cfg…</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config.dump">
<span class="sig-name descname"><span class="pre">dump</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config.dump"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config.dump" title="Link to this definition"></a></dt>
<dd><p>print out what the configuration looks like.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config.finalize">
<span class="sig-name descname"><span class="pre">finalize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">component</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config.finalize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config.finalize" title="Link to this definition"></a></dt>
<dd><p>Before final use, take the existing settings, and infer any missing needed defaults from what is provided.
Should be called prior to using a configuration.</p>
<p>There are default options that apply only if they are not overridden…</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config.hohoo_validate_urlstr">
<span class="sig-name descname"><span class="pre">hohoo_validate_urlstr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">urlstr</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span></span></span><a class="reference internal" href="../_modules/sarracenia/config.html#Config.hohoo_validate_urlstr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config.hohoo_validate_urlstr" title="Link to this definition"></a></dt>
<dd><p>returns a tuple ( bool, expanded_url )
the bool is whether the expansion worked, and the expanded_url is one with
the added necessary authentication details from sarracenia.Credentials.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config.mask_ppstr">
<span class="sig-name descname"><span class="pre">mask_ppstr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config.mask_ppstr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config.mask_ppstr" title="Link to this definition"></a></dt>
<dd><p>return a pretty print string version of the given mask, easier for humans to read.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config.merge">
<span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oth</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config.merge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config.merge" title="Link to this definition"></a></dt>
<dd><p>merge to lists of options.</p>
<p>merge two lists of options if one is cumulative then merge,
otherwise if not None, then take value from oth</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config.override">
<span class="sig-name descname"><span class="pre">override</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oth</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config.override"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config.override" title="Link to this definition"></a></dt>
<dd><p>override a value in a set of options.</p>
<p>why override() method and not just assign values to the dictionary?
in the configuration file, there are various ways to have variable substituion.
override invokes those, so that they are properly interpreted.  Otherwise,
you just end up with a literal value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config.parse_args">
<span class="sig-name descname"><span class="pre">parse_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">isPost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config.parse_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config.parse_args" title="Link to this definition"></a></dt>
<dd><dl>
<dt>user information:</dt><dd><p>accept a configuration, apply argParse library to augment the given configuration
with command line settings.</p>
<p>the post component has a different calling convention than others, so use that flag
if called from post.</p>
</dd>
<dt>development notes:</dt><dd><p>Use argparse.parser to modify defaults.
FIXME, many FIXME notes below. this is a currently unusable placeholder.
have not figured this out yet. many issues.</p>
<p>FIXME #1:
parseArgs often sets the value of the variable, regardless of it’s presence (normally a good thing.)
( if you have ‘store_true’ then default needed, for broker, just a string, it ignores if not present.)
This has the effect of overriding settings in the file parsed before the arguments.
Therefore: often supply defaults… but… sigh…</p>
<p>but there is another consideration stopping me from supplying defaults, wish I remembered what it was.
I think it is:
FIXME #2:
arguments are parsed twice: once to get basic stuff (loglevel, component, action)
and if the parsing fails there, the usage will print the wrong defaults…</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config.parse_file">
<span class="sig-name descname"><span class="pre">parse_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config.parse_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config.parse_file" title="Link to this definition"></a></dt>
<dd><p>add settings from a given config file to self</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config.sundew_dirPattern">
<span class="sig-name descname"><span class="pre">sundew_dirPattern</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">urlstr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destDir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#Config.sundew_dirPattern"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config.sundew_dirPattern" title="Link to this definition"></a></dt>
<dd><p>does substitutions for patterns in directories.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.Config.variableExpansion">
<span class="sig-name descname"><span class="pre">variableExpansion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/sarracenia/config.html#Config.variableExpansion"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.Config.variableExpansion" title="Link to this definition"></a></dt>
<dd><blockquote>
<div><p>replace substitution patterns, variable substitutions as described in
<a class="reference external" href="https://metpx.github.io/sarracenia/Reference/sr3_options.7.html#variables">https://metpx.github.io/sarracenia/Reference/sr3_options.7.html#variables</a></p>
<p>returns:  the given string with the substiturions done.</p>
<dl class="simple">
<dt>examples:   ${YYYYMMDD-70m} becomes 20221107 assuming that was the current date 70 minutes ago.</dt><dd><p>environment variables, and built-in settings are replaced also.</p>
</dd>
</dl>
</div></blockquote>
<p>timeoffset -70m</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.config.config_path">
<span class="sig-prename descclassname"><span class="pre">sarracenia.config.</span></span><span class="sig-name descname"><span class="pre">config_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mandatory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ctype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'conf'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#config_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.config_path" title="Link to this definition"></a></dt>
<dd><p>Given a subdir/config look for file in configish places.</p>
<p>return Tuple:   Found (True/False), path_of_file_found|config_that_was_not_found</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.config.get_log_filename">
<span class="sig-prename descclassname"><span class="pre">sarracenia.config.</span></span><span class="sig-name descname"><span class="pre">get_log_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hostdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#get_log_filename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.get_log_filename" title="Link to this definition"></a></dt>
<dd><p>return the name of a single logfile for a single instance.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.config.get_metrics_filename">
<span class="sig-prename descclassname"><span class="pre">sarracenia.config.</span></span><span class="sig-name descname"><span class="pre">get_metrics_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hostdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#get_metrics_filename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.get_metrics_filename" title="Link to this definition"></a></dt>
<dd><p>return the name of a single logfile for a single instance.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.config.get_pid_filename">
<span class="sig-prename descclassname"><span class="pre">sarracenia.config.</span></span><span class="sig-name descname"><span class="pre">get_pid_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hostdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#get_pid_filename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.get_pid_filename" title="Link to this definition"></a></dt>
<dd><p>return the file name for the pid file for the specified instance.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.config.get_user_cache_dir">
<span class="sig-prename descclassname"><span class="pre">sarracenia.config.</span></span><span class="sig-name descname"><span class="pre">get_user_cache_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hostdir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#get_user_cache_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.get_user_cache_dir" title="Link to this definition"></a></dt>
<dd><p>hostdir = None if statehost is false,</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="sarracenia.config.logger">
<span class="sig-prename descclassname"><span class="pre">sarracenia.config.</span></span><span class="sig-name descname"><span class="pre">logger</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;Logger</span> <span class="pre">sarracenia.config</span> <span class="pre">(WARNING)&gt;</span></em><a class="headerlink" href="#sarracenia.config.logger" title="Link to this definition"></a></dt>
<dd><p>respect appdir stuff using an environment variable.
for not just hard coded as a class variable appdir_stuff</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>FIXME</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.config.no_file_config">
<span class="sig-prename descclassname"><span class="pre">sarracenia.config.</span></span><span class="sig-name descname"><span class="pre">no_file_config</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#no_file_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.no_file_config" title="Link to this definition"></a></dt>
<dd><p>initialize a config that will not use Sarracenia configuration files at all.
meant for use by people writing independent programs to start up instances
with python API calls.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.config.octal_number">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.config.</span></span><span class="sig-name descname"><span class="pre">octal_number</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#octal_number"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.octal_number" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.octal_number.__new__">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">__new__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#octal_number.__new__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.octal_number.__new__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.octal_number.__repr__">
<span class="sig-name descname"><span class="pre">__repr__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/sarracenia/config.html#octal_number.__repr__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.octal_number.__repr__" title="Link to this definition"></a></dt>
<dd><p>Return repr(self).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.config.octal_number.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/sarracenia/config.html#octal_number.__str__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.octal_number.__str__" title="Link to this definition"></a></dt>
<dd><p>Return str(self).</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.config.one_config">
<span class="sig-prename descclassname"><span class="pre">sarracenia.config.</span></span><span class="sig-name descname"><span class="pre">one_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">component</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isPost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hostDir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#one_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.one_config" title="Link to this definition"></a></dt>
<dd><p>single call return a fully parsed single configuration for a single component to run.</p>
<p>read in admin.conf and default.conf</p>
<p>apply component default overrides ( maps to: component/check ?)
read in component/config.conf
parse arguments from command line.
return config instance item.</p>
<p>appdir_stuff can be to override file locations for testing during development.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.config.parse_count">
<span class="sig-prename descclassname"><span class="pre">sarracenia.config.</span></span><span class="sig-name descname"><span class="pre">parse_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cstr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#parse_count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.parse_count" title="Link to this definition"></a></dt>
<dd><p>number argument accepts k,m,g suffix with i and b to use base 2 ) and +-
return value is integer.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.config.parse_float">
<span class="sig-prename descclassname"><span class="pre">sarracenia.config.</span></span><span class="sig-name descname"><span class="pre">parse_float</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cstr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/config.html#parse_float"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.config.parse_float" title="Link to this definition"></a></dt>
<dd><p>like parse_count, numeric argument accepts k,m,g suffix and +-.
below 1000, return a decimal number with 3 digits max.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="sarracenia.config.str_options">
<span class="sig-prename descclassname"><span class="pre">sarracenia.config.</span></span><span class="sig-name descname"><span class="pre">str_options</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['accelCpCommand',</span> <span class="pre">'accelWgetCommand',</span> <span class="pre">'accelScpCommand',</span> <span class="pre">'action',</span> <span class="pre">'admin',</span> <span class="pre">'baseDir',</span> <span class="pre">'broker',</span> <span class="pre">'cluster',</span> <span class="pre">'directory',</span> <span class="pre">'exchange',</span> <span class="pre">'exchangeSuffix',</span> <span class="pre">'feeder',</span> <span class="pre">'filename',</span> <span class="pre">'flatten',</span> <span class="pre">'flowMain',</span> <span class="pre">'header',</span> <span class="pre">'hostname',</span> <span class="pre">'identity',</span> <span class="pre">'inlineEncoding',</span> <span class="pre">'logFormat',</span> <span class="pre">'logLevel',</span> <span class="pre">'pollUrl',</span> <span class="pre">'post_baseUrl',</span> <span class="pre">'post_baseDir',</span> <span class="pre">'post_broker',</span> <span class="pre">'post_exchange',</span> <span class="pre">'post_exchangeSuffix',</span> <span class="pre">'post_format',</span> <span class="pre">'post_topic',</span> <span class="pre">'queueName',</span> <span class="pre">'queueShare',</span> <span class="pre">'sendTo',</span> <span class="pre">'rename',</span> <span class="pre">'report_exchange',</span> <span class="pre">'source',</span> <span class="pre">'strip',</span> <span class="pre">'timezone',</span> <span class="pre">'nodupe_ttl',</span> <span class="pre">'nodupe_driver',</span> <span class="pre">'nodupe_basis',</span> <span class="pre">'tlsRigour',</span> <span class="pre">'topic']</span></em><a class="headerlink" href="#sarracenia.config.str_options" title="Link to this definition"></a></dt>
<dd><p>for backward compatibility,</p>
<p>convert some old plugins that are hard to get working with
v2wrapper, into v3 plugin.</p>
<p>the fdelay ones makes in depth use of sr_replay function, and
that has changed in v3 too much.</p>
<p>accelerators and rate limiting are now built-in, no plugin required.</p>
</dd></dl>

</section>
<section id="sarracenia-credentials">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">sarracenia.credentials</a><a class="headerlink" href="#sarracenia-credentials" title="Link to this heading"></a></h2>
</section>
<section id="module-sarracenia.diskqueue">
<span id="sarracenia-diskqueue"></span><h2><a class="toc-backref" href="#id6" role="doc-backlink">sarracenia.diskqueue</a><a class="headerlink" href="#module-sarracenia.diskqueue" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.diskqueue.DiskQueue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.diskqueue.</span></span><span class="sig-name descname"><span class="pre">DiskQueue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/diskqueue.html#DiskQueue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.diskqueue.DiskQueue" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Process Persistent Queue…</p>
<p>Persist messages to a file so that processing can be attempted again later.
For safety reasons, want to be writing to a file ASAP.
For performance reasons, all those writes need to be Appends.</p>
<p>so continuous, but append-only io… with an occasional housekeeping cycle.
to resolve them</p>
<p>not clear if we need multi-task safety… just one task writes to each queue.</p>
<p>retry_ttl how long</p>
<p>self.retry_cache</p>
<ul class="simple">
<li><p>a dictionary indexed by some sort of key to prevent duplicate messages being stored in it.</p></li>
</ul>
<p>retry_path = ~/.cache/sr3/&lt;component&gt;/&lt;config&gt;/diskqueue_&lt;name&gt;</p>
<p>with various suffixes:</p>
<p>.new – messages added to the retry list are appended to this file.</p>
<p>whenever a message is added to the retry_cache, it is appended to a
cumulative list of entries to add to the retry list.</p>
<p>every housekeeping interval, the two files are consolidated.</p>
<p>note that the <em>ack_id</em> of messages retreived from the retry list, is
removed. Files must be acked around the time they are placed on the
retry_list, as reception from the source should have already been acknowledged.</p>
<dl>
<dt>FIXME:  would be fun to look at performance of this thing and compare it to</dt><dd><p>python persistent queue.  the differences:</p>
<p>This class does no locking (presumed single threading.)
could add locks… and they would be coarser grained than stuff in persistentqueue
this should be faster than persistent queue, but who knows what magic they did.
This class doesn’t implement in-memory queue… it is entirely on disk…
saves memory, optimal for large queues.
probably good, since retries should be slow…</p>
<p>not sure what will run better.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.diskqueue.DiskQueue.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/diskqueue.html#DiskQueue.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.diskqueue.DiskQueue.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.diskqueue.DiskQueue.__len__">
<span class="sig-name descname"><span class="pre">__len__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="../_modules/sarracenia/diskqueue.html#DiskQueue.__len__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.diskqueue.DiskQueue.__len__" title="Link to this definition"></a></dt>
<dd><p>Returns the total number of messages in the DiskQueue.</p>
<p>Number of messages in the DiskQueue does not necessarily equal the number of messages available to <code class="docutils literal notranslate"><span class="pre">get</span></code>.
Messages in the .new file are counted, but can’t be retrieved until
<a class="reference internal" href="#sarracenia.diskqueue.DiskQueue.on_housekeeping" title="sarracenia.diskqueue.DiskQueue.on_housekeeping"><code class="xref py py-func docutils literal notranslate"><span class="pre">on_housekeeping()</span></code></a> has been run.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>number of messages in the DiskQueue.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sarracenia.diskqueue.DiskQueue.__weakref__">
<span class="sig-name descname"><span class="pre">__weakref__</span></span><a class="headerlink" href="#sarracenia.diskqueue.DiskQueue.__weakref__" title="Link to this definition"></a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.diskqueue.DiskQueue._count_msgs">
<span class="sig-name descname"><span class="pre">_count_msgs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="../_modules/sarracenia/diskqueue.html#DiskQueue._count_msgs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.diskqueue.DiskQueue._count_msgs" title="Link to this definition"></a></dt>
<dd><p>Count the number of messages (lines) in the queue file. This should be used only when opening an existing
file, because <a class="reference internal" href="#sarracenia.diskqueue.DiskQueue.get" title="sarracenia.diskqueue.DiskQueue.get"><code class="xref py py-func docutils literal notranslate"><span class="pre">get()</span></code></a> does not remove messages from the file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file_path</strong> (<em>str</em>) – path to the file to be counted.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>count of messages in file, -1 if the file could not be read.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.diskqueue.DiskQueue.cleanup">
<span class="sig-name descname"><span class="pre">cleanup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/diskqueue.html#DiskQueue.cleanup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.diskqueue.DiskQueue.cleanup" title="Link to this definition"></a></dt>
<dd><p>remove statefiles.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.diskqueue.DiskQueue.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/diskqueue.html#DiskQueue.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.diskqueue.DiskQueue.close" title="Link to this definition"></a></dt>
<dd><p>clean shutdown.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.diskqueue.DiskQueue.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maximum_messages_to_get</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/diskqueue.html#DiskQueue.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.diskqueue.DiskQueue.get" title="Link to this definition"></a></dt>
<dd><p>qty number of messages to retrieve from the queue.</p>
<p>no housekeeping in get …
if no message (and new or state file there)
we wait for housekeeping to present retry messages</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.diskqueue.DiskQueue.in_cache">
<span class="sig-name descname"><span class="pre">in_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/sarracenia/diskqueue.html#DiskQueue.in_cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.diskqueue.DiskQueue.in_cache" title="Link to this definition"></a></dt>
<dd><p>return whether the entry is message is in the cache or not.
side effect: adds it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.diskqueue.DiskQueue.is_expired">
<span class="sig-name descname"><span class="pre">is_expired</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/sarracenia/diskqueue.html#DiskQueue.is_expired"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.diskqueue.DiskQueue.is_expired" title="Link to this definition"></a></dt>
<dd><p>return is the given message expired ?</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.diskqueue.DiskQueue.msg_get_from_file">
<span class="sig-name descname"><span class="pre">msg_get_from_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/diskqueue.html#DiskQueue.msg_get_from_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.diskqueue.DiskQueue.msg_get_from_file" title="Link to this definition"></a></dt>
<dd><p>read a message from the state file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.diskqueue.DiskQueue.needs_requeuing">
<span class="sig-name descname"><span class="pre">needs_requeuing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/sarracenia/diskqueue.html#DiskQueue.needs_requeuing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.diskqueue.DiskQueue.needs_requeuing" title="Link to this definition"></a></dt>
<dd><p>return
* True if message is not expired, and not already in queue.
* False otherwise.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.diskqueue.DiskQueue.on_housekeeping">
<span class="sig-name descname"><span class="pre">on_housekeeping</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/diskqueue.html#DiskQueue.on_housekeeping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.diskqueue.DiskQueue.on_housekeeping" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>read rest of queue_file (from current point of unretried ones.)</dt><dd><ul class="simple">
<li><p>check if message is duplicate or expired.</p></li>
<li><p>write to .hk</p></li>
</ul>
</dd>
<dt>read .new file,</dt><dd><ul class="simple">
<li><p>check if message is duplicate or expired.</p></li>
<li><p>writing to .hk (housekeeping)</p></li>
</ul>
</dd>
</dl>
<p>remove .new
rename housekeeping to queue for next period.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.diskqueue.DiskQueue.put">
<span class="sig-name descname"><span class="pre">put</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/diskqueue.html#DiskQueue.put"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.diskqueue.DiskQueue.put" title="Link to this definition"></a></dt>
<dd><p>add messages to the end of the queue.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.filemetadata">
<span id="sarracenia-filemetadata"></span><h2><a class="toc-backref" href="#id7" role="doc-backlink">sarracenia.filemetadata</a><a class="headerlink" href="#module-sarracenia.filemetadata" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.filemetadata.FileMetadata">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.filemetadata.</span></span><span class="sig-name descname"><span class="pre">FileMetadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/filemetadata.html#FileMetadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.filemetadata.FileMetadata" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class implements storing metadata <em>with</em> a file.</p>
<p>on unlix/linux/mac systems, we use extended attributes,
where we apply a <em>user.sr_</em> prefix to the attribute names to avoid clashes.</p>
<p>on Windows NT, create an “sr_.json” Alternate Data Stream  to store them.</p>
<p>API:</p>
<p>All values are utf-8, hence readable by some subset of humans.
not bytes.  no binary, go away…</p>
<p>x = sr_attr( path )  &lt;- read metadata from file.
x.list()  &lt;- list all extant extended attributes.</p>
<ul class="simple">
<li><p>sample return value: [ ‘sum’, ‘mtime’ ]</p></li>
</ul>
<p>x.get(‘sum’) &lt;- look at one value.</p>
<ul class="simple">
<li><p>returns None if missing.</p></li>
</ul>
<p>x.set(‘sum’, ‘hoho’) &lt;- set one value.</p>
<ul class="simple">
<li><p>fails silently (fall-back gracefully.)</p></li>
</ul>
<p>x.persist() &lt;- write metadata back to file, if necessary.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.filemetadata.FileMetadata.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/filemetadata.html#FileMetadata.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.filemetadata.FileMetadata.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sarracenia.filemetadata.FileMetadata.__weakref__">
<span class="sig-name descname"><span class="pre">__weakref__</span></span><a class="headerlink" href="#sarracenia.filemetadata.FileMetadata.__weakref__" title="Link to this definition"></a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.filemetadata.FileMetadata.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/sarracenia/filemetadata.html#FileMetadata.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.filemetadata.FileMetadata.get" title="Link to this definition"></a></dt>
<dd><p>return the value of the named extended attribute.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.filemetadata.FileMetadata.list">
<span class="sig-name descname"><span class="pre">list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/filemetadata.html#FileMetadata.list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.filemetadata.FileMetadata.list" title="Link to this definition"></a></dt>
<dd><p>return the list of defined extended attributes. (keys to the dict.)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.filemetadata.FileMetadata.persist">
<span class="sig-name descname"><span class="pre">persist</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/filemetadata.html#FileMetadata.persist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.filemetadata.FileMetadata.persist" title="Link to this definition"></a></dt>
<dd><p>write the in-memory extended attributes to disk.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.filemetadata.FileMetadata.set">
<span class="sig-name descname"><span class="pre">set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/filemetadata.html#FileMetadata.set"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.filemetadata.FileMetadata.set" title="Link to this definition"></a></dt>
<dd><p>set the name &amp; value pair to the extended attributes for the file.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.flow">
<span id="sarracenia-flow"></span><h2><a class="toc-backref" href="#id8" role="doc-backlink">sarracenia.flow</a><a class="headerlink" href="#module-sarracenia.flow" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.flow.Flow">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.flow.</span></span><span class="sig-name descname"><span class="pre">Flow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Implement the General Algorithm from the Concepts Guide.</p>
<p>All of the component types (e.g. poll, subscribe, sarra, winnow, shovel ) are implemented
as sub-classes of Flow. The constructor/factory accept a configuration
(sarracenia.config.Config class) with all the settings in it.</p>
<p>This class takes care of starting up, running with callbacks, and clean shutdown.</p>
<p>need to know whether to sleep between passes
o.sleep - an interval (floating point number of seconds)
o.housekeeping -</p>
<p>A flow processes worklists of messages</p>
<p>worklist given to callbacks…</p>
<ul class="simple">
<li><p>worklist.incoming –&gt; new messages to continue processing</p></li>
<li><p>worklist.ok       –&gt; successfully processed</p></li>
<li><p>worklist.rejected –&gt; messages to not be further processed.</p></li>
<li><p>worklist.failed   –&gt; messages for which processing failed.</p></li>
<li><p>worklist.dirrectories_ok –&gt; directories created.</p></li>
</ul>
<p>Initially all messages are placed in incoming.
if a callback decides:</p>
<ul class="simple">
<li><p>a message is not relevant, it is moved to rejected.</p></li>
<li><p>all processing has been done, it moves it to ok.</p></li>
<li><p>an operation failed and it should be retried later, move to retry</p></li>
</ul>
<p>callbacks must not remove messages from all worklists, re-classify them.
it is necessary to put rejected messages in the appropriate worklist
so they can be acknowledged as received.</p>
<p>interesting data structure:
self.plugins  – dict of modular functionality metadata.</p>
<ul class="simple">
<li><p>self.plugins[ “load” ] contains a list of (v3) flow_callbacks to load.</p></li>
<li><p>self.plugins[ entry_point ]  - one for each invocation times of callbacks. examples:
“on_start”, “after_accept”, etc…  contains routines to run at each <em>entry_point</em></p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow.__init__" title="Link to this definition"></a></dt>
<dd><p>The cfg is should be an sarra/config object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sarracenia.flow.Flow.__weakref__">
<span class="sig-name descname"><span class="pre">__weakref__</span></span><a class="headerlink" href="#sarracenia.flow.Flow.__weakref__" title="Link to this definition"></a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow._runCallbackMetrics">
<span class="sig-name descname"><span class="pre">_runCallbackMetrics</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow._runCallbackMetrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow._runCallbackMetrics" title="Link to this definition"></a></dt>
<dd><p>Collect metrics from plugins with a <code class="docutils literal notranslate"><span class="pre">metricsReport</span></code> entry point.</p>
<p>Expects the plugin to return a dictionary containing metrics, which is saved to <code class="docutils literal notranslate"><span class="pre">self.metrics[plugin_name]</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow._runHousekeeping">
<span class="sig-name descname"><span class="pre">_runHousekeeping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">now</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow._runHousekeeping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow._runHousekeeping" title="Link to this definition"></a></dt>
<dd><p>Run housekeeping callbacks
Return the time when housekeeping should be run next</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow.do_download">
<span class="sig-name descname"><span class="pre">do_download</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow.do_download"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow.do_download" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>do download work for self.worklist.incoming, placing files:</dt><dd><p>successfully downloaded in worklist.ok
temporary failures in worklist.failed
permanent failures (or files not to be downloaded) in worklist.rejected</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow.do_send">
<span class="sig-name descname"><span class="pre">do_send</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow.do_send"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow.do_send" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow.download">
<span class="sig-name descname"><span class="pre">download</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow.download"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow.download" title="Link to this definition"></a></dt>
<dd><p>download/transfer one file based on message, return True if successful, otherwise False.</p>
<p>return 0 – failed, retry later.
return 1 – OK download successful.
return -1 – download failed permanently, retry not useful.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow.file_should_be_downloaded">
<span class="sig-name descname"><span class="pre">file_should_be_downloaded</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow.file_should_be_downloaded"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow.file_should_be_downloaded" title="Link to this definition"></a></dt>
<dd><p>determine whether a comparison of local_file and message metadata indicates that it is new enough
that writing the file locally is warranted.</p>
<p>return True to say downloading is warranted.</p>
<blockquote>
<div><p>False if the file in the message represents the same or an older version that what is corrently on disk.</p>
</div></blockquote>
<p>origin: refactor &amp; translation of v2: content_should_not_be downloaded</p>
<dl class="simple">
<dt>Assumptions:</dt><dd><p>new_path exists… there is a file to compare against.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow.has_vip">
<span class="sig-name descname"><span class="pre">has_vip</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow.has_vip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow.has_vip" title="Link to this definition"></a></dt>
<dd><p>return list of vips which are active on the current machine, or an empty list.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow.link1file">
<span class="sig-name descname"><span class="pre">link1file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symbolic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow.link1file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow.link1file" title="Link to this definition"></a></dt>
<dd><p>perform a link of a single file, based on a message, returning boolean success
if it’s Symbolic, then do that. else do a hard link.</p>
<p>imported from v2/subscribe/doit_download “link event, try to link the local product given by message”</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow.mkdir">
<span class="sig-name descname"><span class="pre">mkdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow.mkdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow.mkdir" title="Link to this definition"></a></dt>
<dd><p>perform an mkdir.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow.reject">
<span class="sig-name descname"><span class="pre">reject</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow.reject"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow.reject" title="Link to this definition"></a></dt>
<dd><p>reject a message.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow.removeOneFile">
<span class="sig-name descname"><span class="pre">removeOneFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow.removeOneFile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow.removeOneFile" title="Link to this definition"></a></dt>
<dd><p>process an unlink event, returning boolean success.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow.renameOneItem">
<span class="sig-name descname"><span class="pre">renameOneItem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">old</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow.renameOneItem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow.renameOneItem" title="Link to this definition"></a></dt>
<dd><p>for messages with an rename file operation, it is to rename a file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow.run" title="Link to this definition"></a></dt>
<dd><p>This is the core routine of the algorithm, with most important data driven
loop in it. This implements the General Algorithm (as described in the Concepts Explanation Guide)
check if stop_requested once in a while, but never return otherwise.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow.set_local_file_attributes">
<span class="sig-name descname"><span class="pre">set_local_file_attributes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow.set_local_file_attributes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow.set_local_file_attributes" title="Link to this definition"></a></dt>
<dd><p>after a file has been written, restore permissions and ownership if necessary.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow.stop_request">
<span class="sig-name descname"><span class="pre">stop_request</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow.stop_request"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow.stop_request" title="Link to this definition"></a></dt>
<dd><p>called by the signal handler to tell self and FlowCB classes to stop. Without this,
calling runCallbacksTime(‘please_stop’) from inside self.please_stop causes an infinite loop.
Note: if this is called from outside of a signal handler, the interruptible_sleep function</p>
<blockquote>
<div><p>won’t work.</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow.sundew_getDestInfos">
<span class="sig-name descname"><span class="pre">sundew_getDestInfos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">currentFileOption</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow.sundew_getDestInfos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow.sundew_getDestInfos" title="Link to this definition"></a></dt>
<dd><p>modified from sundew client</p>
<p>WHATFN         – First part (‘:’) of filename
HEADFN         – Use first 2 fields of filename
NONE           – Use the entire filename
TIME or TIME:  – TIME stamp appended
DESTFN=fname   – Change the filename to fname</p>
<p>ex: mask[2] = ‘NONE:TIME’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow.updateFieldsAccepted">
<span class="sig-name descname"><span class="pre">updateFieldsAccepted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">urlstr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maskDir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maskFileOption</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mirror</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_strip_count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pstrip</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flatten</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow.updateFieldsAccepted"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow.updateFieldsAccepted" title="Link to this definition"></a></dt>
<dd><p>Set new message fields according to values when the message is accepted.</p>
<ul class="simple">
<li><p>urlstr: the urlstr being matched (baseUrl+relPath+sundew_extension)</p></li>
<li><p>pattern: the regex that was matched.</p></li>
<li><p>maskDir: the current directory to base the relPath from.</p></li>
<li><p>maskFileOption: filename option value (sundew compatibility options.)</p></li>
<li><p>strip: number of path entries to strip from the left side of the path.</p></li>
<li><p>pstrip: pattern strip regexp to apply instead of a count.</p></li>
<li><p>flatten: a character to replace path separators with toe change a multi-directory
deep file name into a single long file name</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.Flow.write_inline_file">
<span class="sig-name descname"><span class="pre">write_inline_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/sarracenia/flow.html#Flow.write_inline_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.Flow.write_inline_file" title="Link to this definition"></a></dt>
<dd><p>write local file based on a message with inlined content.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.flow.poll">
<span id="sarracenia-flow-poll"></span><h2><a class="toc-backref" href="#id9" role="doc-backlink">sarracenia.flow.poll</a><a class="headerlink" href="#module-sarracenia.flow.poll" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.flow.poll.Poll">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.flow.poll.</span></span><span class="sig-name descname"><span class="pre">Poll</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow/poll.html#Poll"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.poll.Poll" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.flow.Flow" title="sarracenia.flow.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Flow</span></code></a></p>
<p>repeatedly query a remote (non-sarracenia) server to list the files there.
post messages (to post_broker) for every new file discovered there.</p>
<p>the sarracenia.flowcb.poll class is used to implement the remote querying,
and is highly customizable to that effect.</p>
<p>if the vip option is set,
* subscribe to the same settings that are being posted to.
* consume all the messages posted, keeping new file duplicate cache updated.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.poll.Poll.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow/poll.html#Poll.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.poll.Poll.__init__" title="Link to this definition"></a></dt>
<dd><p>The cfg is should be an sarra/config object.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.flow.post">
<span id="sarracenia-flow-post"></span><h2><a class="toc-backref" href="#id10" role="doc-backlink">sarracenia.flow.post</a><a class="headerlink" href="#module-sarracenia.flow.post" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.flow.post.Post">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.flow.post.</span></span><span class="sig-name descname"><span class="pre">Post</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow/post.html#Post"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.post.Post" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.flow.Flow" title="sarracenia.flow.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Flow</span></code></a></p>
<p>post messages about local files.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.post.Post.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow/post.html#Post.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.post.Post.__init__" title="Link to this definition"></a></dt>
<dd><p>The cfg is should be an sarra/config object.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.flow.report">
<span id="sarracenia-flow-report"></span><h2><a class="toc-backref" href="#id11" role="doc-backlink">sarracenia.flow.report</a><a class="headerlink" href="#module-sarracenia.flow.report" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.flow.report.Report">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.flow.report.</span></span><span class="sig-name descname"><span class="pre">Report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow/report.html#Report"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.report.Report" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.flow.Flow" title="sarracenia.flow.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Flow</span></code></a></p>
<p>forward report messages.</p>
<p>Not really implemented at the moment. It is just a shovel synonym for now.
more logic should be added.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.report.Report.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow/report.html#Report.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.report.Report.__init__" title="Link to this definition"></a></dt>
<dd><p>The cfg is should be an sarra/config object.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.flow.sarra">
<span id="sarracenia-flow-sarra"></span><h2><a class="toc-backref" href="#id12" role="doc-backlink">sarracenia.flow.sarra</a><a class="headerlink" href="#module-sarracenia.flow.sarra" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.flow.sarra.Sarra">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.flow.sarra.</span></span><span class="sig-name descname"><span class="pre">Sarra</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow/sarra.html#Sarra"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.sarra.Sarra" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.flow.Flow" title="sarracenia.flow.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Flow</span></code></a></p>
<ul class="simple">
<li><p>download files from a remote server to the local one</p></li>
<li><p>modify the messages so they refer to the downloaded files.</p></li>
<li><p>re-post them to another exchange for the next other subscribers.</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.sarra.Sarra.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow/sarra.html#Sarra.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.sarra.Sarra.__init__" title="Link to this definition"></a></dt>
<dd><p>The cfg is should be an sarra/config object.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.flow.sender">
<span id="sarracenia-flow-sender"></span><h2><a class="toc-backref" href="#id13" role="doc-backlink">sarracenia.flow.sender</a><a class="headerlink" href="#module-sarracenia.flow.sender" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.flow.sender.Sender">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.flow.sender.</span></span><span class="sig-name descname"><span class="pre">Sender</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow/sender.html#Sender"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.sender.Sender" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.flow.Flow" title="sarracenia.flow.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Flow</span></code></a></p>
<ul class="simple">
<li><p>subscribe to a stream of messages about local files.</p></li>
<li><p>send the files to a remote server.</p></li>
<li><p>modify the messages to refer to the remote file copies.</p></li>
<li><p>post the messages for subscribers of the remote server.</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.sender.Sender.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow/sender.html#Sender.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.sender.Sender.__init__" title="Link to this definition"></a></dt>
<dd><p>The cfg is should be an sarra/config object.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.flow.shovel">
<span id="sarracenia-flow-shovel"></span><h2><a class="toc-backref" href="#id14" role="doc-backlink">sarracenia.flow.shovel</a><a class="headerlink" href="#module-sarracenia.flow.shovel" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.flow.shovel.Shovel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.flow.shovel.</span></span><span class="sig-name descname"><span class="pre">Shovel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow/shovel.html#Shovel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.shovel.Shovel" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.flow.Flow" title="sarracenia.flow.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Flow</span></code></a></p>
<ul class="simple">
<li><p>subscribe to some messages.</p></li>
<li><p>post them somewhere else.</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.shovel.Shovel.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow/shovel.html#Shovel.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.shovel.Shovel.__init__" title="Link to this definition"></a></dt>
<dd><p>The cfg is should be an sarra/config object.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.flow.subscribe">
<span id="sarracenia-flow-subscribe"></span><h2><a class="toc-backref" href="#id15" role="doc-backlink">sarracenia.flow.subscribe</a><a class="headerlink" href="#module-sarracenia.flow.subscribe" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.flow.subscribe.Subscribe">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.flow.subscribe.</span></span><span class="sig-name descname"><span class="pre">Subscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow/subscribe.html#Subscribe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.subscribe.Subscribe" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.flow.Flow" title="sarracenia.flow.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Flow</span></code></a></p>
<ul class="simple">
<li><p>subscribe to messages about files.</p></li>
<li><p>download the corresponding files.</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.subscribe.Subscribe.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow/subscribe.html#Subscribe.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.subscribe.Subscribe.__init__" title="Link to this definition"></a></dt>
<dd><p>The cfg is should be an sarra/config object.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.flow.watch">
<span id="sarracenia-flow-watch"></span><h2><a class="toc-backref" href="#id16" role="doc-backlink">sarracenia.flow.watch</a><a class="headerlink" href="#module-sarracenia.flow.watch" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.flow.watch.Watch">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.flow.watch.</span></span><span class="sig-name descname"><span class="pre">Watch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow/watch.html#Watch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.watch.Watch" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.flow.Flow" title="sarracenia.flow.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Flow</span></code></a></p>
<ul class="simple">
<li><p>create messages for files that appear in a directory.</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.watch.Watch.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow/watch.html#Watch.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.watch.Watch.__init__" title="Link to this definition"></a></dt>
<dd><p>The cfg is should be an sarra/config object.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.flow.winnow">
<span id="sarracenia-flow-winnow"></span><h2><a class="toc-backref" href="#id17" role="doc-backlink">sarracenia.flow.winnow</a><a class="headerlink" href="#module-sarracenia.flow.winnow" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.flow.winnow.Winnow">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.flow.winnow.</span></span><span class="sig-name descname"><span class="pre">Winnow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow/winnow.html#Winnow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.winnow.Winnow" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.flow.Flow" title="sarracenia.flow.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Flow</span></code></a></p>
<ul class="simple">
<li><p>subscribe to a stream of messages.</p></li>
<li><p>suppress duplicates,</p></li>
<li><p>post the thinned out stream somewhere else.</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.flow.winnow.Winnow.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/flow/winnow.html#Winnow.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.flow.winnow.Winnow.__init__" title="Link to this definition"></a></dt>
<dd><p>The cfg is should be an sarra/config object.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.instance">
<span id="sarracenia-instance"></span><h2><a class="toc-backref" href="#id18" role="doc-backlink">sarracenia.instance</a><a class="headerlink" href="#module-sarracenia.instance" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.instance.RedirectedTimedRotatingFileHandler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.instance.</span></span><span class="sig-name descname"><span class="pre">RedirectedTimedRotatingFileHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">when</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'h'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backupCount</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">utc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">atTime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/instance.html#RedirectedTimedRotatingFileHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.instance.RedirectedTimedRotatingFileHandler" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TimedRotatingFileHandler</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.instance.RedirectedTimedRotatingFileHandler.doRollover">
<span class="sig-name descname"><span class="pre">doRollover</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/instance.html#RedirectedTimedRotatingFileHandler.doRollover"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.instance.RedirectedTimedRotatingFileHandler.doRollover" title="Link to this definition"></a></dt>
<dd><p>do a rollover; in this case, a date/time stamp is appended to the filename
when the rollover happens.  However, you want the file to be named for the
start of the interval, not the current time.  If there is a backup count,
then we have to get a list of matching filenames, sort them and remove
the one with the oldest suffix.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.instance.instance">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.instance.</span></span><span class="sig-name descname"><span class="pre">instance</span></span><a class="reference internal" href="../_modules/sarracenia/instance.html#instance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.instance.instance" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Process management for a single flow instance.
start and stop instances.</p>
<p>this is the main entry point launched from the sr3 cli, with arguments for it to turn into a specific configuration.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.instance.instance.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/instance.html#instance.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.instance.instance.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sarracenia.instance.instance.__weakref__">
<span class="sig-name descname"><span class="pre">__weakref__</span></span><a class="headerlink" href="#sarracenia.instance.instance.__weakref__" title="Link to this definition"></a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.instance.instance.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/instance.html#instance.start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.instance.instance.start" title="Link to this definition"></a></dt>
<dd><p>Main element to run a single flow instance. It parses the command line arguments twice.
the first pass, is to initialize the log file and debug level, and select the configuration file to parse.
Once the log file is set, and output &amp; error re-direction is in place, the second pass begins:</p>
<p>The configuration files are parsed, and then the options are parsed a second time to act
as overrides to the configuration file content.</p>
<p>As all process management is handled by sr.py, the <em>action</em> here is not parsed, but always either
<em>start</em> (daemon) or <em>foreground</em> (interactive)</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.identity">
<span id="sarracenia-identity"></span><h2><a class="toc-backref" href="#id19" role="doc-backlink">sarracenia.identity</a><a class="headerlink" href="#module-sarracenia.identity" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.identity.Identity">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.identity.</span></span><span class="sig-name descname"><span class="pre">Identity</span></span><a class="reference internal" href="../_modules/sarracenia/identity.html#Identity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.identity.Identity" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class for algorithms to get a fingerprint for a file being announced.
Appropriate fingerprinting algorithms vary according to file type.</p>
<p>required methods in subclasses:</p>
<dl class="simple">
<dt>def registered_as(self):</dt><dd><p>return a one letter string identifying the algorithm (mostly for v2.)
in v3, the registration comes from the identity sub-class name in lower case.</p>
</dd>
<dt>def set_path(self,path):</dt><dd><p>start a checksum for the given path… initialize.</p>
</dd>
<dt>def update(self,chunk):</dt><dd><p>update the checksum based on the given bytes from the file (sequential access assumed.)</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="sarracenia.identity.Identity.__weakref__">
<span class="sig-name descname"><span class="pre">__weakref__</span></span><a class="headerlink" href="#sarracenia.identity.Identity.__weakref__" title="Link to this definition"></a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.identity.Identity.update_file">
<span class="sig-name descname"><span class="pre">update_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/identity.html#Identity.update_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.identity.Identity.update_file" title="Link to this definition"></a></dt>
<dd><p>read the entire file, check sum it.
this is kind of last resort as it cost an extra file read.
It is better to call update( as the file is being read for other reasons.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="sarracenia.identity.Identity.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#sarracenia.identity.Identity.value" title="Link to this definition"></a></dt>
<dd><p>return the current value of the checksum calculation.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.identity.arbitrary">
<span id="sarracenia-identity-arbitrary"></span><h2><a class="toc-backref" href="#id20" role="doc-backlink">sarracenia.identity.arbitrary</a><a class="headerlink" href="#module-sarracenia.identity.arbitrary" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.identity.arbitrary.Arbitrary">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.identity.arbitrary.</span></span><span class="sig-name descname"><span class="pre">Arbitrary</span></span><a class="reference internal" href="../_modules/sarracenia/identity/arbitrary.html#Arbitrary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.identity.arbitrary.Arbitrary" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.identity.Identity" title="sarracenia.identity.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a></p>
<p>For applications where there is no known way of determining equivalence, allow them to supply
an arbitrary tag, that can be used to compare products for duplicate suppression purposes.</p>
<p>use setter to set the value… some sort of external checksum algorithm that cannot be reproduced.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.identity.arbitrary.Arbitrary.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/identity/arbitrary.html#Arbitrary.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.identity.arbitrary.Arbitrary.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="sarracenia.identity.arbitrary.Arbitrary.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#sarracenia.identity.arbitrary.Arbitrary.value" title="Link to this definition"></a></dt>
<dd><p>return the current value of the checksum calculation.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.identity.sha512">
<span id="sarracenia-identity-sha512"></span><h2><a class="toc-backref" href="#id21" role="doc-backlink">sarracenia.identity.sha512</a><a class="headerlink" href="#module-sarracenia.identity.sha512" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.identity.sha512.Sha512">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.identity.sha512.</span></span><span class="sig-name descname"><span class="pre">Sha512</span></span><a class="reference internal" href="../_modules/sarracenia/identity/sha512.html#Sha512"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.identity.sha512.Sha512" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.identity.Identity" title="sarracenia.identity.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a></p>
<p>The SHA512 algorithm to checksum the entire file, which is called ‘s’.</p>
</dd></dl>

</section>
<section id="module-sarracenia.identity.md5">
<span id="sarracenia-identity-md5"></span><h2><a class="toc-backref" href="#id22" role="doc-backlink">sarracenia.identity.md5</a><a class="headerlink" href="#module-sarracenia.identity.md5" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.identity.md5.Md5">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.identity.md5.</span></span><span class="sig-name descname"><span class="pre">Md5</span></span><a class="reference internal" href="../_modules/sarracenia/identity/md5.html#Md5"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.identity.md5.Md5" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.identity.Identity" title="sarracenia.identity.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a></p>
<p>use the (obsolete) Message Digest 5 (MD5) algorithm, applied on the content
of a file, to generate an identity signature.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.identity.md5.Md5.registered_as">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">registered_as</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/identity/md5.html#Md5.registered_as"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.identity.md5.Md5.registered_as" title="Link to this definition"></a></dt>
<dd><p>v2name.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.identity.random">
<span id="sarracenia-identity-random"></span><h2><a class="toc-backref" href="#id23" role="doc-backlink">sarracenia.identity.random</a><a class="headerlink" href="#module-sarracenia.identity.random" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.identity.random.Random">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.identity.random.</span></span><span class="sig-name descname"><span class="pre">Random</span></span><a class="reference internal" href="../_modules/sarracenia/identity/random.html#Random"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.identity.random.Random" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.identity.Identity" title="sarracenia.identity.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a></p>
<p>Trivial minimalist checksumming algorithm, returns random number for any file.</p>
<dl class="py property">
<dt class="sig sig-object py" id="sarracenia.identity.random.Random.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#sarracenia.identity.random.Random.value" title="Link to this definition"></a></dt>
<dd><p>return the current value of the checksum calculation.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.moth">
<span id="sarracenia-moth"></span><h2><a class="toc-backref" href="#id24" role="doc-backlink">sarracenia.moth</a><a class="headerlink" href="#module-sarracenia.moth" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.moth.Moth">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.moth.</span></span><span class="sig-name descname"><span class="pre">Moth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">props</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_subscriber</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/moth.html#Moth"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.Moth" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<blockquote>
<div><p>Moth … Messages Organized by Topic Headers
(en français: Messages organisés par thème hierarchique. )</p>
<p>A multi-protocol library for use by hierarchical message passing implementations,
(messages which have a ‘topic’ header that is used for routing by brokers.)</p>
<ul class="simple">
<li><p>regardless of protocol, the message format returned should be the same.</p></li>
<li><p>the message is turned into a sarracenia.Message object, which acts like a python
dictionary, corresponding to key-value pairs in the message body, and properties.</p></li>
<li><p>topic is a special key that may end up in the message body, or some sort of property
or metadata.</p></li>
<li><p>the protocol should support acknowledgement under user control. Such control indicated
by the presence of an entry_point called “ack”. The entry point accepts “ack_id” as
a message identifier to be passed to the broker. Whatever protocol symbol is used
by the protocol, it is passed through this message property. Examples:
in rabbitmq/amqp ack takes a “delivery_tag” as an argument, in MQTT, it takes a “message-id”
so when receiving an AMQP message, the m[‘ack_id’] is assigned the delivery_tag from the message.</p></li>
<li><p>There is a special dict item:  “_DeleteOnPost”,
to identify keys which are added only for local use.
they will be removed from the message when publishing.
examples:  topic (sent outside body), message-id (used for acknowledgements.)
new_basedir, ack_id, new_… (settings…)</p></li>
</ul>
<p>Intent is to be specialized for topic based data distribution (MQTT style.)
API to allow pass-through of protocol specific properties, but apply templates for genericity.</p>
<p>Target protocols (and corresponding libraries.): AMQP, MQTT, ?</p>
<p>Things to specify:</p>
<ul class="simple">
<li><p>broker</p></li>
<li><p>topicPrefix</p></li>
<li><p>subTopic</p></li>
<li><p>queueName   (for amqp, used as client-id for mqtt)</p></li>
</ul>
<p>this library knows nothing about Sarracenia, the only code used from sarracenia is to interpret
duration properties, from the root sarracenia/__init__.py, the broker argument from sarracenia.config.credentials</p>
<p>usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sarracenia.moth</span>
<span class="kn">import</span> <span class="nn">sarracenia.config.credentials</span>


<span class="n">props</span> <span class="o">=</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">moth</span><span class="o">.</span><span class="n">default_options</span>
<span class="n">props</span><span class="p">[</span><span class="s1">&#39;broker&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sarracenia</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">credentials</span><span class="o">.</span><span class="n">Credential</span><span class="p">(</span><span class="s1">&#39;amqps://anonymous:anonymous@hpfx.collab.science.gc.ca&#39;</span><span class="p">)</span>
<span class="n">props</span><span class="p">[</span><span class="s1">&#39;expire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">props</span><span class="p">[</span><span class="s1">&#39;batch&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">is_subscriber</span><span class="o">=</span><span class="kc">True</span>

<span class="n">c</span><span class="o">=</span> <span class="n">Moth</span><span class="p">(</span> <span class="n">props</span><span class="p">,</span> <span class="n">is_subscriber</span>  <span class="p">)</span>

<span class="n">messages</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">newMessages</span><span class="p">()</span>

<span class="c1"># if there are new messages from a publisher, return them, otherwise return</span>
<span class="c1"># an empty list []].</span>

<span class="n">p</span><span class="o">=</span><span class="n">Moth</span><span class="p">(</span> <span class="p">{</span> <span class="s1">&#39;batch&#39;</span><span class="p">:</span><span class="mi">1</span> <span class="p">},</span> <span class="kc">False</span> <span class="p">)</span>

<span class="n">p</span><span class="o">.</span><span class="n">putNewMessage</span><span class="p">()</span>

<span class="n">p</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="c1"># tear down connection.</span>
</pre></div>
</div>
<p>Initialize a broker connection. Connections are unidirectional.
either for subscribing (with subFactory) or publishing (with pubFactory.)</p>
<p>The factories return objects subclassed to match the protocol required
by the broker argument.</p>
<p>arguments to the factories are:</p>
<ul class="simple">
<li><p>broker … the url of the broker to connect to.</p></li>
<li><p>props is a dictionary or properties/parameters.</p></li>
<li><p>supplied as overrides to the default properties listed above.</p></li>
</ul>
<p>Some may vary among protocols:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Protocol</span>     <span class="n">library</span> <span class="n">implementing</span>    <span class="n">URL</span> <span class="n">to</span> <span class="n">select</span>
<span class="o">--------</span>     <span class="o">--------------------</span>    <span class="o">-------------</span>

<span class="n">AMQPv0</span><span class="mf">.9</span> <span class="o">--&gt;</span> <span class="n">amqplib</span> <span class="kn">from</span> <span class="nn">Celery</span> <span class="o">--&gt;</span> <span class="n">amqp</span><span class="p">,</span> <span class="n">amqps</span>

<span class="n">AMQPv0</span><span class="mf">.9</span> <span class="o">--&gt;</span> <span class="n">pika</span>                <span class="o">--&gt;</span> <span class="n">pika</span><span class="p">,</span> <span class="n">pikas</span>

<span class="n">MQTTv3</span>   <span class="o">--&gt;</span> <span class="n">paho</span>                <span class="o">--&gt;</span> <span class="n">mqtt</span><span class="p">,</span> <span class="n">mqtts</span>

<span class="n">AMQPv1</span><span class="mf">.0</span> <span class="o">--&gt;</span> <span class="n">qpid</span><span class="o">-</span><span class="n">proton</span>         <span class="o">--&gt;</span> <span class="n">amq1</span><span class="p">,</span> <span class="n">amq1s</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>messaging_strategy</strong></p>
<p>how to manage the connection. Covers whether to treat the connection
as new or assume it is set up. Also, If something goes wrong.
What should be done.</p>
<ul class="simple">
<li><p>reset: on startup… erase any state, and re-initialize.</p></li>
<li><p>stubborn: If set to True, loop forever if something bad happens.
Never give up. This sort of setting is desired in operations, especially unattended.
if set to False, may give up more easily.</p></li>
<li><p>failure_duration is to advise library how to structure connection service level.</p>
<ul>
<li><p>5m - make a connection that will recover from transient errors of a few minutes,
but not tax the broker too much for prolonged outages.</p></li>
<li><p>5d - duration outage to striving to survive connection for five days.</p></li>
</ul>
</li>
</ul>
<p>Changing recovery_strategy setting, might result in having to destroy and re-create
consumer queues (AMQP.)</p>
<p><strong>Options</strong></p>
<p><strong>both</strong></p>
<ul class="simple">
<li><p>‘topicPrefix’ : [ ‘v03’ ]</p></li>
<li><p>‘messageDebugDump’: False, –&gt; enable printing of raw messages.</p></li>
<li><p>‘inline’: False,  - Are we inlining content within messages?</p></li>
<li><p>‘inlineEncoding’: ‘guess’, - what encoding should we use for inlined content?</p></li>
<li><p>‘inlineByteMax’: 4096,  - Maximum size of messages to inline.</p></li>
</ul>
<p><strong>for get</strong></p>
<ul class="simple">
<li><p>‘batch’  : 100  # how many messages to get at once</p></li>
<li><p>‘broker’ : an sr_broker ?</p></li>
<li><p>‘queueName’  : Mandatory, name of a queue. (only in AMQP… hmm…)</p></li>
<li><p>‘bindings’ : [ list of bindings ]</p></li>
<li><p>‘loop’</p></li>
</ul>
<p><strong>optional:</strong></p>
<ul class="simple">
<li><p>‘message_ttl’</p></li>
</ul>
<p><strong>for put:</strong></p>
<ul class="simple">
<li><p>‘exchange’ (only in AMQP… hmm…)</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.moth.Moth.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">props</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_subscriber</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/sarracenia/moth.html#Moth.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.Moth.__init__" title="Link to this definition"></a></dt>
<dd><p>If is_subscriber=True, then this is a consuming instance.
expect calls to get* routines.</p>
<p>if is_subscriber=False, then expect/permit only calls to put*</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sarracenia.moth.Moth.__weakref__">
<span class="sig-name descname"><span class="pre">__weakref__</span></span><a class="headerlink" href="#sarracenia.moth.Moth.__weakref__" title="Link to this definition"></a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.moth.Moth.ack">
<span class="sig-name descname"><span class="pre">ack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sarracenia.Message" title="sarracenia.Message"><span class="pre">Message</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/sarracenia/moth.html#Moth.ack"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.Moth.ack" title="Link to this definition"></a></dt>
<dd><p>tell broker that a given message has been received.</p>
<p>ack uses the ‘ack_id’ property to send an acknowledgement back to the broker.
If there’s no ‘ack_id’ in the message, you should return True.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.moth.Moth.cleanup">
<span class="sig-name descname"><span class="pre">cleanup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/sarracenia/moth.html#Moth.cleanup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.Moth.cleanup" title="Link to this definition"></a></dt>
<dd><p>get rid of server-side resources associated with a client. (queues/id’s, etc…)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="sarracenia.moth.Moth.default_options">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default_options</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span></em><a class="headerlink" href="#sarracenia.moth.Moth.default_options" title="Link to this definition"></a></dt>
<dd><p>get default properties to override, used by client for validation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.moth.Moth.findAllSubclasses">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">findAllSubclasses</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">set</span></span></span><a class="reference internal" href="../_modules/sarracenia/moth.html#Moth.findAllSubclasses"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.Moth.findAllSubclasses" title="Link to this definition"></a></dt>
<dd><p>Recursively finds all subclasses of a class. __subclasses__() only gives direct subclasses.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.moth.Moth.getNewMessage">
<span class="sig-name descname"><span class="pre">getNewMessage</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sarracenia.Message" title="sarracenia.Message"><span class="pre">Message</span></a></span></span><a class="reference internal" href="../_modules/sarracenia/moth.html#Moth.getNewMessage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.Moth.getNewMessage" title="Link to this definition"></a></dt>
<dd><p>If there is one new message available, return it. Otherwise return None. Do not block.</p>
<dl class="simple">
<dt>side effects:</dt><dd><p>metrics.
self.metrics[‘RxByteCount’] should be incremented by size of payload.
self.metrics[‘RxGoodCount’] should be incremented by 1 if a good message is received.
self.metrics[‘RxBadCount’] should be incremented by 1 if an invalid message is received (&amp;discarded.)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.moth.Moth.metricsDisconnect">
<span class="sig-name descname"><span class="pre">metricsDisconnect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/sarracenia/moth.html#Moth.metricsDisconnect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.Moth.metricsDisconnect" title="Link to this definition"></a></dt>
<dd><p>tear down an existing connection.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.moth.Moth.newMessages">
<span class="sig-name descname"><span class="pre">newMessages</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="reference internal" href="../_modules/sarracenia/moth.html#Moth.newMessages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.Moth.newMessages" title="Link to this definition"></a></dt>
<dd><p>If there are new messages available from the broker, return them, otherwise return None.</p>
<p>On Success, this routine returns immediately (non-blocking) with either None, or a list of messages.</p>
<p>On failure, this routine blocks, and loops reconnecting to broker, until interaction with broker is successful.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.moth.Moth.please_stop">
<span class="sig-name descname"><span class="pre">please_stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/sarracenia/moth.html#Moth.please_stop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.Moth.please_stop" title="Link to this definition"></a></dt>
<dd><p>register a request to cleanly stop. Any long running processes should check for _stop_requested and
stop if it becomes True.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.moth.Moth.putNewMessage">
<span class="sig-name descname"><span class="pre">putNewMessage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sarracenia.Message" title="sarracenia.Message"><span class="pre">Message</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'application/json'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exchange</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/sarracenia/moth.html#Moth.putNewMessage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.Moth.putNewMessage" title="Link to this definition"></a></dt>
<dd><p>publish a message as set up to the given topic.</p>
<p>return True is succeeded, False otherwise.</p>
<dl class="simple">
<dt>side effect</dt><dd><p>self.metrics[‘TxByteCount’] should be incremented by size of payload.
self.metrics[‘TxGoodCount’] should be incremented by 1 if a good message is received.
self.metrics[‘TxBadCount’] should be incremented by 1 if an invalid message is received (&amp;discarded.)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.moth.amqp">
<span id="sarracenia-moth-amqp"></span><h2><a class="toc-backref" href="#id25" role="doc-backlink">sarracenia.moth.amqp</a><a class="headerlink" href="#module-sarracenia.moth.amqp" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.moth.amqp.AMQP">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.moth.amqp.</span></span><span class="sig-name descname"><span class="pre">AMQP</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">props</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_subscriber</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/moth/amqp.html#AMQP"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.amqp.AMQP" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.moth.Moth" title="sarracenia.moth.Moth"><code class="xref py py-class docutils literal notranslate"><span class="pre">Moth</span></code></a></p>
<p>implementation of the Moth API for the amqp library, which is built to talk to rabbitmq brokers in 0.8 and 0.9
AMQP dialects.</p>
<p>to allow acknowledgements we map: AMQP’ ‘delivery_tag’ to the ‘ack_id’</p>
<p>additional AMQP specific options:</p>
<p>exchangeDeclare  - declare exchanges before use.
queueBind        - bind queue to exchange before use.
queueDeclare     - declare queue before use.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.moth.amqp.AMQP.__connect">
<span class="sig-name descname"><span class="pre">__connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">broker</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#sarracenia.moth.amqp.AMQP.__connect" title="Link to this definition"></a></dt>
<dd><p>connect to broker.
returns True if connected, false otherwise.
* side effect: self.channel set to a new channel.</p>
<p>Expect caller to handle errors.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.moth.amqp.AMQP.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">props</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_subscriber</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/sarracenia/moth/amqp.html#AMQP.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.amqp.AMQP.__init__" title="Link to this definition"></a></dt>
<dd><p>connect to broker, depending on message_strategy stubborness, remain connected.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.moth.amqp.AMQP.ack">
<span class="sig-name descname"><span class="pre">ack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sarracenia.Message" title="sarracenia.Message"><span class="pre">Message</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/sarracenia/moth/amqp.html#AMQP.ack"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.amqp.AMQP.ack" title="Link to this definition"></a></dt>
<dd><p>do what you need to acknowledge that processing of a message is done.
NOTE: AMQP delivery tags (we call them ack_id) are scoped per channel. “Deliveries must be
acknowledged on the same channel they were received on. Acknowledging on a different channel
will result in an “unknown delivery tag” protocol exception and close the channel.”</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.moth.amqp.AMQP.getNewMessage">
<span class="sig-name descname"><span class="pre">getNewMessage</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#sarracenia.Message" title="sarracenia.Message"><span class="pre">Message</span></a></span></span><a class="reference internal" href="../_modules/sarracenia/moth/amqp.html#AMQP.getNewMessage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.amqp.AMQP.getNewMessage" title="Link to this definition"></a></dt>
<dd><p>If there is one new message available, return it. Otherwise return None. Do not block.</p>
<dl class="simple">
<dt>side effects:</dt><dd><p>metrics.
self.metrics[‘RxByteCount’] should be incremented by size of payload.
self.metrics[‘RxGoodCount’] should be incremented by 1 if a good message is received.
self.metrics[‘RxBadCount’] should be incremented by 1 if an invalid message is received (&amp;discarded.)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.moth.amqp.AMQP.getSetup">
<span class="sig-name descname"><span class="pre">getSetup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/sarracenia/moth/amqp.html#AMQP.getSetup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.amqp.AMQP.getSetup" title="Link to this definition"></a></dt>
<dd><p>Setup so we can get messages.</p>
<dl class="simple">
<dt>if message_strategy is stubborn, will loop here forever.</dt><dd><p>connect, declare queue, apply bindings.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.moth.amqp.AMQP.newMessages">
<span class="sig-name descname"><span class="pre">newMessages</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="reference internal" href="../_modules/sarracenia/moth/amqp.html#AMQP.newMessages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.amqp.AMQP.newMessages" title="Link to this definition"></a></dt>
<dd><p>If there are new messages available from the broker, return them, otherwise return None.</p>
<p>On Success, this routine returns immediately (non-blocking) with either None, or a list of messages.</p>
<p>On failure, this routine blocks, and loops reconnecting to broker, until interaction with broker is successful.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.moth.amqp.AMQP.putNewMessage">
<span class="sig-name descname"><span class="pre">putNewMessage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#sarracenia.Message" title="sarracenia.Message"><span class="pre">Message</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'application/json'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exchange</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/sarracenia/moth/amqp.html#AMQP.putNewMessage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.amqp.AMQP.putNewMessage" title="Link to this definition"></a></dt>
<dd><p>put a new message out, to the configured exchange by default.</p>
</dd></dl>

</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="sarracenia.moth.amqp.logger">
<span class="sig-prename descclassname"><span class="pre">sarracenia.moth.amqp.</span></span><span class="sig-name descname"><span class="pre">logger</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;Logger</span> <span class="pre">sarracenia.moth.amqp</span> <span class="pre">(WARNING)&gt;</span></em><a class="headerlink" href="#sarracenia.moth.amqp.logger" title="Link to this definition"></a></dt>
<dd><p>amqp_ss_maxlen</p>
<p>the maximum length of a “short string”, as per AMQP protocol, in bytes.</p>
</dd></dl>

</section>
<section id="module-sarracenia.moth.pika">
<span id="sarracenia-moth-pika"></span><h2><a class="toc-backref" href="#id26" role="doc-backlink">sarracenia.moth.pika</a><a class="headerlink" href="#module-sarracenia.moth.pika" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.moth.pika.PIKA">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.moth.pika.</span></span><span class="sig-name descname"><span class="pre">PIKA</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">broker</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/moth/pika.html#PIKA"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.pika.PIKA" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.moth.Moth" title="sarracenia.moth.Moth"><code class="xref py py-class docutils literal notranslate"><span class="pre">Moth</span></code></a></p>
<p>moth subclass based on the pika AMQP/rabbitmq client library.</p>
<p>stub: not implemented.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.moth.pika.PIKA.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">broker</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/moth/pika.html#PIKA.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.pika.PIKA.__init__" title="Link to this definition"></a></dt>
<dd><p>If is_subscriber=True, then this is a consuming instance.
expect calls to get* routines.</p>
<p>if is_subscriber=False, then expect/permit only calls to put*</p>
</dd></dl>

</dd></dl>

</section>
<section id="sarracenia-moth-mqtt">
<h2><a class="toc-backref" href="#id27" role="doc-backlink">sarracenia.moth.mqtt</a><a class="headerlink" href="#sarracenia-moth-mqtt" title="Link to this heading"></a></h2>
</section>
<section id="module-sarracenia.moth.amq1">
<span id="sarracenia-moth-amq1"></span><h2><a class="toc-backref" href="#id28" role="doc-backlink">sarracenia.moth.amq1</a><a class="headerlink" href="#module-sarracenia.moth.amq1" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.moth.amq1.AMQ1">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.moth.amq1.</span></span><span class="sig-name descname"><span class="pre">AMQ1</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">broker</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">props</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_subscriber</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/moth/amq1.html#AMQ1"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.amq1.AMQ1" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.moth.Moth" title="sarracenia.moth.Moth"><code class="xref py py-class docutils literal notranslate"><span class="pre">Moth</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.moth.amq1.AMQ1.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">broker</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">props</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_subscriber</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/moth/amq1.html#AMQ1.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.moth.amq1.AMQ1.__init__" title="Link to this definition"></a></dt>
<dd><p>AMQP 1.0 library to be built with libqpid-proton (the only free amqp 1.0 library around.)</p>
<p>stub, not implemented</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.rabbitmq_admin">
<span id="sarracenia-rabbitmq-admin"></span><h2><a class="toc-backref" href="#id29" role="doc-backlink">sarracenia.rabbitmq_admin</a><a class="headerlink" href="#module-sarracenia.rabbitmq_admin" title="Link to this heading"></a></h2>
<p>rabbitmq administration bindings, to allow sr to invoke broker management functions.</p>
<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.rabbitmq_admin.add_user">
<span class="sig-prename descclassname"><span class="pre">sarracenia.rabbitmq_admin.</span></span><span class="sig-name descname"><span class="pre">add_user</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">passwd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">simulate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/rabbitmq_admin.html#add_user"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.rabbitmq_admin.add_user" title="Link to this definition"></a></dt>
<dd><p>add the given user with the given credentials.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.rabbitmq_admin.broker_get_exchanges">
<span class="sig-prename descclassname"><span class="pre">sarracenia.rabbitmq_admin.</span></span><span class="sig-name descname"><span class="pre">broker_get_exchanges</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_key_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_cert_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/rabbitmq_admin.html#broker_get_exchanges"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.rabbitmq_admin.broker_get_exchanges" title="Link to this definition"></a></dt>
<dd><p>get the list of existing exchanges using a url query.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.rabbitmq_admin.del_user">
<span class="sig-prename descclassname"><span class="pre">sarracenia.rabbitmq_admin.</span></span><span class="sig-name descname"><span class="pre">del_user</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">simulate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/rabbitmq_admin.html#del_user"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.rabbitmq_admin.del_user" title="Link to this definition"></a></dt>
<dd><p>delete user from the given broker.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.rabbitmq_admin.exec_rabbitmqadmin">
<span class="sig-prename descclassname"><span class="pre">sarracenia.rabbitmq_admin.</span></span><span class="sig-name descname"><span class="pre">exec_rabbitmqadmin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">simulate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/rabbitmq_admin.html#exec_rabbitmqadmin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.rabbitmq_admin.exec_rabbitmqadmin" title="Link to this definition"></a></dt>
<dd><p>invoke rabbitmqadmin using a sub-process, with the given options.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.rabbitmq_admin.get_exchanges">
<span class="sig-prename descclassname"><span class="pre">sarracenia.rabbitmq_admin.</span></span><span class="sig-name descname"><span class="pre">get_exchanges</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/rabbitmq_admin.html#get_exchanges"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.rabbitmq_admin.get_exchanges" title="Link to this definition"></a></dt>
<dd><p>get the list of existing exchanges.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.rabbitmq_admin.get_queues">
<span class="sig-prename descclassname"><span class="pre">sarracenia.rabbitmq_admin.</span></span><span class="sig-name descname"><span class="pre">get_queues</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/rabbitmq_admin.html#get_queues"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.rabbitmq_admin.get_queues" title="Link to this definition"></a></dt>
<dd><p>get the list of existing queues.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.rabbitmq_admin.get_users">
<span class="sig-prename descclassname"><span class="pre">sarracenia.rabbitmq_admin.</span></span><span class="sig-name descname"><span class="pre">get_users</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/rabbitmq_admin.html#get_users"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.rabbitmq_admin.get_users" title="Link to this definition"></a></dt>
<dd><p>get the list of existing users.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.rabbitmq_admin.run_rabbitmqadmin">
<span class="sig-prename descclassname"><span class="pre">sarracenia.rabbitmq_admin.</span></span><span class="sig-name descname"><span class="pre">run_rabbitmqadmin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">simulate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/rabbitmq_admin.html#run_rabbitmqadmin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.rabbitmq_admin.run_rabbitmqadmin" title="Link to this definition"></a></dt>
<dd><p>spawn a subprocess to run rabbitmqadmin with the given options.
capture result.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.rabbitmq_admin.user_access">
<span class="sig-prename descclassname"><span class="pre">sarracenia.rabbitmq_admin.</span></span><span class="sig-name descname"><span class="pre">user_access</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/rabbitmq_admin.html#user_access"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.rabbitmq_admin.user_access" title="Link to this definition"></a></dt>
<dd><p>Given an administrative URL, return a list of exchanges and queues the user can access.</p>
<p>lox = list of exchanges, just a list of names.
loq = array of queues, where the value of each is the number of messages ready.</p>
<p>return value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s1">&#39;exchanges&#39;</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;configure&#39;</span><span class="p">:</span> <span class="n">lox</span><span class="p">,</span> <span class="s1">&#39;write&#39;</span><span class="p">:</span> <span class="n">lox</span><span class="p">,</span> <span class="s1">&#39;read&#39;</span><span class="p">:</span> <span class="n">lox</span> <span class="p">},</span>
  <span class="s1">&#39;queues&#39;</span> <span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;configure&#39;</span><span class="p">:</span> <span class="n">loq</span><span class="p">,</span> <span class="s1">&#39;write&#39;</span><span class="p">:</span> <span class="n">loq</span><span class="p">,</span> <span class="s1">&#39;read&#39;</span><span class="p">:</span> <span class="n">loq</span> <span class="p">},</span>
  <span class="s1">&#39;bindings&#39;</span> <span class="p">:</span> <span class="p">{</span> <span class="o">&lt;</span><span class="n">queue</span><span class="o">&gt;</span> <span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;exchange&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">exchange</span><span class="o">&gt;</span> <span class="p">,</span> <span class="s1">&#39;key&#39;</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">routing_key</span><span class="o">&gt;</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-sarracenia.transfer">
<span id="sarracenia-transfer"></span><h2><a class="toc-backref" href="#id30" role="doc-backlink">sarracenia.transfer</a><a class="headerlink" href="#module-sarracenia.transfer" title="Link to this heading"></a></h2>
<dl class="py exception">
<dt class="sig sig-object py" id="sarracenia.transfer.TimeoutException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.transfer.</span></span><span class="sig-name descname"><span class="pre">TimeoutException</span></span><a class="reference internal" href="../_modules/sarracenia/transfer.html#TimeoutException"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.TimeoutException" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>timeout exception</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="sarracenia.transfer.TimeoutException.__weakref__">
<span class="sig-name descname"><span class="pre">__weakref__</span></span><a class="headerlink" href="#sarracenia.transfer.TimeoutException.__weakref__" title="Link to this definition"></a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.transfer.Transfer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.transfer.</span></span><span class="sig-name descname"><span class="pre">Transfer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">proto</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/transfer.html#Transfer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.Transfer" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This is a sort of abstract base class for implementing transfer protocols.
Implemented subclasses include support for: local files, https, sftp, and ftp.</p>
<p>This class has routines that do i/o given descriptors opened by the sub-classes,
so that each one does not need to re-implement copying, for example.</p>
<p>Each subclass needs to implement the following routines:</p>
<p>if downloading:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get</span>    <span class="p">(</span> <span class="n">msg</span><span class="p">,</span> <span class="n">remote_file</span><span class="p">,</span> <span class="n">local_file</span><span class="p">,</span> <span class="n">remote_offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">local_offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">0</span> <span class="p">)</span>
<span class="n">getAccellerated</span><span class="p">(</span> <span class="n">msg</span><span class="p">,</span> <span class="n">remote_file</span><span class="p">,</span> <span class="n">local_file</span><span class="p">,</span> <span class="n">length</span> <span class="p">)</span>
<span class="n">ls</span>     <span class="p">()</span>
<span class="n">cd</span>     <span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
<span class="n">delete</span> <span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
<p>if sending:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">put</span>    <span class="p">(</span> <span class="n">msg</span><span class="p">,</span> <span class="n">remote_file</span><span class="p">,</span> <span class="n">local_file</span><span class="p">,</span> <span class="n">remote_offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">local_offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">0</span> <span class="p">)</span>
<span class="n">putAccelerated</span> <span class="p">(</span> <span class="n">msg</span><span class="p">,</span> <span class="n">remote_file</span><span class="p">,</span> <span class="n">local_file</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">0</span> <span class="p">)</span>
<span class="n">cd</span>     <span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
<span class="n">mkdir</span>  <span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
<span class="n">umask</span>  <span class="p">()</span>
<span class="n">chmod</span>  <span class="p">(</span><span class="n">perm</span><span class="p">)</span>
<span class="n">rename</span> <span class="p">(</span><span class="n">old</span><span class="p">,</span><span class="n">new</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that the ls() call returns are polymorphic. One of:</p>
<ul class="simple">
<li><p>a dictionary where the key is the name of the file in the directory,
and the value is an SFTPAttributes structure for if (from paramiko.)
(sftp.py as an example)</p></li>
<li><p>a dictionary where the key is the name of the file, and the value is a string
that looks like the output of a linux ls command.
(ftp.py as an example.)</p></li>
<li><p>a sequence of bytes… will be parsed as an html page.
(https.py as an example)</p></li>
</ul>
<p>The first format is the vastly preferred one. The others are fallbacks when the first
is not available.
The flowcb/poll/__init__.py lsdir() routing will turn ls tries to transform any of
these return values into the first form (a dictionary of SFTPAttributes)
Each SFTPAttributes structure needs st_mode set, and folders need stat.S_IFDIR set.</p>
<p>if the lsdir() routine gets a sequence of bytes, the on_html_page() and on_html_parser_init(,
or perhaps handle_starttag(..) and handle_data() routines) will be used to turn them into
the first form.</p>
<p>web services with different such formats can be accommodated by subclassing and overriding
the handle_* entry points.</p>
<p>uses options (on Sarracenia.config data structure passed to constructor/factory.)
* credentials - used to authentication information.
* sendTo  - server to connect to.
* batch   - how many files to transfer before a connection is torn down and re-established.
* permDefault - what permissions to set on files transferred.
* permDirDefault - what permission to set on directories created.
* timeout  - how long to wait for operations to complete.
* byteRateMax - maximum transfer rate (throttle to avoid exceeding)
* bufSize - size of buffers for file transfers.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.transfer.Transfer.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">proto</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/transfer.html#Transfer.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.Transfer.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sarracenia.transfer.Transfer.__weakref__">
<span class="sig-name descname"><span class="pre">__weakref__</span></span><a class="headerlink" href="#sarracenia.transfer.Transfer.__weakref__" title="Link to this definition"></a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.transfer.Transfer.logProgress">
<span class="sig-name descname"><span class="pre">logProgress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sz</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/transfer.html#Transfer.logProgress"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.Transfer.logProgress" title="Link to this definition"></a></dt>
<dd><p>if there hasn’t been a log message in at least logMinumumInterval,
then put out a message, so sanity does not think it is dead.</p>
<p>this should print out a message once in a while for long file transfers.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.transfer.Transfer.on_data">
<span class="sig-name descname"><span class="pre">on_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chunk</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bytes</span></span></span><a class="reference internal" href="../_modules/sarracenia/transfer.html#Transfer.on_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.Transfer.on_data" title="Link to this definition"></a></dt>
<dd><p>transform data as it is being read.
Given a buffer, return the transformed buffer.
Checksum calculation is based on pre transformation… likely need
a post transformation value as well.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sarracenia.transfer.alarm_set">
<span class="sig-prename descclassname"><span class="pre">sarracenia.transfer.</span></span><span class="sig-name descname"><span class="pre">alarm_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/transfer.html#alarm_set"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.alarm_set" title="Link to this definition"></a></dt>
<dd><p>FIXME: replace with set itimer for &gt; 1 second resolution… currently rouding to nearest second.</p>
</dd></dl>

</section>
<section id="module-sarracenia.transfer.file">
<span id="sarracenia-transfer-file"></span><h2><a class="toc-backref" href="#id31" role="doc-backlink">sarracenia.transfer.file</a><a class="headerlink" href="#module-sarracenia.transfer.file" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.transfer.file.File">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.transfer.file.</span></span><span class="sig-name descname"><span class="pre">File</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">proto</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/transfer/file.html#File"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.file.File" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.transfer.Transfer" title="sarracenia.transfer.Transfer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transfer</span></code></a></p>
<p>Transfer sub-class for local file i/o.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.transfer.file.File.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">proto</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/transfer/file.html#File.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.file.File.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.transfer.file.File.cd">
<span class="sig-name descname"><span class="pre">cd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/transfer/file.html#File.cd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.file.File.cd" title="Link to this definition"></a></dt>
<dd><p>proto classes are used for remote sessions, so this
cd is for REMOTE directory… when file remote as a protocol it is for the source.
should not change the “local” working directory when downloading.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.transfer.https">
<span id="sarracenia-transfer-https"></span><h2><a class="toc-backref" href="#id32" role="doc-backlink">sarracenia.transfer.https</a><a class="headerlink" href="#module-sarracenia.transfer.https" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.transfer.https.HTTPRedirectHandlerSameMethod">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.transfer.https.</span></span><span class="sig-name descname"><span class="pre">HTTPRedirectHandlerSameMethod</span></span><a class="reference internal" href="../_modules/sarracenia/transfer/https.html#HTTPRedirectHandlerSameMethod"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.https.HTTPRedirectHandlerSameMethod" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPRedirectHandler</span></code></p>
<p>Instead of returning a new Request without a method (defaults to GET), use the
same method in the new Request.
<a class="reference external" href="https://docs.python.org/3/library/urllib.request.html#urllib.request.HTTPRedirectHandler.redirect_request">https://docs.python.org/3/library/urllib.request.html#urllib.request.HTTPRedirectHandler.redirect_request</a>
<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Redirections">https://developer.mozilla.org/en-US/docs/Web/HTTP/Redirections</a> note [2]</p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.transfer.https.HTTPRedirectHandlerSameMethod.redirect_request">
<span class="sig-name descname"><span class="pre">redirect_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newurl</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/transfer/https.html#HTTPRedirectHandlerSameMethod.redirect_request"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.https.HTTPRedirectHandlerSameMethod.redirect_request" title="Link to this definition"></a></dt>
<dd><p>Return a Request or None in response to a redirect.</p>
<p>This is called by the http_error_30x methods when a
redirection response is received.  If a redirection should
take place, return a new Request to allow http_error_30x to
perform the redirect.  Otherwise, raise HTTPError if no-one
else should try to handle this url.  Return None if you can’t
but another Handler might.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.transfer.https.Https">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.transfer.https.</span></span><span class="sig-name descname"><span class="pre">Https</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">proto</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/transfer/https.html#Https"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.https.Https" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.transfer.Transfer" title="sarracenia.transfer.Transfer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transfer</span></code></a></p>
<p>HyperText Transfer Protocol (HTTP)  ( <a class="reference external" href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol</a> )
sarracenia transfer protocol subclass supports/uses additional custom options:</p>
<ul class="simple">
<li><p>accelWgetCommand (default: ‘/usr/bin/wget %s -o - -O %d’ )</p></li>
</ul>
<dl class="simple">
<dt>built with:</dt><dd><p>urllib.request ( <a class="reference external" href="https://docs.python.org/3/library/urllib.request.html">https://docs.python.org/3/library/urllib.request.html</a> )</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.transfer.https.Https.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">proto</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/transfer/https.html#Https.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.https.Https.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.transfer.https.Https.__open__">
<span class="sig-name descname"><span class="pre">__open__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remote_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_headers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">handlers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/sarracenia/transfer/https.html#Https.__open__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.https.Https.__open__" title="Link to this definition"></a></dt>
<dd><p>Open a URL. When the open is successful, self.http is set to a urllib.response instance that can be
read from like a file.</p>
<p>Returns True when successfully opened, False if there was a problem.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.transfer.https.Https.__url_redir_str">
<span class="sig-name descname"><span class="pre">__url_redir_str</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sarracenia.transfer.https.Https.__url_redir_str" title="Link to this definition"></a></dt>
<dd><p>Returl self.urlstr, unless the request was redirected to a different URL.
If so, it will return ‘self.urlstr redirected to new_url’</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.transfer.ftp">
<span id="sarracenia-transfer-ftp"></span><h2><a class="toc-backref" href="#id33" role="doc-backlink">sarracenia.transfer.ftp</a><a class="headerlink" href="#module-sarracenia.transfer.ftp" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.transfer.ftp.Ftp">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.transfer.ftp.</span></span><span class="sig-name descname"><span class="pre">Ftp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">proto</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/transfer/ftp.html#Ftp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.ftp.Ftp" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.transfer.Transfer" title="sarracenia.transfer.Transfer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transfer</span></code></a></p>
<p>File Transfer Protocol (FTP)  ( <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc959">https://datatracker.ietf.org/doc/html/rfc959</a> )
sarracenia transfer protocol subclass supports/uses additional custom options:</p>
<ul class="simple">
<li><p>accelFtpputCommand (default: ‘/usr/bin/ncftpput %s %d’ )</p></li>
<li><p>accelFtpgetCommand (default: ‘/usr/bin/ncftpget %s %d’ )</p></li>
</ul>
<p>built using: ftplib ( <a class="reference external" href="https://docs.python.org/3/library/ftplib.html">https://docs.python.org/3/library/ftplib.html</a> )</p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.transfer.ftp.Ftp.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">proto</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/transfer/ftp.html#Ftp.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.ftp.Ftp.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.transfer.ftp.IMPLICIT_FTP_TLS">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.transfer.ftp.</span></span><span class="sig-name descname"><span class="pre">IMPLICIT_FTP_TLS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/transfer/ftp.html#IMPLICIT_FTP_TLS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.ftp.IMPLICIT_FTP_TLS" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">FTP_TLS</span></code></p>
<p>FTP_TLS subclass that automatically wraps sockets in SSL to support implicit FTPS.
Copied from <a class="reference external" href="https://stackoverflow.com/questions/12164470/python-ftp-implicit-tls-connection-issue">https://stackoverflow.com/questions/12164470/python-ftp-implicit-tls-connection-issue</a></p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.transfer.ftp.IMPLICIT_FTP_TLS.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/transfer/ftp.html#IMPLICIT_FTP_TLS.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.ftp.IMPLICIT_FTP_TLS.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialization method (called by class instantiation).
Initialize host to localhost, port to standard ftp port.
Optional arguments are host (for connect()),
and user, passwd, acct (for login()).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="sarracenia.transfer.ftp.IMPLICIT_FTP_TLS.sock">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sock</span></span><a class="headerlink" href="#sarracenia.transfer.ftp.IMPLICIT_FTP_TLS.sock" title="Link to this definition"></a></dt>
<dd><p>Return the socket.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-sarracenia.transfer.sftp">
<span id="sarracenia-transfer-sftp"></span><h2><a class="toc-backref" href="#id34" role="doc-backlink">sarracenia.transfer.sftp</a><a class="headerlink" href="#module-sarracenia.transfer.sftp" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sarracenia.transfer.sftp.Sftp">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sarracenia.transfer.sftp.</span></span><span class="sig-name descname"><span class="pre">Sftp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">proto</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/transfer/sftp.html#Sftp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.sftp.Sftp" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#sarracenia.transfer.Transfer" title="sarracenia.transfer.Transfer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transfer</span></code></a></p>
<p>SecSH File Transfer Protocol (SFTP)  ( <a class="reference external" href="https://filezilla-project.org/specs/draft-ietf-secsh-filexfer-02.txt">https://filezilla-project.org/specs/draft-ietf-secsh-filexfer-02.txt</a> )
Sarracenia transfer protocol subclass supports/uses additional custom options:</p>
<ul class="simple">
<li><p>accelScpCommand (default: ‘/usr/bin/scp %s %d’ )</p></li>
</ul>
<p>The module uses the paramiko library for python SecSH support ( <a class="reference external" href="https://www.paramiko.org/">https://www.paramiko.org/</a> )</p>
<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.transfer.sftp.Sftp.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">proto</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/transfer/sftp.html#Sftp.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.sftp.Sftp.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sarracenia.transfer.sftp.Sftp.cd_forced">
<span class="sig-name descname"><span class="pre">cd_forced</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sarracenia/transfer/sftp.html#Sftp.cd_forced"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sarracenia.transfer.sftp.Sftp.cd_forced" title="Link to this definition"></a></dt>
<dd><p>try to cd to a directory. If the cd fails, create the directory</p>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="flowcb.html" class="btn btn-neutral float-left" title="FlowCallback Reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../Contribution/index.html" class="btn btn-neutral float-right" title="Contributing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Shared Services Canada, Government of Canada, GPLv2.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>